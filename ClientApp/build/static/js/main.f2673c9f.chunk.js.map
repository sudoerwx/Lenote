{"version":3,"sources":["registerServiceWorker.js","actions/editor.js","actions/user.js","reducers/user.js","actions/shareLink.js","reducers/index.js","reducers/editor.js","reducers/renderMarkdown.js","actions/renderMarkdown.js","reducers/shareLink.js","icons/arrow-down.svg","icons/burger.svg","icons/toolbar/title.svg","icons/toolbar/bold.svg","icons/toolbar/italic.svg","icons/toolbar/quote.svg","icons/toolbar/code.svg","icons/toolbar/table.svg","icons/toolbar/link.svg","icons/toolbar/img.svg","icons/toolbar/divider.svg","icons/toolbar/ul.svg","icons/toolbar/ol.svg","components/Toolbar/ButtonList.js","components/Toolbar/DialogStyle.js","components/Toolbar/Buttons.js","components/common/Avatar.js","components/common/Menu.js","components/common/Modal.js","components/common/TextInput.js","components/Toolbar/ShareLinkModal.js","config/constants.js","components/hooks/useMatchMobile.js","components/Toolbar/Toolbar.js","components/FileList/CreateFileModal.js","icons/delete.svg","components/FileList/FileList.js","components/Sidebar/Sidebar.js","vendor/Markdown.Converter.js","vendor/Markdown.Editor.js","vendor/modifiedGfm.js","components/Editor/Editor.js","icons/visibility-on.svg","icons/visibility-off.svg","components/Paper/Paper.js","components/App/App.js","components/RootRouter/RootRouter.js","index.js"],"names":["isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","catch","error","receiveUserData","data","type","logoutSuccess","createFileSuccess","name","nameHash","deleteFileSuccess","initialState","ownFiles","secondFiles","receiveShareLink","combineReducers","editor","arguments","length","undefined","codeMirror","action","renderMarkdown","user","Object","objectSpread","currentFile","concat","toConsumableArray","filter","_ref","shareLink","_extends","assign","target","i","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","arrow_down_ref2","react_default","a","createElement","d","fill","arrow_down_ref3","arrow_down_SvgArrowDown","svgRef","props","width","height","viewBox","ref","ForwardRef","forwardRef","__webpack_require__","p","burger_extends","burger_objectWithoutProperties","burger_objectWithoutPropertiesLoose","burger_ref2","burger_ref3","burger_SvgBurger","burger_ForwardRef","title_extends","title_objectWithoutProperties","title_objectWithoutPropertiesLoose","title_ref2","title_SvgTitle","title_ForwardRef","bold_extends","bold_objectWithoutProperties","bold_objectWithoutPropertiesLoose","bold_ref2","bold_SvgBold","bold_ForwardRef","italic_extends","italic_objectWithoutProperties","italic_objectWithoutPropertiesLoose","italic_ref2","italic_SvgItalic","italic_ForwardRef","quote_extends","quote_objectWithoutProperties","quote_objectWithoutPropertiesLoose","quote_ref2","quote_SvgQuote","quote_ForwardRef","code_extends","code_objectWithoutProperties","code_objectWithoutPropertiesLoose","code_ref2","code_SvgCode","code_ForwardRef","table_extends","table_objectWithoutProperties","table_objectWithoutPropertiesLoose","table_ref2","table_SvgTable","table_ForwardRef","link_extends","link_objectWithoutProperties","link_objectWithoutPropertiesLoose","link_ref2","link_SvgLink","link_ForwardRef","img_extends","img_objectWithoutProperties","img_objectWithoutPropertiesLoose","img_ref2","img_SvgImg","img_ForwardRef","divider_extends","divider_objectWithoutProperties","divider_objectWithoutPropertiesLoose","divider_ref2","divider_ref3","divider_ref4","divider_ref5","divider_SvgDivider","divider_ForwardRef","ul_extends","ul_objectWithoutProperties","ul_objectWithoutPropertiesLoose","ul_ref2","ul_SvgUl","ul_ForwardRef","ol_extends","ol_objectWithoutProperties","ol_objectWithoutPropertiesLoose","ol_ref2","ol_SvgOl","ol_ForwardRef","ButtonList","Icon","TitleIcon","title","method","BoldIcon","ItalicIcon","QuoteIcon","CodeIcon","TableIcon","LinkIcon","ImgIcon","DividerIcon","UlIcon","OlIcon","createGlobalStyle","_templateObject","StyledButtons","styled","div","Buttons_templateObject","connect","_ref3","dark","Fragment","map","_ref2","index","onClick","doClick","DialogStyle","img","Avatar_templateObject","Container","Menu_templateObject","OptionsWrapper","_templateObject2","visible","OpenMenu","Menu","children","_ref$ContainerTag","ContainerTag","_ref$OptionsContainer","OptionsContainer","_ref$onChange","onChange","_ref$onOpen","onOpen","clickAwayRef","useRef","createRef","_useState","useState","_useState2","slicedToArray","isMenuOpen","setMenuOpen","open","find","child","options","hideOnClickAway","event","useEffect","addEventListener","removeEventListener","e","stopPropagation","React","Children","option","cloneElement","value","ModalWrapper","Modal_templateObject","css","Modal_templateObject2","ModalContent","_templateObject3","Modal","onClose","createPortal","document","body","useModal","toggleVisibility","Input","input","TextInput_templateObject","invalid","TextInput_templateObject2","ErrorMessage","TextInput_templateObject3","TextInput","rest","objectWithoutProperties","Title","h2","ShareLinkModal_templateObject","LinkInput","ShareLinkModal_templateObject2","mapDispatchToProps","getShareLink","asyncToGenerator","regenerator_default","mark","_callee","dispatch","wrap","_context","prev","next","fetch","sent","t0","t1","json","t2","t3","t4","warn","stop","_x","withRouter","params","common_Modal","placeholder","link","useMatchMobile","_useContext","useContext","IsMobileContext","_useContext2","isMobile","setMobile","handleResize","matches","matchMedia","Button","Toolbar_templateObject","StyledToolbar","Toolbar_templateObject2","BottomToolbar","Toolbar_templateObject3","Wrapper","_templateObject4","Group","_templateObject5","BurgerButton","BurgerIcon","_templateObject6","LoginButton","_templateObject7","UserName","_templateObject8","Avatar","MenuButtonsContainer","_templateObject9","MenuButton","_templateObject10","logout","history","_callee2","_context2","push","_x2","toggleMobileSidebar","_useModal","_useModal2","shareLinkVisible","hideShareLink","showShareLink","file","prevState","common_Menu","Toolbar_Buttons","secondName","photoURI","src","href","Toolbar_ShareLinkModal","CreateFileModal_templateObject","ButtonsContainer","CreateFileModal_templateObject2","CreateFileModal_templateObject3","disabled","CreateFileModal_templateObject4","CreateFileModal","submit","fileName","setFileName","_useState3","_useState4","touched","setTouched","handleNameChange","useCallback","newFileName","CreateFileModal_Title","common_TextInput","CreateFileModal_Button","delete_extends","delete_objectWithoutProperties","delete_objectWithoutPropertiesLoose","delete_ref2","delete_ref3","delete_SvgDelete","delete_ForwardRef","Item","FileList_templateObject","hl","NewFileButton","FileList_templateObject2","Text","FileList_templateObject3","createFile","_callee3","_context3","text","_x3","deleteFile","_ref4","_callee4","_context4","abrupt","_x4","_ref10","createFileVisible","hideCreateFile","showCreateFile","_ref5","_ref6","_ref7","_ref8","FileList_CreateFileModal","some","_ref9","Markdown","StyledSidebar","Sidebar_templateObject","mobileSidebarOpen","Number","components_FileList_FileList","exports","identity","x","returnFalse","HookCollection","SaveHash","chain","hookname","func","original","Error","args","Array","slice","set","addNoop","addFalse","get","Converter","setOptions","optionsParam","g_urls","g_titles","g_html_blocks","g_list_level","pluginHooks","hooks","_HashHTMLBlocks","replace","hashElement","wholeMatch","m1","blockText","makeHtml","_Detab","preConversion","charCodeToReplace","parseInt","String","fromCharCode","_UnescapeSpecialChars","_RunBlockGamut","m2","m3","m4","m5","toLowerCase","_EncodeAmpsAndAngles","_StripLinkDefinitions","postNormalization","postConversion","blockGamutHookCallback","t","doNotUnhash","bq","pre","_DoBlockQuotes","codeblock","nextChar","_EncodeCode","_Outdent","_DoCodeBlocks","_DoLists","_RunSpanGamut","matchFound","h_level","_DoHeaders","preBlockGamut","grafs","split","grafsOut","markerRe","end","str","test","foundAny","id","join","_FormParagraphs","postBlockGamut","autoLinkRegex","handleTrailingParens","wholematch","plainLinkText","_DoAutoLinks","writeAnchorTag","_DoAnchors","writeImageTag","_DoImages","escapeCharacters_callback","_EncodeBackslashEscapes","tag","escapeCharacters","charAt","_EscapeSpecialCharsWithinTagAttributes","c","_DoCodeSpans","preSpanGamut","_DoItalicsAndBold","postSpanGamut","m6","m7","whole_match","link_text","link_id","url","search","result","_problemUrlChars","offset","charCodeAt","toString","encodeProblemUrlChars","attributeEncode","alt_text","isInsideParagraphlessListItem","whole_list","list","list_type","_ProcessListItems","runup","_listItemMarkers","ol","ul","list_str","marker","re","RegExp","last_item_had_a_double_newline","item","ends_with_double_newline","endCharRegex","lookbehind","protocol","parens","level","tail","trailingParens","lastChar","substr","v","spaces","skew","charsToEscape","afterBackslash","regexString","regex","util","position","ui","doc","nav","SETTINGS","uaSniffed","isIE","userAgent","isIE_5or6","isOpera","isMac","platform","defaultsStrings","bold","boldexample","italic","italicexample","linkdescription","linkdialog","quote","quoteexample","code","codeexample","image","imagedescription","imagedialog","olist","ulist","litem","heading","headingexample","hr","table","undo","redo","help","keyStrokes","win","mac","Chunks","PanelCollection","postfix","cm","buttonBar","getElementById","preview","TextareaState","panels","isInitialState","stateObj","inputArea","init","before","getRange","CodeMirror","Pos","getCursor","selection","getSelection","after","posFromIndex","MAX_VALUE","setInputAreaSelectionStartEnd","scrollTop","setInputAreaSelection","setSelection","start","scroll","focus","restore","startIndex","startIndexMax","endIndex","endIndexMax","beforeMaxOffset","afterMaxOffset","replaceRange","substring","getChunks","chunk","startTag","endTag","setChunks","PreviewManager","converter","previewRefreshCallback","previewWrapper","timeout","elapsedTime","oldInputText","getDocScrollTop","innerHeight","pageYOffset","documentElement","makePreviewHtml","getValue","prevTime","Date","getTime","currTime","pushPreviewHtml","applyTimeout","clearTimeout","delay","setTimeout","refresh","requiresRefresh","processingTime","previewSetter","isFirstTimeFilled","ieSafePreviewSet","parent","parentNode","sibling","nextSibling","removeChild","innerHTML","insertBefore","appendChild","nonSuckyBrowserPreviewSet","emptyTop","getTop","previewSet","panel","scrollHeight","clientHeight","setPanelScrollTops","fullTop","scrollBy","on","UIManager","undoManager","previewManager","commandManager","helpOptions","getString","getKey","getStringAndKey","identifier","inputBox","buttons","setUndoRedoButtonStates","setupButton","done","undone","that","buttonRow","className","xPosition","makeButton","XShift","textOp","button","style","left","buttonImage","makeSpacer","num","spacer","bindCommand","postProcessing","doLinkOrImage","doList","execute","manager","helpButton","helpButtonImage","isHelp","right","onclick","handler","makeSpritedButtonRow","linkOrImage","setCommandMode","chunks","fixupInputArea","isEnabled","getElementsByTagName","backgroundPosition","onmouseover","onmouseout","onmousedown","activeElement","ieCachedRange","createRange","ieCachedScrollTop","identifierList","eKeys","addKeyMap","addKeyCmd","setButtonState","CommandManager","Editor","markdownConverter","idPostfix","strings","getConverter","run","uiManager","onPreviewRefresh","refreshPreview","findTags","startRegex","endRegex","chunkObj","extendRegExp","trimWhitespace","remove","beforeReplacer","afterReplacer","s","skipLines","nLinesBefore","nLinesAfter","findExtraNewlines","regexText","replacementText","$1","isVisible","elem","getComputedStyle","getPropertyValue","currentStyle","addEvent","listener","attachEvent","removeEvent","detachEvent","fixEolChars","post","flags","pattern","flagsPart","isInner","offsetTop","offsetParent","getHeight","offsetHeight","getWidth","offsetWidth","scrollWidth","getPageSize","innerWidth","scrollMaxY","clientWidth","Math","max","createBackground","background","top","zIndex","opacity","pageSize","scrollLeft","prompt","defaultInputText","callback","fileChangeCallback","fileType","dialog","fileInput","checkEscape","charCode","keyCode","close","isCancel","padding","question","form","onsubmit","margin","cssFloat","textAlign","display","marginLeft","marginRight","accept","files","okButton","cancelButton","marginTop","createDialog","commandProto","prefixes","unwrap","txt","len","line","marked","doBold","doBorI","doItalic","nStars","insertText","starsBefore","exec","starsAfter","prevStars","min","whitespace","markup","stripLinkDefs","defsToAdd","totalMatch","newlines","addLinkDef","linkDef","refNumber","defs","addDefNumber","def","getLink","inner","afterInner","refOut","isImage","linkEnteredCallback","querypart","decodeURIComponent","encodeURI","trim","insertImageDialog","formData","FormData","append","mode","insertLinkDialog","doAutoindent","fakeSelection","doBlockquote","doCode","newlinesBefore","newlinesAfter","blankLine","leftOver","lines","inChain","good","replaceBlanksInTags","useBracket","replacement","markdown","postBlockquoteCreation","blanks","hasTextBefore","nLinesBack","nLinesForward","isNumberedList","nextItemsRegex","bullet","getItemPrefix","prefix","getPrefixedItem","itemText","_","hasDigits","nLinesUp","nLinesDown","doHeading","headerLevel","lastMatch","headerLevelToCreate","headerChar","doHorizontalRule","doTable","urlRE","defineMode","config","modeConfig","codeDepth","gfmOverlay","startState","codeBlock","ateSpace","copyState","token","stream","combineTokens","skipToEnd","sol","peek","pos","eatWhile","difference","eatSpace","gitHubSpice","string","markdownConfig","taskLists","strikethrough","emoji","attr","overlayMode","getMode","defineMIME","FakeButtonsElement","Editor_templateObject","UserList","Editor_templateObject2","setCmInstance","editorRef","userListRef","useLayoutEffect","pagedownConverter","PagedownConverter","pagedownEditor","PagedownEditor","fromTextArea","current","highlightFormatting","maxBlockquoteDepth","fencedCodeBlockHighlighting","shared","lineWrapping","setValue","toTextArea","stopWatch","ShareDB","types","otText","sharews","WebSocket","sharedoc","Connection","ed","chg","stindex","indexFromPos","from","delta","removed","addedText","submitOp","err","stPos","edPos","hdPos","edindex","prefixed","socket","emit","subscribe","setCursor","op","mine","delCt","addName","photoURL","userslist","usericon","classList","add","color","idToColor","styleTag","hexToRgbaStyle","querySelector","anchorMap","setAnchor","anchor","forEach","m","clear","emptyClass","markText","removeId","total","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","return","hex","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","r","g","b","io","clearAll","once","anchors","names","destroy","disconnect","visibility_on_extends","visibility_on_objectWithoutProperties","visibility_on_objectWithoutPropertiesLoose","visibility_on_ref2","visibility_on_ref3","visibility_on_SvgVisibilityOn","visibility_on_ForwardRef","visibility_off_extends","visibility_off_objectWithoutProperties","visibility_off_objectWithoutPropertiesLoose","visibility_off_ref2","visibility_off_ref3","visibility_off_SvgVisibilityOff","visibility_off_ForwardRef","Paper_templateObject","StyledPaper","Paper_templateObject2","VisibilityWrapper","Paper_templateObject3","MarkdownRenderWrapper","Paper_templateObject4","RenderButton","Paper_templateObject5","toggleRenderMarkdown","Paper_Wrapper","components_Editor_Editor","react_markdown_default","GlobalStyle","App_templateObject","createContext","requestUserData","mobileState","Provider","components_Toolbar_Toolbar","components_Sidebar_Sidebar","components_Paper_Paper","BrowserRouter","Switch","Route","path","component","App","Redirect","to","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","rootReducer","applyMiddleware","thunkMiddleware","render","es","components_RootRouter_RootRouter","URL","process","origin","response","status","headers","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.f2673c9f.chunk.js","sourcesContent":["// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export const SET_CM_INSTANCE = 'SET_CM_INSTANCE'\n\nexport const setCmInstance = ({ codeMirror, doClick }) => ({\n\ttype: SET_CM_INSTANCE,\n\teditor: {\n\t\tcodeMirror,\n\t\tdoClick,\n\t},\n})\n","export const RECEIVE_USER_DATA = 'RECEIVE_USER_DATA'\nexport const LOGOUT = 'LOGOUT'\nexport const CREATE_FILE_SUCCESS = 'CREATE_FILE_SUCCESS'\nexport const DELETE_FILE_SUCCESS = 'DELETE_FILE_SUCCESS'\n\nexport const requestUserData = () => async dispatch => {\n\ttry {\n\t\tconst data = await fetch('/user')\n\t\tdispatch(receiveUserData(await data.json()))\n\t} catch (err) {\n\t\tconsole.warn(err)\n\t}\n}\n\nexport const receiveUserData = data => ({\n\ttype: RECEIVE_USER_DATA,\n\tdata,\n})\n\nexport const logout = history => async dispatch => {\n\tawait fetch('/auth/logout')\n\tdispatch(logoutSuccess())\n\thistory.push('/')\n}\n\nexport const logoutSuccess = () => ({\n\ttype: LOGOUT,\n})\n\nexport const createFile = name => async dispatch => {\n\tconst data = await fetch(`/file/${name}`, { method: 'POST' })\n\tdispatch(createFileSuccess(name, await data.text()))\n}\n\nexport const createFileSuccess = (name, nameHash) => ({\n\ttype: CREATE_FILE_SUCCESS,\n\tdata: {\n\t\tname,\n\t\tnameHash,\n\t},\n})\n\nexport const deleteFile = nameHash => async dispatch => {\n\ttry {\n\t\tawait fetch(`/file/${nameHash}`, { method: 'DELETE' })\n\t\treturn dispatch(deleteFileSuccess(nameHash))\n\t} catch (err) {\n\t\tconsole.warn(err)\n\t}\n}\n\nexport const deleteFileSuccess = nameHash => ({\n\ttype: DELETE_FILE_SUCCESS,\n\tnameHash,\n})\n","import { RECEIVE_USER_DATA, LOGOUT, CREATE_FILE_SUCCESS, DELETE_FILE_SUCCESS } from '../actions/user'\n\nconst initialState = {\n\townFiles: [],\n\tsecondFiles: [],\n}\n\nexport default (state = initialState, action) => {\n\tswitch (action.type) {\n\t\tcase RECEIVE_USER_DATA:\n\t\t\treturn { ...action.data, currentFile: action.data.ownFiles[0] }\n\t\tcase LOGOUT:\n\t\t\treturn initialState\n\t\tcase CREATE_FILE_SUCCESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\townFiles: [...state.ownFiles, action.data],\n\t\t\t}\n\t\tcase DELETE_FILE_SUCCESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\townFiles: state.ownFiles.filter(({ nameHash }) => nameHash !== action.nameHash),\n\t\t\t}\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n","export const RECEIVE_SHARE_LINK = 'RECEIVE_SHARE_LINK'\n\nexport const getShareLink = nameHash => async dispatch => {\n\ttry {\n\t\tconst data = await fetch(`/link/${nameHash}`)\n\n\t\tdispatch(receiveShareLink(await data.json()))\n\t} catch (err) {\n\t\tconsole.warn(err)\n\t}\n}\n\nconst receiveShareLink = data => ({\n\ttype: RECEIVE_SHARE_LINK,\n\tdata,\n})\n","import { combineReducers } from 'redux'\nimport editor from './editor'\nimport renderMarkdown from './renderMarkdown'\nimport user from './user'\nimport shareLink from './shareLink'\n\nexport default combineReducers({\n\teditor,\n\trenderMarkdown,\n\tuser,\n\tshareLink,\n})\n","import { SET_CM_INSTANCE } from '../actions/editor'\n\nexport default (state = { codeMirror: {} }, action) => {\n\tswitch (action.type) {\n\t\tcase SET_CM_INSTANCE:\n\t\t\treturn action.editor\n\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n","import { TOGGLE_RENDER_MARKDOWN } from '../actions/renderMarkdown'\n\nexport default (state = false, action) => {\n\tswitch (action.type) {\n\t\tcase TOGGLE_RENDER_MARKDOWN:\n\t\t\treturn !state\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n","export const TOGGLE_RENDER_MARKDOWN = 'TOGGLE_RENDER_MARKDOWN'\n\nexport const toggleRenderMarkdown = () => ({\n\ttype: TOGGLE_RENDER_MARKDOWN,\n})\n","import { RECEIVE_SHARE_LINK } from '../actions/shareLink'\n\nexport default (state = {}, action) => {\n\tswitch (action.type) {\n\t\tcase RECEIVE_SHARE_LINK:\n\t\t\treturn action.data\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M11 0L12 1L6 7V5L11 0Z\",\n  fill: \"#EEEEEE\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M1 0L-1.90735e-06 1L6 7V5L1 0Z\",\n  fill: \"#EEEEEE\"\n});\n\nvar SvgArrowDown = function SvgArrowDown(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 12,\n    height: 7,\n    viewBox: \"0 0 12 7\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgArrowDown, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/arrow-down.b1b39921.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\"\n});\n\nvar SvgBurger = function SvgBurger(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgBurger, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/burger.c275e518.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0V3H5.5V15H8.5V3H14V0H0Z\"\n});\n\nvar SvgTitle = function SvgTitle(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 14,\n    height: 15,\n    viewBox: \"0 0 14 15\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgTitle, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/title.2e07aade.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M8.6 6.79C9.57 6.12 10.25 5.02 10.25 4C10.25 1.74 8.5 0 6.25 0H0V14H7.04C9.13 14 10.75 12.3 10.75 10.21C10.75 8.69 9.89 7.39 8.6 6.79ZM3 2.5H6C6.83 2.5 7.5 3.17 7.5 4C7.5 4.83 6.83 5.5 6 5.5H3V2.5ZM6.5 11.5H3V8.5H6.5C7.33 8.5 8 9.17 8 10C8 10.83 7.33 11.5 6.5 11.5Z\"\n});\n\nvar SvgBold = function SvgBold(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 11,\n    height: 14,\n    viewBox: \"0 0 11 14\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgBold, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/bold.f8b8ed46.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M4 0V3H6.21L2.79 11H0V14H8V11H5.79L9.21 3H12V0H4Z\"\n});\n\nvar SvgItalic = function SvgItalic(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 12,\n    height: 14,\n    viewBox: \"0 0 12 14\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgItalic, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/italic.7fa19bc7.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M1 10H4L6 6V0H0V6H3L1 10ZM9 10H12L14 6V0H8V6H11L9 10Z\"\n});\n\nvar SvgQuote = function SvgQuote(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 14,\n    height: 10,\n    viewBox: \"0 0 14 10\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgQuote, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/quote.6319b83b.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M7.4 10.6L2.8 6L7.4 1.4L6 0L0 6L6 12L7.4 10.6ZM12.6 10.6L17.2 6L12.6 1.4L14 0L20 6L14 12L12.6 10.6Z\"\n});\n\nvar SvgCode = function SvgCode(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 12,\n    viewBox: \"0 0 20 12\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgCode, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/code.9a62a51f.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 18H2V16H0V18ZM4 18H6V16H4V18ZM2 4H0V6H2V4ZM0 14H2V12H0V14ZM6 0H4V2H6V0ZM2 0H0V2H2V0ZM14 0H12V2H14V0ZM16 6H18V4H16V6ZM16 0V2H18V0H16ZM12 18H14V16H12V18ZM10 0H8V8H0V10H8V18H10V10H18V8H10V0ZM16 18H18V16H16V18ZM16 14H18V12H16V14Z\"\n});\n\nvar SvgTable = function SvgTable(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 18,\n    height: 18,\n    viewBox: \"0 0 18 18\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgTable, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/table.0985368b.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M1.9 5C1.9 3.29 3.29 1.9 5 1.9H9V0H5C2.24 0 0 2.24 0 5C0 7.76 2.24 10 5 10H9V8.1H5C3.29 8.1 1.9 6.71 1.9 5ZM6 6H14V4H6V6ZM15 0H11V1.9H15C16.71 1.9 18.1 3.29 18.1 5C18.1 6.71 16.71 8.1 15 8.1H11V10H15C17.76 10 20 7.76 20 5C20 2.24 17.76 0 15 0Z\"\n});\n\nvar SvgLink = function SvgLink(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 10,\n    viewBox: \"0 0 20 10\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgLink, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/link.296bc724.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M18 16V2C18 0.9 17.1 0 16 0H2C0.9 0 0 0.9 0 2V16C0 17.1 0.9 18 2 18H16C17.1 18 18 17.1 18 16ZM5.5 10.5L8 13.51L11.5 9L16 15H2L5.5 10.5Z\"\n});\n\nvar SvgImg = function SvgImg(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 18,\n    height: 18,\n    viewBox: \"0 0 18 18\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgImg, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/img.6020ea6d.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M2 13.5H4.5V12H2V13.5ZM2 16H7.5V14.5H2V16ZM4.5 0H2V1.5H4.5V0ZM15 0H6.5V1.5H15V0ZM9.5 16H14V14.5H9.5V16ZM0 9H18V7H0V9Z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M2 2.5H7.5V4H2V2.5Z\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M6 12H15.5V13.5H6V12Z\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M9.5 2.5H15.5V4H9.5V2.5Z\"\n});\n\nvar SvgDivider = function SvgDivider(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 18,\n    height: 16,\n    viewBox: \"0 0 18 16\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), _ref2, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgDivider, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/divider.3f7181c6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M2 6.5C1.17 6.5 0.5 7.17 0.5 8C0.5 8.83 1.17 9.5 2 9.5C2.83 9.5 3.5 8.83 3.5 8C3.5 7.17 2.83 6.5 2 6.5ZM2 0.5C1.17 0.5 0.5 1.17 0.5 2C0.5 2.83 1.17 3.5 2 3.5C2.83 3.5 3.5 2.83 3.5 2C3.5 1.17 2.83 0.5 2 0.5ZM2 12.5C1.17 12.5 0.5 13.18 0.5 14C0.5 14.82 1.18 15.5 2 15.5C2.82 15.5 3.5 14.82 3.5 14C3.5 13.18 2.83 12.5 2 12.5ZM5 15H19V13H5V15ZM5 9H19V7H5V9ZM5 1V3H19V1H5Z\"\n});\n\nvar SvgUl = function SvgUl(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 19,\n    height: 16,\n    viewBox: \"0 0 19 16\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgUl, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ul.67cb0351.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 13H2V13.5H1V14.5H2V15H0V16H3V12H0V13ZM1 4H2V0H0V1H1V4ZM0 7H1.8L0 9.1V10H3V9H1.2L3 6.9V6H0V7ZM5 1V3H19V1H5ZM5 15H19V13H5V15ZM5 9H19V7H5V9Z\"\n});\n\nvar SvgOl = function SvgOl(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 19,\n    height: 16,\n    viewBox: \"0 0 19 16\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgOl, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ol.1bdd9112.svg\";\nexport { ForwardRef as ReactComponent };","import { ReactComponent as TitleIcon } from '../../icons/toolbar/title.svg'\nimport { ReactComponent as BoldIcon } from '../../icons/toolbar/bold.svg'\nimport { ReactComponent as ItalicIcon } from '../../icons/toolbar/italic.svg'\nimport { ReactComponent as QuoteIcon } from '../../icons/toolbar/quote.svg'\nimport { ReactComponent as CodeIcon } from '../../icons/toolbar/code.svg'\nimport { ReactComponent as TableIcon } from '../../icons/toolbar/table.svg'\nimport { ReactComponent as LinkIcon } from '../../icons/toolbar/link.svg'\nimport { ReactComponent as ImgIcon } from '../../icons/toolbar/img.svg'\nimport { ReactComponent as DividerIcon } from '../../icons/toolbar/divider.svg'\nimport { ReactComponent as UlIcon } from '../../icons/toolbar/ul.svg'\nimport { ReactComponent as OlIcon } from '../../icons/toolbar/ol.svg'\n\nexport default [\n\t{ Icon: TitleIcon, title: 'Heading', method: 'heading' },\n    { Icon: BoldIcon, title: 'Bold', method: 'bold' },\n    { Icon: ItalicIcon, title: 'Italic', method: 'italic' },\n    { Icon: QuoteIcon, title: 'Blockquote', method: 'quote' },\n    { Icon: CodeIcon, title: 'Code', method: 'code' },\n    { Icon: TableIcon, title: 'Table', method: 'table' },\n    { Icon: LinkIcon, title: 'Link', method: 'link' },\n    { Icon: ImgIcon, title: 'Image', method: 'image' },\n    { Icon: DividerIcon , title: 'Divider', method: 'hr'},\n    { Icon: UlIcon, title: 'Unordered list', method: 'ulist' },\n    { Icon: OlIcon, title: 'Ordered list', method: 'olist' },\n]\n","import { createGlobalStyle } from 'styled-components'\n\nexport default createGlobalStyle`\n    .wmd-prompt-background {\n        background-color: rgba(0, 0, 0, 0.15);\n    }\n    .wmd-prompt-dialog {\n        padding: 20px;\n        background-color: white;\n        box-shadow: 4px 2px 5px rgba(0, 0, 0, 0.15);\n        border-radius: 5px;\n        font-family: Roboto;\n        p:first-of-type {\n            padding-bottom: 20px;\n            b {\n                font-size: 1.5em;\n                font-weight: 300;\n            }\n        }\n        input[type=\"text\"] {\n            border: none;\n            border-bottom: 1px solid var(--c-lightgrey-text);\n            transition: border-bottom-color 0.3s;\n            outline: 0;\n            padding: 10px;\n            margin-bottom: 15px;\n            font-size: 16px;\n            &:focus {\n                border-bottom-color: var(--c-blue-hl);\n            }\n        }\n        input[type=\"button\"] {\n            padding: 8px;\n            margin-left: 5px;\n            border-radius: 5px;\n            border: 0;\n            outline: 0;\n            text-transform: uppercase;\n            font-size: 13px;\n            cursor: pointer;\n            background-color: transparent;\n            transition: background-color 0.2s,color 0.2s;\n            &:hover {\n                background-color: rgba(0, 0, 0, 0.05)\n            }\n        }\n    }\n`\n","import React from 'react'\nimport styled from 'styled-components'\nimport { connect } from 'react-redux'\n\nimport ButtonList from './ButtonList'\nimport DialogStyle from './DialogStyle'\n\nconst StyledButtons = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\tflex-wrap: wrap;\n\tjustify-content: center;\n\tsvg {\n\t\tmargin: 15px;\n\t\tcursor: pointer;\n\t}\n`\n\nconst Buttons = ({ editor, dark }) => (\n\t<>\n\t\t<StyledButtons>\n\t\t\t{ButtonList.map(({ Icon, method }, index) => (\n\t\t\t\t<Icon\n\t\t\t\t\tkey={index}\n\t\t\t\t\tonClick={() => editor.doClick(method)}\n\t\t\t\t\tfill={`var(--c-${dark ? 'dark' : 'light'}grey-text)`}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</StyledButtons>\n\t\t<DialogStyle />\n\t</>\n)\n\nexport default connect(({ editor }) => ({ editor }))(Buttons)\n","import styled from 'styled-components'\n\nexport default styled.img`\n\twidth: 35px;\n\theight: 35px;\n\tborder-radius: 50%;\n`\n","import React, { useState, useEffect, useRef, createRef } from 'react'\nimport styled from 'styled-components'\n\nconst Container = styled.div`\n\tposition: relative;\n`\n\nconst OptionsWrapper = styled.div`\n\tposition: absolute;\n\ttop: 100%;\n\tdisplay: ${props => (props.visible ? 'block' : 'none')};\n`\n\nexport const OpenMenu = () => null\n\nconst Menu = ({\n\tchildren,\n\tContainerTag = Container,\n\tOptionsContainer = 'div',\n\tonChange = () => {},\n\tonOpen = () => {},\n}) => {\n\tconst clickAwayRef = useRef(createRef())\n\tconst [isMenuOpen, setMenuOpen] = useState(false)\n\n\tconst toggleMenu = e => {\n\t\te.stopPropagation()\n\t\tif (isMenuOpen) {\n\t\t\tsetMenuOpen(false)\n\t\t} else {\n\t\t\tonOpen()\n\t\t\tsetMenuOpen(true)\n\t\t}\n\t}\n\tconst open = children.find(child => child.type === OpenMenu)\n\tconst options = children.filter(child => child.props && child.type !== OpenMenu)\n\n\tconst hideOnClickAway = event => {\n\t\tsetMenuOpen(false)\n\t}\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('click', hideOnClickAway)\n\t\treturn () => window.removeEventListener('click', hideOnClickAway)\n\t}, [])\n\n\treturn (\n\t\t<ContainerTag onClick={toggleMenu} ref={clickAwayRef}>\n\t\t\t{open && open.props.children}\n\t\t\t<OptionsWrapper visible={isMenuOpen}>\n\t\t\t\t<OptionsContainer onClick={e => e.stopPropagation()}>\n\t\t\t\t\t{options &&\n\t\t\t\t\t\tReact.Children.map(options, option =>\n\t\t\t\t\t\t\tReact.cloneElement(option, {\n\t\t\t\t\t\t\t\tonClick: e => onChange(option.props.value, e),\n\t\t\t\t\t\t\t\t...option.props,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t)}\n\t\t\t\t</OptionsContainer>\n\t\t\t</OptionsWrapper>\n\t\t</ContainerTag>\n\t)\n}\n\nexport default Menu\n","import React, { useState } from 'react'\nimport { createPortal } from 'react-dom'\nimport styled, { css } from 'styled-components'\n\nconst ModalWrapper = styled.div`\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100vh;\n\ttop: 0;\n\tleft: 0;\n\tbackground-color: rgba(0, 0, 0, 0.15);\n\tz-index: 4;\n\topacity: 1;\n\tpointer-events: auto;\n\ttransition: opacity 0.3s;\n\t${props =>\n\t\t!props.visible &&\n\t\tcss`\n\t\t\topacity: 0;\n\t\t\tpointer-events: none;\n\t\t`};\n`\n\nconst ModalContent = styled.div`\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tbackground-color: white;\n\tborder-radius: 5px;\n\tpadding: 20px;\n\tbox-shadow: 4px 2px 5px rgba(0, 0, 0, 0.15);\n`\n\nconst Modal = ({ visible, onClose, children }) =>\n\tcreatePortal(\n\t\t<ModalWrapper onClick={onClose} visible={visible}>\n\t\t\t<ModalContent onClick={e => e.stopPropagation()}>{children}</ModalContent>\n\t\t</ModalWrapper>,\n\t\tdocument.body\n\t)\n\nexport default Modal\n\nexport const useModal = () => {\n\tconst [visible, toggleVisibility] = useState(false)\n\n\tconst hideModal = () => toggleVisibility(false)\n\tconst showModal = () => toggleVisibility(true)\n\n\treturn [visible, hideModal, showModal]\n}\n","import React from 'react'\nimport styled, { css } from 'styled-components'\n\nconst Input = styled.input`\n\tborder: none;\n\tborder-bottom: 1px solid var(--c-lightgrey-text);\n\ttransition: border-bottom-color 0.3s;\n\toutline: 0;\n\tpadding: 10px;\n\tmargin-bottom: 15px;\n\tfont-size: 16px;\n\t&:focus {\n\t\tborder-bottom-color: var(--c-blue-hl);\n\t}\n\t${props =>\n\t\tprops.invalid &&\n\t\tcss`\n\t\t\tborder-bottom-color: red !important;\n\t\t`};\n`\n\nconst ErrorMessage = styled.div`\n\tcolor: red;\n\tfont-size: 14px;\n`\n\nconst TextInput = ({ error, value, onChange, ...rest }) => (\n\t<>\n\t\t<Input\n\t\t\ttype=\"text\"\n\t\t\tvalue={value}\n\t\t\tinvalid={error && Boolean(error(value))}\n\t\t\tonChange={e => onChange && onChange(e.target.value)}\n\t\t\t{...rest}\n\t\t/>\n\t\t<ErrorMessage>{error && error(value)}</ErrorMessage>\n\t</>\n)\n\nexport default TextInput\n","import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport styled from 'styled-components'\nimport Modal from '../common/Modal'\nimport TextInput from '../common/TextInput'\nimport { getShareLink } from '../../actions/shareLink'\nimport { baseApiUrl } from '../../config/constants'\n\nconst Title = styled.h2`\n\tfont-weight: 300;\n`\n\nconst LinkInput = styled(TextInput)`\n\tmargin-top: 15px;\n\twidth: calc(100% - 20px);\n`\n\nconst ShareLinkModal = ({\n\tvisible,\n\tonClose,\n\tgetShareLink,\n\tshareLink,\n\tmatch: {\n\t\tparams: { nameHash },\n\t},\n}) => {\n\tuseEffect(\n\t\t() => {\n\t\t\tif (visible) {\n\t\t\t\tgetShareLink(nameHash)\n\t\t\t}\n\t\t},\n\t\t[visible, nameHash]\n\t)\n\n\treturn (\n\t\t<Modal visible={visible} onClose={onClose}>\n\t\t\t<Title>Send this link to your friends to share a file with them</Title>\n\t\t\t<LinkInput\n\t\t\t\tplaceholder=\"Generating a link for you\"\n\t\t\t\tvalue={shareLink.link ? `${baseApiUrl}/share/${shareLink.link}` : ''}\n\t\t\t\tonChange={() => {}}\n\t\t\t/>\n\t\t</Modal>\n\t)\n}\n\nconst mapStateToProps = ({ shareLink }) => ({ shareLink })\n\nconst mapDispatchToProps = { getShareLink }\n\nexport default withRouter(\n\tconnect(\n\t\tmapStateToProps,\n\t\tmapDispatchToProps\n\t)(ShareLinkModal)\n)\n","export const baseApiUrl = process.env.NODE_ENV === 'development' ? process.env.REACT_APP_API_BASE_URL : ''\n\nexport const mobileMediaQuery = '(max-width: 1160px)'\n","import { useContext, useEffect } from 'react'\nimport { mobileMediaQuery } from '../../config/constants'\nimport { IsMobileContext } from '../App/App'\n\nconst useMatchMobile = () => {\n\tconst [isMobile, setMobile] = useContext(IsMobileContext)\n\n\tuseEffect(() => {\n\t\tconst handleResize = () => {\n\t\t\tconst { matches } = matchMedia(mobileMediaQuery)\n\t\t\tif (matches !== isMobile) {\n\t\t\t\tsetMobile(matches)\n\t\t\t}\n\t\t}\n\n\t\twindow.addEventListener('resize', handleResize)\n\t\treturn () => window.removeEventListener('resize', handleResize)\n\t})\n\n\treturn isMobile\n}\n\nexport default useMatchMobile\n","import React from 'react'\nimport { createPortal } from 'react-dom'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport { withRouter } from 'react-router-dom'\nimport { ReactComponent as ArrowDownIcon } from '../../icons/arrow-down.svg'\nimport { ReactComponent as BurgerIcon } from '../../icons/burger.svg'\nimport Buttons from './Buttons'\nimport Avatar from '../common/Avatar'\nimport Menu, { OpenMenu } from '../common/Menu'\nimport { useModal } from '../common/Modal'\nimport ShareLinkModal from './ShareLinkModal'\nimport { logout } from '../../actions/user'\nimport useMatchMobile from '../hooks/useMatchMobile'\nimport { baseApiUrl } from '../../config/constants'\n\nconst Button = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\tcursor: pointer;\n`\n\nconst StyledToolbar = styled.div`\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\tbackground-color: var(--c-darkgrey-bg);\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tz-index: 2;\n`\n\nconst BottomToolbar = styled.div`\n\tposition: fixed;\n\tbottom: 0;\n\twidth: 100%;\n\tbackground-color: var(--c-lightgrey-bg);\n\tz-index: 2;\n`\n\nconst Wrapper = styled.div`\n\twidth: 100%;\n\tmax-width: var(--container-width);\n\theight: 60px;\n\tdisplay: flex;\n\tjustify-content: space-between;\n`\n\nconst Group = styled.div`\n\tdisplay: flex;\n\tjustify-content: flex-start;\n\talign-items: center;\n\tcolor: var(--c-lightgrey-text);\n\tfont-weight: 200;\n\t&:nth-of-type(3n - 1) {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t}\n\t&:nth-of-type(3n) {\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\t}\n\tsvg {\n\t\tmargin-left: 15px;\n\t}\n`\n\nconst BurgerButton = styled(BurgerIcon)`\n\tmargin: 0 15px 0 0 !important;\n`\n\nconst LoginButton = styled.a`\n\tfont-weight: 500;\n\tcolor: var(--c-blue-hl);\n\ttext-decoration: none;\n`\n\nconst UserName = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\tcursor: pointer;\n\theight: 100%;\n\t${Avatar} {\n\t\tmargin-left: 10px;\n\t}\n`\n\nconst MenuButtonsContainer = styled.div`\n\tmargin-top: 10px;\n\twidth: 200px;\n\tright: 0;\n\tbox-shadow: 4px 2px 2px rgba(0, 0, 0, 0.2);\n\tbackground-color: white;\n\tcolor: var(--c-darkgrey-text);\n`\n\nconst MenuButton = styled.div`\n\tdisplay: flex;\n\tpadding: 15px 20px;\n\tcursor: pointer;\n`\n\nconst Toolbar = ({ user, logout, toggleMobileSidebar, match, history }) => {\n\tconst [shareLinkVisible, hideShareLink, showShareLink] = useModal()\n\tconst isMobile = useMatchMobile()\n\n\tconst currentFile =\n\t\t[...user.ownFiles, ...user.secondFiles].find(file => file.nameHash === match.params.nameHash) || {}\n\n\treturn (\n\t\t<StyledToolbar>\n\t\t\t<Wrapper>\n\t\t\t\t<Group>\n\t\t\t\t\t{isMobile && (\n\t\t\t\t\t\t<BurgerButton\n\t\t\t\t\t\t\tfill=\"var(--c-lightgrey-text)\"\n\t\t\t\t\t\t\tonClick={() => toggleMobileSidebar(prevState => !prevState)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t<Menu OptionsContainer={MenuButtonsContainer}>\n\t\t\t\t\t\t<OpenMenu>\n\t\t\t\t\t\t\t<Button>\n\t\t\t\t\t\t\t\t{currentFile.name}\n\t\t\t\t\t\t\t\t<ArrowDownIcon />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</OpenMenu>\n\t\t\t\t\t\t<MenuButton onClick={showShareLink}>Get shareable link</MenuButton>\n\t\t\t\t\t</Menu>\n\t\t\t\t</Group>\n\t\t\t\t{isMobile ? (\n\t\t\t\t\tcreatePortal(\n\t\t\t\t\t\t<BottomToolbar>\n\t\t\t\t\t\t\t<Buttons dark />\n\t\t\t\t\t\t</BottomToolbar>,\n\t\t\t\t\t\tdocument.body\n\t\t\t\t\t)\n\t\t\t\t) : (\n\t\t\t\t\t<Group>\n\t\t\t\t\t\t<Buttons />\n\t\t\t\t\t</Group>\n\t\t\t\t)}\n\t\t\t\t<Group>\n\t\t\t\t\t{user.name ? (\n\t\t\t\t\t\t<Menu OptionsContainer={MenuButtonsContainer}>\n\t\t\t\t\t\t\t<OpenMenu>\n\t\t\t\t\t\t\t\t<UserName>\n\t\t\t\t\t\t\t\t\t{user.name} {user.secondName}\n\t\t\t\t\t\t\t\t\t{user.photoURI && <Avatar src={user.photoURI} />}\n\t\t\t\t\t\t\t\t</UserName>\n\t\t\t\t\t\t\t</OpenMenu>\n\t\t\t\t\t\t\t<MenuButton onClick={() => logout(history)}>Logout</MenuButton>\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<LoginButton href={`${baseApiUrl}/auth/google`}>Login</LoginButton>\n\t\t\t\t\t)}\n\t\t\t\t</Group>\n\t\t\t</Wrapper>\n\t\t\t<ShareLinkModal visible={shareLinkVisible} onClose={hideShareLink} />\n\t\t</StyledToolbar>\n\t)\n}\n\nconst mapStateToProps = ({ user }) => ({ user })\n\nconst mapDispatchToProps = { logout }\n\nexport default withRouter(\n\tconnect(\n\t\tmapStateToProps,\n\t\tmapDispatchToProps\n\t)(Toolbar)\n)\n","import React, { useState, useCallback } from 'react'\nimport styled, { css } from 'styled-components'\nimport Modal from '../common/Modal'\nimport TextInput from '../common/TextInput'\n\nconst Title = styled.h2`\n\tfont-weight: 300;\n`\nconst ButtonsContainer = styled.div`\n\tdisplay: flex;\n\tjustify-content: flex-end;\n`\n\nconst Button = styled.div`\n\tpadding: 8px;\n\tmargin-left: 5px;\n\tborder-radius: 5px;\n\ttext-transform: uppercase;\n\tfont-size: 13px;\n\tcursor: pointer;\n\tbackground-color: transparent;\n\ttransition: background-color 0.2s, color 0.2s;\n\t&:hover {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n\t${props =>\n\t\tprops.disabled &&\n\t\tcss`\n\t\t\tcolor: var(--c-lightgrey-text);\n\t\t\tpointer-events: none;\n\t\t`};\n`\n\nconst CreateFileModal = ({ visible, onClose, error, submit }) => {\n\tconst [fileName, setFileName] = useState('')\n\tconst [touched, setTouched] = useState(false)\n\n\tconst handleNameChange = useCallback(\n\t\tnewFileName => {\n\t\t\tif (!touched) setTouched(true)\n\t\t\tsetFileName(newFileName)\n\t\t},\n\t\t[touched]\n\t)\n\n\treturn (\n\t\t<Modal visible={visible} onClose={onClose}>\n\t\t\t<Title>Enter new file name</Title>\n\t\t\t<TextInput value={fileName} onChange={handleNameChange} error={touched && error} />\n\t\t\t<ButtonsContainer>\n\t\t\t\t<Button onClick={onClose}>Cancel</Button>\n\t\t\t\t<Button disabled={Boolean(error(fileName))} onClick={() => submit(fileName).then(onClose)}>\n\t\t\t\t\tCreate\n\t\t\t\t</Button>\n\t\t\t</ButtonsContainer>\n\t\t</Modal>\n\t)\n}\n\nexport default CreateFileModal\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0V0z\"\n});\n\nvar SvgDelete = function SvgDelete(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgDelete, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/delete.30e9677a.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport styled from 'styled-components'\nimport { createFile, deleteFile } from '../../actions/user'\nimport { useModal } from '../common/Modal'\nimport CreateFileModal from './CreateFileModal'\nimport { ReactComponent as DeleteIcon } from '../../icons/delete.svg'\n\nconst Item = styled.div`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\ttext-decoration: none;\n\tbackground-color: ${({ hl }) => (hl ? 'var(--c-white-hl)' : 'transparent')};\n\tborder-left: ${({ hl }) => (hl ? '4px' : 0)} solid var(--c-blue-hl);\n\tpadding: 8px;\n\tpadding-left: ${({ hl }) => (hl ? '17px' : '21px')};\n\tfont-weight: 200;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tcolor: var(--c-darkgrey-text);\n\tcursor: pointer;\n\ttransition: color 0.3s;\n\t&:hover {\n\t\tcolor: black;\n\t\tsvg {\n\t\t\tfill: var(--c-red-hl);\n\t\t\tpointer-events: auto;\n\t\t}\n\t}\n\tsvg {\n\t\tfill: transparent;\n\t\tpointer-events: none;\n\t\ttransition: fill 0.3s 0.1s;\n\t}\n`\n\nconst NewFileButton = styled(Item)`\n\tdisplay: block;\n\tmargin-top: 10px;\n\t&::before {\n\t\tcontent: '+';\n\t\tfont-size: 1.3rem;\n\t\tfont-weight: 400;\n\t\topacity: 0.7;\n\t\tvertical-align: middle;\n\t\tmargin-left: -10px;\n\t\tmargin-right: 10px;\n\t}\n`\n\nconst Text = styled.p`\n\tmargin: 50px 0 3px 21px;\n\tfont-weight: 500;\n\tfont-size: 0.9rem;\n\ttext-transform: uppercase;\n\tcolor: var(--c-grey-text);\n`\n\nconst FileList = ({ user, createFile, deleteFile, match, history }) => {\n\tconst [createFileVisible, hideCreateFile, showCreateFile] = useModal()\n\n\tconst currentFile =\n\t\t[...user.ownFiles, ...user.secondFiles].find(file => file.nameHash === match.params.nameHash) || {}\n\treturn (\n\t\t<>\n\t\t\t{!!user.ownFiles.length && (\n\t\t\t\t<>\n\t\t\t\t\t<Text>Own files</Text>\n\t\t\t\t\t{user.ownFiles.map(({ name, nameHash }) => (\n\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\tkey={nameHash}\n\t\t\t\t\t\t\thl={nameHash === currentFile.nameHash}\n\t\t\t\t\t\t\tonClick={() => history.push(`/${nameHash}`)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{name}\n\t\t\t\t\t\t\t<DeleteIcon\n\t\t\t\t\t\t\t\tonClick={async e => {\n\t\t\t\t\t\t\t\t\te.stopPropagation()\n\t\t\t\t\t\t\t\t\tawait deleteFile(nameHash)\n\t\t\t\t\t\t\t\t\thistory.push('/')\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Item>\n\t\t\t\t\t))}\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{!!user.secondFiles.length && (\n\t\t\t\t<>\n\t\t\t\t\t<Text>Other's files</Text>\n\t\t\t\t\t{user.secondFiles.map(({ name, nameHash }) => (\n\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\tkey={nameHash}\n\t\t\t\t\t\t\thl={nameHash === currentFile.nameHash}\n\t\t\t\t\t\t\tonClick={() => history.push(`/${nameHash}`)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{name}\n\t\t\t\t\t\t\t<DeleteIcon\n\t\t\t\t\t\t\t\tonClick={async e => {\n\t\t\t\t\t\t\t\t\te.stopPropagation()\n\t\t\t\t\t\t\t\t\tawait deleteFile(nameHash)\n\t\t\t\t\t\t\t\t\thistory.push('/')\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Item>\n\t\t\t\t\t))}\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t<NewFileButton onClick={showCreateFile}>Add a new file</NewFileButton>\n\t\t\t<CreateFileModal\n\t\t\t\tvisible={createFileVisible}\n\t\t\t\tonClose={hideCreateFile}\n\t\t\t\terror={newFileName => {\n\t\t\t\t\tif (!newFileName.length) {\n\t\t\t\t\t\treturn 'Enter file name'\n\t\t\t\t\t}\n\t\t\t\t\tif (user.ownFiles.some(({ name }) => name === newFileName)) {\n\t\t\t\t\t\treturn 'File with this name already exists'\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tsubmit={createFile}\n\t\t\t/>\n\t\t</>\n\t)\n}\n\nconst mapStateToProps = ({ user }) => ({ user })\n\nconst mapDispatchToProps = { createFile, deleteFile }\n\nexport default withRouter(\n\tconnect(\n\t\tmapStateToProps,\n\t\tmapDispatchToProps\n\t)(FileList)\n)\n","import React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport styled from 'styled-components'\nimport FileList from '../FileList/FileList'\n\nconst StyledSidebar = styled.div`\n\tpadding-top: 40px;\n\twidth: calc((var(--max-width) - var(--container-width)) / 2);\n\tmax-height: calc(100vh - 100px);\n\toverflow-y: auto;\n\tposition: fixed;\n\tmargin-left: 50%;\n\tleft: calc((var(--max-width) / -2));\n\t@media (max-width: 1160px) {\n\t\twidth: 100%;\n\t\tmax-height: calc(100vh - 200px);\n\t\topacity: ${({ mobileSidebarOpen }) => Number(mobileSidebarOpen)};\n\t\ttransform: translateX(${({ mobileSidebarOpen }) => (mobileSidebarOpen ? 0 : -100)}%);\n\t\ttransition: transform 0.5s, opacity 0.3s;\n\t}\n`\n\nconst Sidebar = ({ mobileSidebarOpen }) => (\n\t<StyledSidebar mobileSidebarOpen={mobileSidebarOpen}>\n\t\t<FileList />\n\t</StyledSidebar>\n)\n\nexport default withRouter(Sidebar)\n","/* eslint-disable */\n\nvar Markdown;\n\nif (typeof exports === \"object\" && typeof require === \"function\") // we're in a CommonJS (e.g. Node.js) module\n    Markdown = exports;\nelse\n    Markdown = {};\n    \n// The following text is included for historical reasons, but should\n// be taken with a pinch of salt; it's not all true anymore.\n\n//\n// Wherever possible, Showdown is a straight, line-by-line port\n// of the Perl version of Markdown.\n//\n// This is not a normal parser design; it's basically just a\n// series of string substitutions.  It's hard to read and\n// maintain this way,  but keeping Showdown close to the original\n// design makes it easier to port new features.\n//\n// More importantly, Showdown behaves like markdown.pl in most\n// edge cases.  So web applications can do client-side preview\n// in Javascript, and then build identical HTML on the server.\n//\n// This port needs the new RegExp functionality of ECMA 262,\n// 3rd Edition (i.e. Javascript 1.5).  Most modern web browsers\n// should do fine.  Even with the new regular expression features,\n// We do a lot of work to emulate Perl's regex functionality.\n// The tricky changes in this file mostly have the \"attacklab:\"\n// label.  Major or self-explanatory changes don't.\n//\n// Smart diff tools like Araxis Merge will be able to match up\n// this file with markdown.pl in a useful way.  A little tweaking\n// helps: in a copy of markdown.pl, replace \"#\" with \"//\" and\n// replace \"$text\" with \"text\".  Be sure to ignore whitespace\n// and line endings.\n//\n\n\n//\n// Usage:\n//\n//   var text = \"Markdown *rocks*.\";\n//\n//   var converter = new Markdown.Converter();\n//   var html = converter.makeHtml(text);\n//\n//   alert(html);\n//\n// Note: move the sample code to the bottom of this\n// file before uncommenting it.\n//\n\n(function () {\n\n    function identity(x) { return x; }\n    function returnFalse(x) { return false; }\n\n    function HookCollection() { }\n\n    HookCollection.prototype = {\n\n        chain: function (hookname, func) {\n            var original = this[hookname];\n            if (!original)\n                throw new Error(\"unknown hook \" + hookname);\n\n            if (original === identity)\n                this[hookname] = func;\n            else\n                this[hookname] = function (text) {\n                    var args = Array.prototype.slice.call(arguments, 0);\n                    args[0] = original.apply(null, args);\n                    return func.apply(null, args);\n                };\n        },\n        set: function (hookname, func) {\n            if (!this[hookname])\n                throw new Error(\"unknown hook \" + hookname);\n            this[hookname] = func;\n        },\n        addNoop: function (hookname) {\n            this[hookname] = identity;\n        },\n        addFalse: function (hookname) {\n            this[hookname] = returnFalse;\n        }\n    };\n\n    Markdown.HookCollection = HookCollection;\n\n    // g_urls and g_titles allow arbitrary user-entered strings as keys. This\n    // caused an exception (and hence stopped the rendering) when the user entered\n    // e.g. [push] or [__proto__]. Adding a prefix to the actual key prevents this\n    // (since no builtin property starts with \"s_\"). See\n    // http://meta.stackoverflow.com/questions/64655/strange-wmd-bug\n    // (granted, switching from Array() to Object() alone would have left only __proto__\n    // to be a problem)\n    function SaveHash() { }\n    SaveHash.prototype = {\n        set: function (key, value) {\n            this[\"s_\" + key] = value;\n        },\n        get: function (key) {\n            return this[\"s_\" + key];\n        }\n    };\n\n    Markdown.Converter = function () {\n        var options = {};\n        this.setOptions = function(optionsParam) {\n            options = optionsParam;\n        };\n        \n        var pluginHooks = this.hooks = new HookCollection();\n        \n        // given a URL that was encountered by itself (without markup), should return the link text that's to be given to this link\n        pluginHooks.addNoop(\"plainLinkText\");\n        \n        // called with the orignal text as given to makeHtml. The result of this plugin hook is the actual markdown source that will be cooked\n        pluginHooks.addNoop(\"preConversion\");\n        \n        // called with the text once all normalizations have been completed (tabs to spaces, line endings, etc.), but before any conversions have\n        pluginHooks.addNoop(\"postNormalization\");\n        \n        // Called with the text before / after creating block elements like code blocks and lists. Note that this is called recursively\n        // with inner content, e.g. it's called with the full text, and then only with the content of a blockquote. The inner\n        // call will receive outdented text.\n        pluginHooks.addNoop(\"preBlockGamut\");\n        pluginHooks.addNoop(\"postBlockGamut\");\n        \n        // called with the text of a single block element before / after the span-level conversions (bold, code spans, etc.) have been made\n        pluginHooks.addNoop(\"preSpanGamut\");\n        pluginHooks.addNoop(\"postSpanGamut\");\n        \n        // called with the final cooked HTML code. The result of this plugin hook is the actual output of makeHtml\n        pluginHooks.addNoop(\"postConversion\");\n\n        //\n        // Private state of the converter instance:\n        //\n\n        // Global hashes, used by various utility routines\n        var g_urls;\n        var g_titles;\n        var g_html_blocks;\n\n        // Used to track when we're inside an ordered or unordered list\n        // (see _ProcessListItems() for details):\n        var g_list_level;\n\n        this.makeHtml = function (text) {\n\n            //\n            // Main function. The order in which other subs are called here is\n            // essential. Link and image substitutions need to happen before\n            // _EscapeSpecialCharsWithinTagAttributes(), so that any *'s or _'s in the <a>\n            // and <img> tags get encoded.\n            //\n\n            // This will only happen if makeHtml on the same converter instance is called from a plugin hook.\n            // Don't do that.\n            if (g_urls)\n                throw new Error(\"Recursive call to converter.makeHtml\");\n        \n            // Create the private state objects.\n            g_urls = new SaveHash();\n            g_titles = new SaveHash();\n            g_html_blocks = [];\n            g_list_level = 0;\n\n            text = pluginHooks.preConversion(text);\n\n            // attacklab: Replace ~ with ~T\n            // This lets us use tilde as an escape char to avoid md5 hashes\n            // The choice of character is arbitray; anything that isn't\n            // magic in Markdown will work.\n            text = text.replace(/~/g, \"~T\");\n\n            // attacklab: Replace $ with ~D\n            // RegExp interprets $ as a special character\n            // when it's in a replacement string\n            text = text.replace(/\\$/g, \"~D\");\n\n            // Standardize line endings\n            text = text.replace(/\\r\\n/g, \"\\n\"); // DOS to Unix\n            text = text.replace(/\\r/g, \"\\n\"); // Mac to Unix\n\n            // Make sure text begins and ends with a couple of newlines:\n            text = \"\\n\\n\" + text + \"\\n\\n\";\n\n            // Convert all tabs to spaces.\n            text = _Detab(text);\n\n            // Strip any lines consisting only of spaces and tabs.\n            // This makes subsequent regexen easier to write, because we can\n            // match consecutive blank lines with /\\n+/ instead of something\n            // contorted like /[ \\t]*\\n+/ .\n            text = text.replace(/^[ \\t]+$/mg, \"\");\n            \n            text = pluginHooks.postNormalization(text);\n\n            // Turn block-level HTML blocks into hash entries\n            text = _HashHTMLBlocks(text);\n\n            // Strip link definitions, store in hashes.\n            text = _StripLinkDefinitions(text);\n\n            text = _RunBlockGamut(text);\n\n            text = _UnescapeSpecialChars(text);\n\n            // attacklab: Restore dollar signs\n            text = text.replace(/~D/g, \"$$\");\n\n            // attacklab: Restore tildes\n            text = text.replace(/~T/g, \"~\");\n\n            text = pluginHooks.postConversion(text);\n\n            g_html_blocks = g_titles = g_urls = null;\n\n            return text;\n        };\n\n        function _StripLinkDefinitions(text) {\n            //\n            // Strips link definitions from text, stores the URLs and titles in\n            // hash references.\n            //\n\n            // Link defs are in the form: ^[id]: url \"optional title\"\n\n            /*\n            text = text.replace(/\n                ^[ ]{0,3}\\[(.+)\\]:  // id = $1  attacklab: g_tab_width - 1\n                [ \\t]*\n                \\n?                 // maybe *one* newline\n                [ \\t]*\n                <?(\\S+?)>?          // url = $2\n                (?=\\s|$)            // lookahead for whitespace instead of the lookbehind removed below\n                [ \\t]*\n                \\n?                 // maybe one newline\n                [ \\t]*\n                (                   // (potential) title = $3\n                    (\\n*)           // any lines skipped = $4 attacklab: lookbehind removed\n                    [ \\t]+\n                    [\"(]\n                    (.+?)           // title = $5\n                    [\")]\n                    [ \\t]*\n                )?                  // title is optional\n                (?:\\n+|$)\n            /gm, function(){...});\n            */\n\n            text = text.replace(/^[ ]{0,3}\\[(.+)\\]:[ \\t]*\\n?[ \\t]*<?(\\S+?)>?(?=\\s|$)[ \\t]*\\n?[ \\t]*((\\n*)[\"(](.+?)[\")][ \\t]*)?(?:\\n+)/gm,\n                function (wholeMatch, m1, m2, m3, m4, m5) {\n                    m1 = m1.toLowerCase();\n                    g_urls.set(m1, _EncodeAmpsAndAngles(m2));  // Link IDs are case-insensitive\n                    if (m4) {\n                        // Oops, found blank lines, so it's not a title.\n                        // Put back the parenthetical statement we stole.\n                        return m3;\n                    } else if (m5) {\n                        g_titles.set(m1, m5.replace(/\"/g, \"&quot;\"));\n                    }\n\n                    // Completely remove the definition from the text\n                    return \"\";\n                }\n            );\n\n            return text;\n        }\n\n        function _HashHTMLBlocks(text) {\n\n            // Hashify HTML blocks:\n            // We only want to do this for block-level HTML tags, such as headers,\n            // lists, and tables. That's because we still want to wrap <p>s around\n            // \"paragraphs\" that are wrapped in non-block-level tags, such as anchors,\n            // phrase emphasis, and spans. The list of tags we're looking for is\n            // hard-coded:\n            var block_tags_a = \"p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del\"\n            var block_tags_b = \"p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math\"\n\n            // First, look for nested blocks, e.g.:\n            //   <div>\n            //     <div>\n            //     tags for inner block must be indented.\n            //     </div>\n            //   </div>\n            //\n            // The outermost tags must start at the left margin for this to match, and\n            // the inner nested divs must be indented.\n            // We need to do this before the next, more liberal match, because the next\n            // match will start at the first `<div>` and stop at the first `</div>`.\n\n            // attacklab: This regex can be expensive when it fails.\n\n            /*\n            text = text.replace(/\n                (                       // save in $1\n                    ^                   // start of line  (with /m)\n                    <($block_tags_a)    // start tag = $2\n                    \\b                  // word break\n                                        // attacklab: hack around khtml/pcre bug...\n                    [^\\r]*?\\n           // any number of lines, minimally matching\n                    </\\2>               // the matching end tag\n                    [ \\t]*              // trailing spaces/tabs\n                    (?=\\n+)             // followed by a newline\n                )                       // attacklab: there are sentinel newlines at end of document\n            /gm,function(){...}};\n            */\n            text = text.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\\b[^\\r]*?\\n<\\/\\2>[ \\t]*(?=\\n+))/gm, hashElement);\n\n            //\n            // Now match more liberally, simply from `\\n<tag>` to `</tag>\\n`\n            //\n\n            /*\n            text = text.replace(/\n                (                       // save in $1\n                    ^                   // start of line  (with /m)\n                    <($block_tags_b)    // start tag = $2\n                    \\b                  // word break\n                                        // attacklab: hack around khtml/pcre bug...\n                    [^\\r]*?             // any number of lines, minimally matching\n                    .*</\\2>             // the matching end tag\n                    [ \\t]*              // trailing spaces/tabs\n                    (?=\\n+)             // followed by a newline\n                )                       // attacklab: there are sentinel newlines at end of document\n            /gm,function(){...}};\n            */\n            text = text.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\\b[^\\r]*?.*<\\/\\2>[ \\t]*(?=\\n+)\\n)/gm, hashElement);\n\n            // Special case just for <hr />. It was easier to make a special case than\n            // to make the other regex more complicated.  \n\n            /*\n            text = text.replace(/\n                \\n                  // Starting after a blank line\n                [ ]{0,3}\n                (                   // save in $1\n                    (<(hr)          // start tag = $2\n                        \\b          // word break\n                        ([^<>])*?\n                    \\/?>)           // the matching end tag\n                    [ \\t]*\n                    (?=\\n{2,})      // followed by a blank line\n                )\n            /g,hashElement);\n            */\n            text = text.replace(/\\n[ ]{0,3}((<(hr)\\b([^<>])*?\\/?>)[ \\t]*(?=\\n{2,}))/g, hashElement);\n\n            // Special case for standalone HTML comments:\n\n            /*\n            text = text.replace(/\n                \\n\\n                                            // Starting after a blank line\n                [ ]{0,3}                                        // attacklab: g_tab_width - 1\n                (                                               // save in $1\n                    <!\n                    (--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)   // see http://www.w3.org/TR/html-markup/syntax.html#comments and http://meta.stackoverflow.com/q/95256\n                    >\n                    [ \\t]*\n                    (?=\\n{2,})                                  // followed by a blank line\n                )\n            /g,hashElement);\n            */\n            text = text.replace(/\\n\\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \\t]*(?=\\n{2,}))/g, hashElement);\n\n            // PHP and ASP-style processor instructions (<?...?> and <%...%>)\n\n            /*\n            text = text.replace(/\n                (?:\n                    \\n\\n            // Starting after a blank line\n                )\n                (                   // save in $1\n                    [ ]{0,3}        // attacklab: g_tab_width - 1\n                    (?:\n                        <([?%])     // $2\n                        [^\\r]*?\n                        \\2>\n                    )\n                    [ \\t]*\n                    (?=\\n{2,})      // followed by a blank line\n                )\n            /g,hashElement);\n            */\n            text = text.replace(/(?:\\n\\n)([ ]{0,3}(?:<([?%])[^\\r]*?\\2>)[ \\t]*(?=\\n{2,}))/g, hashElement);\n\n            return text;\n        }\n\n        function hashElement(wholeMatch, m1) {\n            var blockText = m1;\n\n            // Undo double lines\n            blockText = blockText.replace(/^\\n+/, \"\");\n\n            // strip trailing blank lines\n            blockText = blockText.replace(/\\n+$/g, \"\");\n\n            // Replace the element text with a marker (\"~KxK\" where x is its key)\n            blockText = \"\\n\\n~K\" + (g_html_blocks.push(blockText) - 1) + \"K\\n\\n\";\n\n            return blockText;\n        }\n        \n        var blockGamutHookCallback = function (t) { return _RunBlockGamut(t); }\n\n        function _RunBlockGamut(text, doNotUnhash) {\n            //\n            // These are all the transformations that form block-level\n            // tags like paragraphs, headers, and list items.\n            //\n            \n            text = pluginHooks.preBlockGamut(text, blockGamutHookCallback);\n            \n            text = _DoHeaders(text);\n\n            // Do Horizontal Rules:\n            var replacement = \"<hr />\\n\";\n            text = text.replace(/^[ ]{0,2}([ ]?\\*[ ]?){3,}[ \\t]*$/gm, replacement);\n            text = text.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \\t]*$/gm, replacement);\n            text = text.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \\t]*$/gm, replacement);\n\n            text = _DoLists(text);\n            text = _DoCodeBlocks(text);\n            text = _DoBlockQuotes(text);\n            \n            text = pluginHooks.postBlockGamut(text, blockGamutHookCallback);\n\n            // We already ran _HashHTMLBlocks() before, in Markdown(), but that\n            // was to escape raw HTML in the original Markdown source. This time,\n            // we're escaping the markup we've just created, so that we don't wrap\n            // <p> tags around block-level tags.\n            text = _HashHTMLBlocks(text);\n            text = _FormParagraphs(text, doNotUnhash);\n\n            return text;\n        }\n\n        function _RunSpanGamut(text) {\n            //\n            // These are all the transformations that occur *within* block-level\n            // tags like paragraphs, headers, and list items.\n            //\n\n            text = pluginHooks.preSpanGamut(text);\n            \n            text = _DoCodeSpans(text);\n            text = _EscapeSpecialCharsWithinTagAttributes(text);\n            text = _EncodeBackslashEscapes(text);\n\n            // Process anchor and image tags. Images must come first,\n            // because ![foo][f] looks like an anchor.\n            text = _DoImages(text);\n            text = _DoAnchors(text);\n\n            // Make links out of things like `<http://example.com/>`\n            // Must come after _DoAnchors(), because you can use < and >\n            // delimiters in inline links like [this](<url>).\n            text = _DoAutoLinks(text);\n            \n            text = text.replace(/~P/g, \"://\"); // put in place to prevent autolinking; reset now\n            \n            text = _EncodeAmpsAndAngles(text);\n            text = options._DoItalicsAndBold ? options._DoItalicsAndBold(text) : _DoItalicsAndBold(text);\n\n            // Do hard breaks:\n            text = text.replace(/  +\\n/g, \" <br>\\n\");\n            \n            text = pluginHooks.postSpanGamut(text);\n\n            return text;\n        }\n\n        function _EscapeSpecialCharsWithinTagAttributes(text) {\n            //\n            // Within tags -- meaning between < and > -- encode [\\ ` * _] so they\n            // don't conflict with their use in Markdown for code, italics and strong.\n            //\n\n            // Build a regex to find HTML tags and comments.  See Friedl's \n            // \"Mastering Regular Expressions\", 2nd Ed., pp. 200-201.\n\n            // SE: changed the comment part of the regex\n\n            var regex = /(<[a-z\\/!$](\"[^\"]*\"|'[^']*'|[^'\">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi;\n\n            text = text.replace(regex, function (wholeMatch) {\n                var tag = wholeMatch.replace(/(.)<\\/?code>(?=.)/g, \"$1`\");\n                tag = escapeCharacters(tag, wholeMatch.charAt(1) == \"!\" ? \"\\\\`*_/\" : \"\\\\`*_\"); // also escape slashes in comments to prevent autolinking there -- http://meta.stackoverflow.com/questions/95987\n                return tag;\n            });\n\n            return text;\n        }\n\n        function _DoAnchors(text) {\n            //\n            // Turn Markdown link shortcuts into XHTML <a> tags.\n            //\n            //\n            // First, handle reference-style links: [link text] [id]\n            //\n\n            /*\n            text = text.replace(/\n                (                           // wrap whole match in $1\n                    \\[\n                    (\n                        (?:\n                            \\[[^\\]]*\\]      // allow brackets nested one level\n                            |\n                            [^\\[]           // or anything else\n                        )*\n                    )\n                    \\]\n\n                    [ ]?                    // one optional space\n                    (?:\\n[ ]*)?             // one optional newline followed by spaces\n\n                    \\[\n                    (.*?)                   // id = $3\n                    \\]\n                )\n                ()()()()                    // pad remaining backreferences\n            /g, writeAnchorTag);\n            */\n            text = text.replace(/(\\[((?:\\[[^\\]]*\\]|[^\\[\\]])*)\\][ ]?(?:\\n[ ]*)?\\[(.*?)\\])()()()()/g, writeAnchorTag);\n\n            //\n            // Next, inline-style links: [link text](url \"optional title\")\n            //\n\n            /*\n            text = text.replace(/\n                (                           // wrap whole match in $1\n                    \\[\n                    (\n                        (?:\n                            \\[[^\\]]*\\]      // allow brackets nested one level\n                            |\n                            [^\\[\\]]         // or anything else\n                        )*\n                    )\n                    \\]\n                    \\(                      // literal paren\n                    [ \\t]*\n                    ()                      // no id, so leave $3 empty\n                    <?(                     // href = $4\n                        (?:\n                            \\([^)]*\\)       // allow one level of (correctly nested) parens (think MSDN)\n                            |\n                            [^()\\s]\n                        )*?\n                    )>?                \n                    [ \\t]*\n                    (                       // $5\n                        (['\"])              // quote char = $6\n                        (.*?)               // Title = $7\n                        \\6                  // matching quote\n                        [ \\t]*              // ignore any spaces/tabs between closing quote and )\n                    )?                      // title is optional\n                    \\)\n                )\n            /g, writeAnchorTag);\n            */\n\n            text = text.replace(/(\\[((?:\\[[^\\]]*\\]|[^\\[\\]])*)\\]\\([ \\t]*()<?((?:\\([^)]*\\)|[^()\\s])*?)>?[ \\t]*((['\"])(.*?)\\6[ \\t]*)?\\))/g, writeAnchorTag);\n\n            //\n            // Last, handle reference-style shortcuts: [link text]\n            // These must come last in case you've also got [link test][1]\n            // or [link test](/foo)\n            //\n\n            /*\n            text = text.replace(/\n                (                   // wrap whole match in $1\n                    \\[\n                    ([^\\[\\]]+)      // link text = $2; can't contain '[' or ']'\n                    \\]\n                )\n                ()()()()()          // pad rest of backreferences\n            /g, writeAnchorTag);\n            */\n            text = text.replace(/(\\[([^\\[\\]]+)\\])()()()()()/g, writeAnchorTag);\n\n            return text;\n        }\n\n        function writeAnchorTag(wholeMatch, m1, m2, m3, m4, m5, m6, m7) {\n            if (m7 == undefined) m7 = \"\";\n            var whole_match = m1;\n            var link_text = m2.replace(/:\\/\\//g, \"~P\"); // to prevent auto-linking withing the link. will be converted back after the auto-linker runs\n            var link_id = m3.toLowerCase();\n            var url = m4;\n            var title = m7;\n\n            if (url == \"\") {\n                if (link_id == \"\") {\n                    // lower-case and turn embedded newlines into spaces\n                    link_id = link_text.toLowerCase().replace(/ ?\\n/g, \" \");\n                }\n                url = \"#\" + link_id;\n\n                if (g_urls.get(link_id) != undefined) {\n                    url = g_urls.get(link_id);\n                    if (g_titles.get(link_id) != undefined) {\n                        title = g_titles.get(link_id);\n                    }\n                }\n                else {\n                    if (whole_match.search(/\\(\\s*\\)$/m) > -1) {\n                        // Special case for explicit empty url\n                        url = \"\";\n                    } else {\n                        return whole_match;\n                    }\n                }\n            }\n            url = encodeProblemUrlChars(url);\n            url = escapeCharacters(url, \"*_\");\n            var result = \"<a href=\\\"\" + url + \"\\\"\";\n\n            if (title != \"\") {\n                title = attributeEncode(title);\n                title = escapeCharacters(title, \"*_\");\n                result += \" title=\\\"\" + title + \"\\\"\";\n            }\n\n            result += \">\" + link_text + \"</a>\";\n\n            return result;\n        }\n\n        function _DoImages(text) {\n            //\n            // Turn Markdown image shortcuts into <img> tags.\n            //\n\n            //\n            // First, handle reference-style labeled images: ![alt text][id]\n            //\n\n            /*\n            text = text.replace(/\n                (                   // wrap whole match in $1\n                    !\\[\n                    (.*?)           // alt text = $2\n                    \\]\n\n                    [ ]?            // one optional space\n                    (?:\\n[ ]*)?     // one optional newline followed by spaces\n\n                    \\[\n                    (.*?)           // id = $3\n                    \\]\n                )\n                ()()()()            // pad rest of backreferences\n            /g, writeImageTag);\n            */\n            text = text.replace(/(!\\[(.*?)\\][ ]?(?:\\n[ ]*)?\\[(.*?)\\])()()()()/g, writeImageTag);\n\n            //\n            // Next, handle inline images:  ![alt text](url \"optional title\")\n            // Don't forget: encode * and _\n\n            /*\n            text = text.replace(/\n                (                   // wrap whole match in $1\n                    !\\[\n                    (.*?)           // alt text = $2\n                    \\]\n                    \\s?             // One optional whitespace character\n                    \\(              // literal paren\n                    [ \\t]*\n                    ()              // no id, so leave $3 empty\n                    <?(\\S+?)>?      // src url = $4\n                    [ \\t]*\n                    (               // $5\n                        (['\"])      // quote char = $6\n                        (.*?)       // title = $7\n                        \\6          // matching quote\n                        [ \\t]*\n                    )?              // title is optional\n                    \\)\n                )\n            /g, writeImageTag);\n            */\n            text = text.replace(/(!\\[(.*?)\\]\\s?\\([ \\t]*()<?(\\S+?)>?[ \\t]*((['\"])(.*?)\\6[ \\t]*)?\\))/g, writeImageTag);\n\n            return text;\n        }\n        \n        function attributeEncode(text) {\n            // unconditionally replace angle brackets here -- what ends up in an attribute (e.g. alt or title)\n            // never makes sense to have verbatim HTML in it (and the sanitizer would totally break it)\n            return text.replace(/>/g, \"&gt;\").replace(/</g, \"&lt;\").replace(/\"/g, \"&quot;\");\n        }\n\n        function writeImageTag(wholeMatch, m1, m2, m3, m4, m5, m6, m7) {\n            var whole_match = m1;\n            var alt_text = m2;\n            var link_id = m3.toLowerCase();\n            var url = m4;\n            var title = m7;\n\n            if (!title) title = \"\";\n\n            if (url == \"\") {\n                if (link_id == \"\") {\n                    // lower-case and turn embedded newlines into spaces\n                    link_id = alt_text.toLowerCase().replace(/ ?\\n/g, \" \");\n                }\n                url = \"#\" + link_id;\n\n                if (g_urls.get(link_id) != undefined) {\n                    url = g_urls.get(link_id);\n                    if (g_titles.get(link_id) != undefined) {\n                        title = g_titles.get(link_id);\n                    }\n                }\n                else {\n                    return whole_match;\n                }\n            }\n            \n            alt_text = escapeCharacters(attributeEncode(alt_text), \"*_[]()\");\n            url = escapeCharacters(url, \"*_\");\n            var result = \"<img src=\\\"\" + url + \"\\\" alt=\\\"\" + alt_text + \"\\\"\";\n\n            // attacklab: Markdown.pl adds empty title attributes to images.\n            // Replicate this bug.\n\n            //if (title != \"\") {\n            title = attributeEncode(title);\n            title = escapeCharacters(title, \"*_\");\n            result += \" title=\\\"\" + title + \"\\\"\";\n            //}\n\n            result += \" />\";\n\n            return result;\n        }\n\n        function _DoHeaders(text) {\n\n            // Setext-style headers:\n            //  Header 1\n            //  ========\n            //  \n            //  Header 2\n            //  --------\n            //\n            text = text.replace(/^(.+)[ \\t]*\\n=+[ \\t]*\\n+/gm,\n                function (wholeMatch, m1) { return \"<h1>\" + _RunSpanGamut(m1) + \"</h1>\\n\\n\"; }\n            );\n\n            text = text.replace(/^(.+)[ \\t]*\\n-+[ \\t]*\\n+/gm,\n                function (matchFound, m1) { return \"<h2>\" + _RunSpanGamut(m1) + \"</h2>\\n\\n\"; }\n            );\n\n            // atx-style headers:\n            //  # Header 1\n            //  ## Header 2\n            //  ## Header 2 with closing hashes ##\n            //  ...\n            //  ###### Header 6\n            //\n\n            /*\n            text = text.replace(/\n                ^(\\#{1,6})      // $1 = string of #'s\n                [ \\t]*\n                (.+?)           // $2 = Header text\n                [ \\t]*\n                \\#*             // optional closing #'s (not counted)\n                \\n+\n            /gm, function() {...});\n            */\n\n            text = text.replace(/^(\\#{1,6})[ \\t]*(.+?)[ \\t]*\\#*\\n+/gm,\n                function (wholeMatch, m1, m2) {\n                    var h_level = m1.length;\n                    return \"<h\" + h_level + \">\" + _RunSpanGamut(m2) + \"</h\" + h_level + \">\\n\\n\";\n                }\n            );\n\n            return text;\n        }\n\n        function _DoLists(text, isInsideParagraphlessListItem) {\n            //\n            // Form HTML ordered (numbered) and unordered (bulleted) lists.\n            //\n\n            // attacklab: add sentinel to hack around khtml/safari bug:\n            // http://bugs.webkit.org/show_bug.cgi?id=11231\n            text += \"~0\";\n\n            // Re-usable pattern to match any entirel ul or ol list:\n\n            /*\n            var whole_list = /\n                (                                   // $1 = whole list\n                    (                               // $2\n                        [ ]{0,3}                    // attacklab: g_tab_width - 1\n                        ([*+-]|\\d+[.])              // $3 = first list item marker\n                        [ \\t]+\n                    )\n                    [^\\r]+?\n                    (                               // $4\n                        ~0                          // sentinel for workaround; should be $\n                        |\n                        \\n{2,}\n                        (?=\\S)\n                        (?!                         // Negative lookahead for another list item marker\n                            [ \\t]*\n                            (?:[*+-]|\\d+[.])[ \\t]+\n                        )\n                    )\n                )\n            /g\n            */\n            var whole_list = /^(([ ]{0,3}([*+-]|\\d+[.])[ \\t]+)[^\\r]+?(~0|\\n{2,}(?=\\S)(?![ \\t]*(?:[*+-]|\\d+[.])[ \\t]+)))/gm;\n\n            if (g_list_level) {\n                text = text.replace(whole_list, function (wholeMatch, m1, m2) {\n                    var list = m1;\n                    var list_type = (m2.search(/[*+-]/g) > -1) ? \"ul\" : \"ol\";\n\n                    var result = _ProcessListItems(list, list_type, isInsideParagraphlessListItem);\n\n                    // Trim any trailing whitespace, to put the closing `</$list_type>`\n                    // up on the preceding line, to get it past the current stupid\n                    // HTML block parser. This is a hack to work around the terrible\n                    // hack that is the HTML block parser.\n                    result = result.replace(/\\s+$/, \"\");\n                    result = \"<\" + list_type + \">\" + result + \"</\" + list_type + \">\\n\";\n                    return result;\n                });\n            } else {\n                whole_list = /(\\n\\n|^\\n?)(([ ]{0,3}([*+-]|\\d+[.])[ \\t]+)[^\\r]+?(~0|\\n{2,}(?=\\S)(?![ \\t]*(?:[*+-]|\\d+[.])[ \\t]+)))/g;\n                text = text.replace(whole_list, function (wholeMatch, m1, m2, m3) {\n                    var runup = m1;\n                    var list = m2;\n\n                    var list_type = (m3.search(/[*+-]/g) > -1) ? \"ul\" : \"ol\";\n                    var result = _ProcessListItems(list, list_type);\n                    result = runup + \"<\" + list_type + \">\\n\" + result + \"</\" + list_type + \">\\n\";\n                    return result;\n                });\n            }\n\n            // attacklab: strip sentinel\n            text = text.replace(/~0/, \"\");\n\n            return text;\n        }\n\n        var _listItemMarkers = { ol: \"\\\\d+[.]\", ul: \"[*+-]\" };\n\n        function _ProcessListItems(list_str, list_type, isInsideParagraphlessListItem) {\n            //\n            //  Process the contents of a single ordered or unordered list, splitting it\n            //  into individual list items.\n            //\n            //  list_type is either \"ul\" or \"ol\".\n\n            // The $g_list_level global keeps track of when we're inside a list.\n            // Each time we enter a list, we increment it; when we leave a list,\n            // we decrement. If it's zero, we're not in a list anymore.\n            //\n            // We do this because when we're not inside a list, we want to treat\n            // something like this:\n            //\n            //    I recommend upgrading to version\n            //    8. Oops, now this line is treated\n            //    as a sub-list.\n            //\n            // As a single paragraph, despite the fact that the second line starts\n            // with a digit-period-space sequence.\n            //\n            // Whereas when we're inside a list (or sub-list), that line will be\n            // treated as the start of a sub-list. What a kludge, huh? This is\n            // an aspect of Markdown's syntax that's hard to parse perfectly\n            // without resorting to mind-reading. Perhaps the solution is to\n            // change the syntax rules such that sub-lists must start with a\n            // starting cardinal number; e.g. \"1.\" or \"a.\".\n\n            g_list_level++;\n\n            // trim trailing blank lines:\n            list_str = list_str.replace(/\\n{2,}$/, \"\\n\");\n\n            // attacklab: add sentinel to emulate \\z\n            list_str += \"~0\";\n\n            // In the original attacklab showdown, list_type was not given to this function, and anything\n            // that matched /[*+-]|\\d+[.]/ would just create the next <li>, causing this mismatch:\n            //\n            //  Markdown          rendered by WMD        rendered by MarkdownSharp\n            //  ------------------------------------------------------------------\n            //  1. first          1. first               1. first\n            //  2. second         2. second              2. second\n            //  - third           3. third                   * third\n            //\n            // We changed this to behave identical to MarkdownSharp. This is the constructed RegEx,\n            // with {MARKER} being one of \\d+[.] or [*+-], depending on list_type:\n        \n            /*\n            list_str = list_str.replace(/\n                (^[ \\t]*)                       // leading whitespace = $1\n                ({MARKER}) [ \\t]+               // list marker = $2\n                ([^\\r]+?                        // list item text   = $3\n                    (\\n+)\n                )\n                (?=\n                    (~0 | \\2 ({MARKER}) [ \\t]+)\n                )\n            /gm, function(){...});\n            */\n\n            var marker = _listItemMarkers[list_type];\n            var re = new RegExp(\"(^[ \\\\t]*)(\" + marker + \")[ \\\\t]+([^\\\\r]+?(\\\\n+))(?=(~0|\\\\1(\" + marker + \")[ \\\\t]+))\", \"gm\");\n            var last_item_had_a_double_newline = false;\n            list_str = list_str.replace(re,\n                function (wholeMatch, m1, m2, m3) {\n                    var item = m3;\n                    var leading_space = m1;\n                    var ends_with_double_newline = /\\n\\n$/.test(item);\n                    var contains_double_newline = ends_with_double_newline || item.search(/\\n{2,}/) > -1;\n\n                    if (contains_double_newline || last_item_had_a_double_newline) {\n                        item = _RunBlockGamut(_Outdent(item), /* doNotUnhash = */true);\n                    }\n                    else {\n                        // Recursion for sub-lists:\n                        item = _DoLists(_Outdent(item), /* isInsideParagraphlessListItem= */ true);\n                        item = item.replace(/\\n$/, \"\"); // chomp(item)\n                        if (!isInsideParagraphlessListItem) // only the outer-most item should run this, otherwise it's run multiple times for the inner ones\n                            item = _RunSpanGamut(item);\n                    }\n                    last_item_had_a_double_newline = ends_with_double_newline;\n                    return \"<li>\" + item + \"</li>\\n\";\n                }\n            );\n\n            // attacklab: strip sentinel\n            list_str = list_str.replace(/~0/g, \"\");\n\n            g_list_level--;\n            return list_str;\n        }\n\n        function _DoCodeBlocks(text) {\n            //\n            //  Process Markdown `<pre><code>` blocks.\n            //  \n\n            /*\n            text = text.replace(/\n                (?:\\n\\n|^)\n                (                               // $1 = the code block -- one or more lines, starting with a space/tab\n                    (?:\n                        (?:[ ]{4}|\\t)           // Lines must start with a tab or a tab-width of spaces - attacklab: g_tab_width\n                        .*\\n+\n                    )+\n                )\n                (\\n*[ ]{0,3}[^ \\t\\n]|(?=~0))    // attacklab: g_tab_width\n            /g ,function(){...});\n            */\n\n            // attacklab: sentinel workarounds for lack of \\A and \\Z, safari\\khtml bug\n            text += \"~0\";\n\n            text = text.replace(/(?:\\n\\n|^\\n?)((?:(?:[ ]{4}|\\t).*\\n+)+)(\\n*[ ]{0,3}[^ \\t\\n]|(?=~0))/g,\n                function (wholeMatch, m1, m2) {\n                    var codeblock = m1;\n                    var nextChar = m2;\n\n                    codeblock = _EncodeCode(_Outdent(codeblock));\n                    codeblock = _Detab(codeblock);\n                    codeblock = codeblock.replace(/^\\n+/g, \"\"); // trim leading newlines\n                    codeblock = codeblock.replace(/\\n+$/g, \"\"); // trim trailing whitespace\n\n                    codeblock = \"<pre><code>\" + codeblock + \"\\n</code></pre>\";\n\n                    return \"\\n\\n\" + codeblock + \"\\n\\n\" + nextChar;\n                }\n            );\n\n            // attacklab: strip sentinel\n            text = text.replace(/~0/, \"\");\n\n            return text;\n        }\n\n        function hashBlock(text) {\n            text = text.replace(/(^\\n+|\\n+$)/g, \"\");\n            return \"\\n\\n~K\" + (g_html_blocks.push(text) - 1) + \"K\\n\\n\";\n        }\n\n        function _DoCodeSpans(text) {\n            //\n            // * Backtick quotes are used for <code></code> spans.\n            // \n            // * You can use multiple backticks as the delimiters if you want to\n            //   include literal backticks in the code span. So, this input:\n            //     \n            //      Just type ``foo `bar` baz`` at the prompt.\n            //     \n            //   Will translate to:\n            //     \n            //      <p>Just type <code>foo `bar` baz</code> at the prompt.</p>\n            //     \n            //   There's no arbitrary limit to the number of backticks you\n            //   can use as delimters. If you need three consecutive backticks\n            //   in your code, use four for delimiters, etc.\n            //\n            // * You can use spaces to get literal backticks at the edges:\n            //     \n            //      ... type `` `bar` `` ...\n            //     \n            //   Turns to:\n            //     \n            //      ... type <code>`bar`</code> ...\n            //\n\n            /*\n            text = text.replace(/\n                (^|[^\\\\])       // Character before opening ` can't be a backslash\n                (`+)            // $2 = Opening run of `\n                (               // $3 = The code block\n                    [^\\r]*?\n                    [^`]        // attacklab: work around lack of lookbehind\n                )\n                \\2              // Matching closer\n                (?!`)\n            /gm, function(){...});\n            */\n\n            text = text.replace(/(^|[^\\\\])(`+)([^\\r]*?[^`])\\2(?!`)/gm,\n                function (wholeMatch, m1, m2, m3, m4) {\n                    var c = m3;\n                    c = c.replace(/^([ \\t]*)/g, \"\"); // leading whitespace\n                    c = c.replace(/[ \\t]*$/g, \"\"); // trailing whitespace\n                    c = _EncodeCode(c);\n                    c = c.replace(/:\\/\\//g, \"~P\"); // to prevent auto-linking. Not necessary in code *blocks*, but in code spans. Will be converted back after the auto-linker runs.\n                    return m1 + \"<code>\" + c + \"</code>\";\n                }\n            );\n\n            return text;\n        }\n\n        function _EncodeCode(text) {\n            //\n            // Encode/escape certain characters inside Markdown code runs.\n            // The point is that in code, these characters are literals,\n            // and lose their special Markdown meanings.\n            //\n            // Encode all ampersands; HTML entities are not\n            // entities within a Markdown code span.\n            text = text.replace(/&/g, \"&amp;\");\n\n            // Do the angle bracket song and dance:\n            text = text.replace(/</g, \"&lt;\");\n            text = text.replace(/>/g, \"&gt;\");\n\n            // Now, escape characters that are magic in Markdown:\n            text = escapeCharacters(text, \"\\*_{}[]\\\\\", false);\n\n            // jj the line above breaks this:\n            //---\n\n            //* Item\n\n            //   1. Subitem\n\n            //            special char: *\n            //---\n\n            return text;\n        }\n\n        function _DoItalicsAndBold(text) {\n\n            // <strong> must go first:\n            text = text.replace(/([\\W_]|^)(\\*\\*|__)(?=\\S)([^\\r]*?\\S[\\*_]*)\\2([\\W_]|$)/g,\n            \"$1<strong>$3</strong>$4\");\n\n            text = text.replace(/([\\W_]|^)(\\*|_)(?=\\S)([^\\r\\*_]*?\\S)\\2([\\W_]|$)/g,\n            \"$1<em>$3</em>$4\");\n\n            return text;\n        }\n\n        function _DoBlockQuotes(text) {\n\n            /*\n            text = text.replace(/\n                (                           // Wrap whole match in $1\n                    (\n                        ^[ \\t]*>[ \\t]?      // '>' at the start of a line\n                        .+\\n                // rest of the first line\n                        (.+\\n)*             // subsequent consecutive lines\n                        \\n*                 // blanks\n                    )+\n                )\n            /gm, function(){...});\n            */\n\n            text = text.replace(/((^[ \\t]*>[ \\t]?.+\\n(.+\\n)*\\n*)+)/gm,\n                function (wholeMatch, m1) {\n                    var bq = m1;\n\n                    // attacklab: hack around Konqueror 3.5.4 bug:\n                    // \"----------bug\".replace(/^-/g,\"\") == \"bug\"\n\n                    bq = bq.replace(/^[ \\t]*>[ \\t]?/gm, \"~0\"); // trim one level of quoting\n\n                    // attacklab: clean up hack\n                    bq = bq.replace(/~0/g, \"\");\n\n                    bq = bq.replace(/^[ \\t]+$/gm, \"\");     // trim whitespace-only lines\n                    bq = _RunBlockGamut(bq);             // recurse\n\n                    bq = bq.replace(/(^|\\n)/g, \"$1  \");\n                    // These leading spaces screw with <pre> content, so we need to fix that:\n                    bq = bq.replace(\n                            /(\\s*<pre>[^\\r]+?<\\/pre>)/gm,\n                        function (wholeMatch, m1) {\n                            var pre = m1;\n                            // attacklab: hack around Konqueror 3.5.4 bug:\n                            pre = pre.replace(/^  /mg, \"~0\");\n                            pre = pre.replace(/~0/g, \"\");\n                            return pre;\n                        });\n\n                    return hashBlock(\"<blockquote>\\n\" + bq + \"\\n</blockquote>\");\n                }\n            );\n            return text;\n        }\n\n        function _FormParagraphs(text, doNotUnhash) {\n            //\n            //  Params:\n            //    $text - string to process with html <p> tags\n            //\n\n            // Strip leading and trailing lines:\n            text = text.replace(/^\\n+/g, \"\");\n            text = text.replace(/\\n+$/g, \"\");\n\n            var grafs = text.split(/\\n{2,}/g);\n            var grafsOut = [];\n            \n            var markerRe = /~K(\\d+)K/;\n\n            //\n            // Wrap <p> tags.\n            //\n            var end = grafs.length;\n            for (var i = 0; i < end; i++) {\n                var str = grafs[i];\n\n                // if this is an HTML marker, copy it\n                if (markerRe.test(str)) {\n                    grafsOut.push(str);\n                }\n                else if (/\\S/.test(str)) {\n                    str = _RunSpanGamut(str);\n                    str = str.replace(/^([ \\t]*)/g, \"<p>\");\n                    str += \"</p>\"\n                    grafsOut.push(str);\n                }\n\n            }\n            //\n            // Unhashify HTML blocks\n            //\n            if (!doNotUnhash) {\n                end = grafsOut.length;\n                for (var i = 0; i < end; i++) {\n                    var foundAny = true;\n                    while (foundAny) { // we may need several runs, since the data may be nested\n                        foundAny = false;\n                        grafsOut[i] = grafsOut[i].replace(/~K(\\d+)K/g, function (wholeMatch, id) {\n                            foundAny = true;\n                            return g_html_blocks[id];\n                        });\n                    }\n                }\n            }\n            return grafsOut.join(\"\\n\\n\");\n        }\n\n        function _EncodeAmpsAndAngles(text) {\n            // Smart processing for ampersands and angle brackets that need to be encoded.\n\n            // Ampersand-encoding based entirely on Nat Irons's Amputator MT plugin:\n            //   http://bumppo.net/projects/amputator/\n            text = text.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\\w+);)/g, \"&amp;\");\n\n            // Encode naked <'s\n            text = text.replace(/<(?![a-z\\/?!]|~D)/gi, \"&lt;\");\n\n            return text;\n        }\n\n        function _EncodeBackslashEscapes(text) {\n            //\n            //   Parameter:  String.\n            //   Returns:    The string, with after processing the following backslash\n            //               escape sequences.\n            //\n\n            // attacklab: The polite way to do this is with the new\n            // escapeCharacters() function:\n            //\n            //     text = escapeCharacters(text,\"\\\\\",true);\n            //     text = escapeCharacters(text,\"`*_{}[]()>#+-.!\",true);\n            //\n            // ...but we're sidestepping its use of the (slow) RegExp constructor\n            // as an optimization for Firefox.  This function gets called a LOT.\n\n            text = text.replace(/\\\\(\\\\)/g, escapeCharacters_callback);\n            text = text.replace(/\\\\([`*_{}\\[\\]()>#+-.!])/g, escapeCharacters_callback);\n            return text;\n        }\n\n        var charInsideUrl = \"[-A-Z0-9+&@#/%?=~_|[\\\\]()!:,.;]\",\n            charEndingUrl = \"[-A-Z0-9+&@#/%=~_|[\\\\])]\",\n            autoLinkRegex = new RegExp(\"(=\\\"|<)?\\\\b(https?|ftp)(://\" + charInsideUrl + \"*\" + charEndingUrl + \")(?=$|\\\\W)\", \"gi\"),\n            endCharRegex = new RegExp(charEndingUrl, \"i\");\n\n        function handleTrailingParens(wholeMatch, lookbehind, protocol, link) {\n            if (lookbehind)\n                return wholeMatch;\n            if (link.charAt(link.length - 1) !== \")\")\n                return \"<\" + protocol + link + \">\";\n            var parens = link.match(/[()]/g);\n            var level = 0;\n            for (var i = 0; i < parens.length; i++) {\n                if (parens[i] === \"(\") {\n                    if (level <= 0)\n                        level = 1;\n                    else\n                        level++;\n                }\n                else {\n                    level--;\n                }\n            }\n            var tail = \"\";\n            if (level < 0) {\n                var re = new RegExp(\"\\\\){1,\" + (-level) + \"}$\");\n                link = link.replace(re, function (trailingParens) {\n                    tail = trailingParens;\n                    return \"\";\n                });\n            }\n            if (tail) {\n                var lastChar = link.charAt(link.length - 1);\n                if (!endCharRegex.test(lastChar)) {\n                    tail = lastChar + tail;\n                    link = link.substr(0, link.length - 1);\n                }\n            }\n            return \"<\" + protocol + link + \">\" + tail;\n        }\n        \n        function _DoAutoLinks(text) {\n\n            // note that at this point, all other URL in the text are already hyperlinked as <a href=\"\"></a>\n            // *except* for the <http://www.foo.com> case\n\n            // automatically add < and > around unadorned raw hyperlinks\n            // must be preceded by a non-word character (and not by =\" or <) and followed by non-word/EOF character\n            // simulating the lookbehind in a consuming way is okay here, since a URL can neither and with a \" nor\n            // with a <, so there is no risk of overlapping matches.\n            text = text.replace(autoLinkRegex, handleTrailingParens);\n\n            //  autolink anything like <http://example.com>\n            \n            var replacer = function (wholematch, m1) { return \"<a href=\\\"\" + m1 + \"\\\">\" + pluginHooks.plainLinkText(m1) + \"</a>\"; }\n            text = text.replace(/<((https?|ftp):[^'\">\\s]+)>/gi, replacer);\n\n            // Email addresses: <address@domain.foo>\n            /*\n            text = text.replace(/\n                <\n                (?:mailto:)?\n                (\n                    [-.\\w]+\n                    \\@\n                    [-a-z0-9]+(\\.[-a-z0-9]+)*\\.[a-z]+\n                )\n                >\n            /gi, _DoAutoLinks_callback());\n            */\n\n            /* disabling email autolinking, since we don't do that on the server, either\n            text = text.replace(/<(?:mailto:)?([-.\\w]+\\@[-a-z0-9]+(\\.[-a-z0-9]+)*\\.[a-z]+)>/gi,\n                function(wholeMatch,m1) {\n                    return _EncodeEmailAddress( _UnescapeSpecialChars(m1) );\n                }\n            );\n            */\n            return text;\n        }\n\n        function _UnescapeSpecialChars(text) {\n            //\n            // Swap back in all the special characters we've hidden.\n            //\n            text = text.replace(/~E(\\d+)E/g,\n                function (wholeMatch, m1) {\n                    var charCodeToReplace = parseInt(m1);\n                    return String.fromCharCode(charCodeToReplace);\n                }\n            );\n            return text;\n        }\n\n        function _Outdent(text) {\n            //\n            // Remove one level of line-leading tabs or spaces\n            //\n\n            // attacklab: hack around Konqueror 3.5.4 bug:\n            // \"----------bug\".replace(/^-/g,\"\") == \"bug\"\n\n            text = text.replace(/^(\\t|[ ]{1,4})/gm, \"~0\"); // attacklab: g_tab_width\n\n            // attacklab: clean up hack\n            text = text.replace(/~0/g, \"\")\n\n            return text;\n        }\n\n        function _Detab(text) {\n            if (!/\\t/.test(text))\n                return text;\n\n            var spaces = [\"    \", \"   \", \"  \", \" \"],\n            skew = 0,\n            v;\n\n            return text.replace(/[\\n\\t]/g, function (match, offset) {\n                if (match === \"\\n\") {\n                    skew = offset + 1;\n                    return match;\n                }\n                v = (offset - skew) % 4;\n                skew = offset + 1;\n                return spaces[v];\n            });\n        }\n\n        //\n        //  attacklab: Utility functions\n        //\n\n        var _problemUrlChars = /(?:[\"'*()[\\]:]|~D)/g;\n\n        // hex-encodes some unusual \"problem\" chars in URLs to avoid URL detection problems \n        function encodeProblemUrlChars(url) {\n            if (!url)\n                return \"\";\n\n            var len = url.length;\n\n            return url.replace(_problemUrlChars, function (match, offset) {\n                if (match == \"~D\") // escape for dollar\n                    return \"%24\";\n                if (match == \":\") {\n                    //if (offset == len - 1 || /[0-9\\/]/.test(url.charAt(offset + 1)))\n                        return \":\"\n                }\n                return \"%\" + match.charCodeAt(0).toString(16);\n            });\n        }\n\n\n        function escapeCharacters(text, charsToEscape, afterBackslash) {\n            // First we have to escape the escape characters so that\n            // we can build a character class out of them\n            var regexString = \"([\" + charsToEscape.replace(/([\\[\\]\\\\])/g, \"\\\\$1\") + \"])\";\n\n            if (afterBackslash) {\n                regexString = \"\\\\\\\\\" + regexString;\n            }\n\n            var regex = new RegExp(regexString, \"g\");\n            text = text.replace(regex, escapeCharacters_callback);\n\n            return text;\n        }\n\n\n        function escapeCharacters_callback(wholeMatch, m1) {\n            var charCodeToEscape = m1.charCodeAt(0);\n            return \"~E\" + charCodeToEscape + \"E\";\n        }\n\n    }; // end of the Markdown.Converter constructor\n\n})();\n\nexport default Markdown\n","/* eslint-disable */\n\nimport Markdown from './Markdown.Converter'\nimport CodeMirror from 'codemirror'\n\n// needs Markdown.Converter.js at the moment\n;(function() {\n\tvar util = {},\n\t\tposition = {},\n\t\tui = {},\n\t\tdoc = window.document,\n\t\tre = window.RegExp,\n\t\tnav = window.navigator,\n\t\tSETTINGS = { lineLength: 72 },\n\t\t// Used to work around some browser bugs where we can't use feature testing.\n\t\tuaSniffed = {\n\t\t\tisIE: /msie/.test(nav.userAgent.toLowerCase()),\n\t\t\tisIE_5or6: /msie 6/.test(nav.userAgent.toLowerCase()) || /msie 5/.test(nav.userAgent.toLowerCase()),\n\t\t\tisOpera: /opera/.test(nav.userAgent.toLowerCase()),\n\t\t\tisMac: (/AppleWebKit/.test(nav.userAgent) && /Mobile\\/\\w+/.test(nav.userAgent)) || /Mac/.test(nav.platform),\n\t\t}\n\n\tvar defaultsStrings = {\n\t\tbold: 'Strong <strong>',\n\t\tboldexample: 'strong text',\n\n\t\titalic: 'Emphasis <em>',\n\t\titalicexample: 'emphasized text',\n\n\t\tlink: 'Hyperlink <a>',\n\t\tlinkdescription: 'enter link description here',\n\t\tlinkdialog: '<p><b>Insert Hyperlink</b></p>',\n\n\t\tquote: 'Blockquote <blockquote>',\n\t\tquoteexample: 'Blockquote',\n\n\t\tcode: 'Code Sample <pre><code>',\n\t\tcodeexample: 'enter code here',\n\n\t\timage: 'Image <img>',\n\t\timagedescription: 'enter image description here',\n\t\timagedialog: '<p><b>Insert Image</b></p>',\n\n\t\tolist: 'Numbered List <ol>',\n\t\tulist: 'Bulleted List <ul>',\n\t\tlitem: 'List item',\n\n\t\theading: 'Heading <h1>/<h2>',\n\t\theadingexample: 'Heading',\n\n\t\thr: 'Horizontal Rule <hr>',\n\n\t\ttable: 'Table <table>',\n\n\t\tundo: 'Undo -',\n\t\tredo: 'Redo -',\n\n\t\thelp: 'Markdown Editing Help',\n\t}\n\n\tvar keyStrokes = {\n\t\tbold: {\n\t\t\twin: 'Ctrl-B',\n\t\t\tmac: 'Command-B|Ctrl-B',\n\t\t},\n\t\titalic: {\n\t\t\twin: 'Ctrl-I',\n\t\t\tmac: 'Command-I|Ctrl-I',\n\t\t},\n\t\tlink: {\n\t\t\twin: 'Ctrl-L',\n\t\t\tmac: 'Command-L|Ctrl-L',\n\t\t},\n\t\tquote: {\n\t\t\twin: 'Ctrl-Q',\n\t\t\tmac: 'Command-Q|Ctrl-Q',\n\t\t},\n\t\tcode: {\n\t\t\twin: 'Ctrl-K',\n\t\t\tmac: 'Command-K|Ctrl-K',\n\t\t},\n\t\timage: {\n\t\t\twin: 'Ctrl-G',\n\t\t\tmac: 'Command-G|Ctrl-G',\n\t\t},\n\t\tolist: {\n\t\t\twin: 'Ctrl-O',\n\t\t\tmac: 'Command-O|Ctrl-O',\n\t\t},\n\t\tulist: {\n\t\t\twin: 'Ctrl-U',\n\t\t\tmac: 'Command-U|Ctrl-U',\n\t\t},\n\t\theading: {\n\t\t\twin: 'Ctrl-H',\n\t\t\tmac: 'Command-H|Ctrl-H',\n\t\t},\n\t\thr: {\n\t\t\twin: 'Ctrl-R',\n\t\t\tmac: 'Command-R|Ctrl-R',\n\t\t},\n\t\ttable: {\n\t\t\twin: 'Ctrl-T',\n\t\t\tmac: 'Command-T|Ctrl-T',\n\t\t},\n\t\tundo: {\n\t\t\twin: 'Ctrl-Z',\n\t\t\tmac: 'Command-Z',\n\t\t},\n\t\tredo: {\n\t\t\twin: 'Ctrl-Y|Ctrl-Shift-Z',\n\t\t\tmac: 'Command-Y|Command-Shift-Z',\n\t\t},\n\t}\n\n\t// -------------------------------------------------------------------\n\t//  YOUR CHANGES GO HERE\n\t//\n\t// I've tried to localize the things you are likely to change to\n\t// this area.\n\t// -------------------------------------------------------------------\n\n\t// The default text that appears in the dialog input box when entering\n\t// links.\n\tvar imageDefaultText = 'http://'\n\tvar linkDefaultText = 'http://'\n\n\t// -------------------------------------------------------------------\n\t//  END OF YOUR CHANGES\n\t// -------------------------------------------------------------------\n\n\t// options, if given, can have the following properties:\n\t//   options.helpButton = { handler: yourEventHandler }\n\t//   options.strings = { italicexample: \"slanted text\" }\n\t// `yourEventHandler` is the click handler for the help button.\n\t// If `options.helpButton` isn't given, not help button is created.\n\t// `options.strings` can have any or all of the same properties as\n\t// `defaultStrings` above, so you can just override some string displayed\n\t// to the user on a case-by-case basis, or translate all strings to\n\t// a different language.\n\t//\n\t// For backwards compatibility reasons, the `options` argument can also\n\t// be just the `helpButton` object, and `strings.help` can also be set via\n\t// `helpButton.title`. This should be considered legacy.\n\t//\n\t// The constructed editor object has the methods:\n\t// - getConverter() returns the markdown converter object that was passed to the constructor\n\t// - run() actually starts the editor; should be called after all necessary plugins are registered. Calling this more than once is a no-op.\n\t// - refreshPreview() forces the preview to be updated. This method is only available after run() was called.\n\tMarkdown.Editor = function(markdownConverter, idPostfix, options) {\n\t\toptions = options || {}\n\n\t\tif (typeof options.handler === 'function') {\n\t\t\t//backwards compatible behavior\n\t\t\toptions = { helpButton: options }\n\t\t}\n\t\toptions.strings = options.strings || {}\n\t\tif (options.helpButton) {\n\t\t\toptions.strings.help = options.strings.help || options.helpButton.title\n\t\t}\n\t\t// Override default keystrokes\n\t\tif (options.keyStrokes) {\n\t\t\tfor (var key in options.keyStrokes) {\n\t\t\t\tkeyStrokes[key] = options.keyStrokes[key]\n\t\t\t}\n\t\t}\n\t\tvar getString = function(identifier) {\n\t\t\treturn options.strings[identifier] || defaultsStrings[identifier]\n\t\t}\n\n\t\tidPostfix = idPostfix || ''\n\n\t\tvar hooks = (this.hooks = new Markdown.HookCollection())\n\t\thooks.addNoop('onPreviewRefresh') // called with no arguments after the preview has been refreshed\n\t\thooks.addNoop('postBlockquoteCreation') // called with the user's selection *after* the blockquote was created; should return the actual to-be-inserted text\n\t\thooks.addFalse('insertImageDialog')\n\t\t/* called with one parameter: a callback to be called with the URL of the image. If the application creates\n\t\t * its own image insertion dialog, this hook should return true, and the callback should be called with the chosen\n\t\t * image url (or null if the user cancelled). If this hook returns false, the default dialog will be used.\n\t\t */\n\t\thooks.addFalse('insertLinkDialog')\n\n\t\tthis.getConverter = function() {\n\t\t\treturn markdownConverter\n\t\t}\n\n\t\tvar that = this,\n\t\t\tpanels\n\n\t\tvar undoManager\n\t\tthis.run = function(cm, previewWrapper) {\n\t\t\tif (panels) return // already initialized\n\n\t\t\tpanels = new PanelCollection(idPostfix, cm)\n\t\t\tvar commandManager = new CommandManager(hooks, getString)\n\t\t\tvar previewManager = new PreviewManager(\n\t\t\t\tmarkdownConverter,\n\t\t\t\tpanels,\n\t\t\t\tfunction() {\n\t\t\t\t\thooks.onPreviewRefresh()\n\t\t\t\t},\n\t\t\t\tpreviewWrapper\n\t\t\t)\n\t\t\tvar uiManager\n\n\t\t\t/*benweet\n            if (!/\\?noundo/.test(doc.location.href)) {\n                undoManager = new UndoManager(function () {\n                    previewManager.refresh();\n                    if (uiManager) // not available on the first call\n                        uiManager.setUndoRedoButtonStates();\n                }, panels);\n                this.textOperation = function (f) {\n                    undoManager.setCommandMode();\n                    f();\n                    that.refreshPreview();\n                }\n            }\n            */\n\n\t\t\tvar getKey = function(identifier) {\n\t\t\t\treturn keyStrokes[identifier][uaSniffed.isMac ? 'mac' : 'win'].split('|').join(' ')\n\t\t\t}\n\t\t\tuiManager = new UIManager(\n\t\t\t\tidPostfix,\n\t\t\t\tpanels,\n\t\t\t\tundoManager,\n\t\t\t\tpreviewManager,\n\t\t\t\tcommandManager,\n\t\t\t\toptions.helpButton,\n\t\t\t\tgetString,\n\t\t\t\tgetKey\n\t\t\t)\n\t\t\tuiManager.setUndoRedoButtonStates()\n\n\t\t\tvar forceRefresh = (that.refreshPreview = function() {\n\t\t\t\tpreviewManager.refresh(true)\n\t\t\t})\n\n\t\t\tforceRefresh()\n\t\t\tthat.uiManager = uiManager\n\t\t}\n\t}\n\n\t// before: contains all the text in the input box BEFORE the selection.\n\t// after: contains all the text in the input box AFTER the selection.\n\tfunction Chunks() {}\n\n\t// startRegex: a regular expression to find the start tag\n\t// endRegex: a regular expresssion to find the end tag\n\tChunks.prototype.findTags = function(startRegex, endRegex) {\n\t\tvar chunkObj = this\n\t\tvar regex\n\n\t\tif (startRegex) {\n\t\t\tregex = util.extendRegExp(startRegex, '', '$')\n\n\t\t\tthis.before = this.before.replace(regex, function(match) {\n\t\t\t\tchunkObj.startTag = chunkObj.startTag + match\n\t\t\t\treturn ''\n\t\t\t})\n\n\t\t\tregex = util.extendRegExp(startRegex, '^', '')\n\n\t\t\tthis.selection = this.selection.replace(regex, function(match) {\n\t\t\t\tchunkObj.startTag = chunkObj.startTag + match\n\t\t\t\treturn ''\n\t\t\t})\n\t\t}\n\n\t\tif (endRegex) {\n\t\t\tregex = util.extendRegExp(endRegex, '', '$')\n\n\t\t\tthis.selection = this.selection.replace(regex, function(match) {\n\t\t\t\tchunkObj.endTag = match + chunkObj.endTag\n\t\t\t\treturn ''\n\t\t\t})\n\n\t\t\tregex = util.extendRegExp(endRegex, '^', '')\n\n\t\t\tthis.after = this.after.replace(regex, function(match) {\n\t\t\t\tchunkObj.endTag = match + chunkObj.endTag\n\t\t\t\treturn ''\n\t\t\t})\n\t\t}\n\t}\n\n\t// If remove is false, the whitespace is transferred\n\t// to the before/after regions.\n\t//\n\t// If remove is true, the whitespace disappears.\n\tChunks.prototype.trimWhitespace = function(remove) {\n\t\tvar beforeReplacer,\n\t\t\tafterReplacer,\n\t\t\tthat = this\n\t\tif (remove) {\n\t\t\tbeforeReplacer = afterReplacer = ''\n\t\t} else {\n\t\t\tbeforeReplacer = function(s) {\n\t\t\t\tthat.before += s\n\t\t\t\treturn ''\n\t\t\t}\n\t\t\tafterReplacer = function(s) {\n\t\t\t\tthat.after = s + that.after\n\t\t\t\treturn ''\n\t\t\t}\n\t\t}\n\n\t\tthis.selection = this.selection.replace(/^(\\s*)/, beforeReplacer).replace(/(\\s*)$/, afterReplacer)\n\t}\n\n\tChunks.prototype.skipLines = function(nLinesBefore, nLinesAfter, findExtraNewlines) {\n\t\tif (nLinesBefore === undefined) {\n\t\t\tnLinesBefore = 1\n\t\t}\n\n\t\tif (nLinesAfter === undefined) {\n\t\t\tnLinesAfter = 1\n\t\t}\n\n\t\tnLinesBefore++\n\t\tnLinesAfter++\n\n\t\tvar regexText\n\t\tvar replacementText\n\n\t\t// chrome bug ... documented at: http://meta.stackoverflow.com/questions/63307/blockquote-glitch-in-editor-in-chrome-6-and-7/65985#65985\n\t\tif (navigator.userAgent.match(/Chrome/)) {\n\t\t\t'X'.match(/()./)\n\t\t}\n\n\t\tthis.selection = this.selection.replace(/(^\\n*)/, '')\n\n\t\tthis.startTag = this.startTag + re.$1\n\n\t\tthis.selection = this.selection.replace(/(\\n*$)/, '')\n\t\tthis.endTag = this.endTag + re.$1\n\t\tthis.startTag = this.startTag.replace(/(^\\n*)/, '')\n\t\tthis.before = this.before + re.$1\n\t\tthis.endTag = this.endTag.replace(/(\\n*$)/, '')\n\t\tthis.after = this.after + re.$1\n\n\t\tif (this.before) {\n\t\t\tregexText = replacementText = ''\n\n\t\t\twhile (nLinesBefore--) {\n\t\t\t\tregexText += '\\\\n?'\n\t\t\t\treplacementText += '\\n'\n\t\t\t}\n\n\t\t\tif (findExtraNewlines) {\n\t\t\t\tregexText = '\\\\n*'\n\t\t\t}\n\t\t\tthis.before = this.before.replace(new re(regexText + '$', ''), replacementText)\n\t\t}\n\n\t\tif (this.after) {\n\t\t\tregexText = replacementText = ''\n\n\t\t\twhile (nLinesAfter--) {\n\t\t\t\tregexText += '\\\\n?'\n\t\t\t\treplacementText += '\\n'\n\t\t\t}\n\t\t\tif (findExtraNewlines) {\n\t\t\t\tregexText = '\\\\n*'\n\t\t\t}\n\n\t\t\tthis.after = this.after.replace(new re(regexText, ''), replacementText)\n\t\t}\n\t}\n\n\t// end of Chunks\n\n\t// A collection of the important regions on the page.\n\t// Cached so we don't have to keep traversing the DOM.\n\t// Also holds ieCachedRange and ieCachedScrollTop, where necessary; working around\n\t// this issue:\n\t// Internet explorer has problems with CSS sprite buttons that use HTML\n\t// lists.  When you click on the background image \"button\", IE will\n\t// select the non-existent link text and discard the selection in the\n\t// textarea.  The solution to this is to cache the textarea selection\n\t// on the button's mousedown event and set a flag.  In the part of the\n\t// code where we need to grab the selection, we check for the flag\n\t// and, if it's set, use the cached area instead of querying the\n\t// textarea.\n\t//\n\t// This ONLY affects Internet Explorer (tested on versions 6, 7\n\t// and 8) and ONLY on button clicks.  Keyboard shortcuts work\n\t// normally since the focus never leaves the textarea.\n\tfunction PanelCollection(postfix, cm) {\n\t\tthis.buttonBar = doc.getElementById('wmd-button-bar' + postfix)\n\t\tthis.preview = doc.getElementById('wmd-preview' + postfix)\n\t\tthis.input = cm\n\t}\n\n\t// Returns true if the DOM element is visible, false if it's hidden.\n\t// Checks if display is anything other than none.\n\tutil.isVisible = function(elem) {\n\t\tif (window.getComputedStyle) {\n\t\t\t// Most browsers\n\t\t\treturn window.getComputedStyle(elem, null).getPropertyValue('display') !== 'none'\n\t\t} else if (elem.currentStyle) {\n\t\t\t// IE\n\t\t\treturn elem.currentStyle['display'] !== 'none'\n\t\t}\n\t}\n\n\t// Adds a listener callback to a DOM element which is fired on a specified\n\t// event.\n\tutil.addEvent = function(elem, event, listener) {\n\t\tif (elem.attachEvent) {\n\t\t\t// IE only.  The \"on\" is mandatory.\n\t\t\telem.attachEvent('on' + event, listener)\n\t\t} else {\n\t\t\t// Other browsers.\n\t\t\telem.addEventListener(event, listener, false)\n\t\t}\n\t}\n\n\t// Removes a listener callback from a DOM element which is fired on a specified\n\t// event.\n\tutil.removeEvent = function(elem, event, listener) {\n\t\tif (elem.detachEvent) {\n\t\t\t// IE only.  The \"on\" is mandatory.\n\t\t\telem.detachEvent('on' + event, listener)\n\t\t} else {\n\t\t\t// Other browsers.\n\t\t\telem.removeEventListener(event, listener, false)\n\t\t}\n\t}\n\n\t// Converts \\r\\n and \\r to \\n.\n\tutil.fixEolChars = function(text) {\n\t\ttext = text.replace(/\\r\\n/g, '\\n')\n\t\ttext = text.replace(/\\r/g, '\\n')\n\t\treturn text\n\t}\n\n\t// Extends a regular expression.  Returns a new RegExp\n\t// using pre + regex + post as the expression.\n\t// Used in a few functions where we have a base\n\t// expression and we want to pre- or append some\n\t// conditions to it (e.g. adding \"$\" to the end).\n\t// The flags are unchanged.\n\t//\n\t// regex is a RegExp, pre and post are strings.\n\tutil.extendRegExp = function(regex, pre, post) {\n\t\tif (pre === null || pre === undefined) {\n\t\t\tpre = ''\n\t\t}\n\t\tif (post === null || post === undefined) {\n\t\t\tpost = ''\n\t\t}\n\n\t\tvar pattern = regex.toString()\n\t\tvar flags\n\n\t\t// Replace the flags with empty space and store them.\n\t\tpattern = pattern.replace(/\\/([gim]*)$/, function(wholeMatch, flagsPart) {\n\t\t\tflags = flagsPart\n\t\t\treturn ''\n\t\t})\n\n\t\t// Remove the slash delimiters on the regular expression.\n\t\tpattern = pattern.replace(/(^\\/|\\/$)/g, '')\n\t\tpattern = pre + pattern + post\n\n\t\treturn new re(pattern, flags)\n\t}\n\n\t// UNFINISHED\n\t// The assignment in the while loop makes jslint cranky.\n\t// I'll change it to a better loop later.\n\tposition.getTop = function(elem, isInner) {\n\t\tvar result = elem.offsetTop\n\t\tif (!isInner) {\n\t\t\twhile ((elem = elem.offsetParent)) {\n\t\t\t\tresult += elem.offsetTop\n\t\t\t}\n\t\t}\n\t\treturn result\n\t}\n\n\tposition.getHeight = function(elem) {\n\t\treturn elem.offsetHeight || elem.scrollHeight\n\t}\n\n\tposition.getWidth = function(elem) {\n\t\treturn elem.offsetWidth || elem.scrollWidth\n\t}\n\n\tposition.getPageSize = function() {\n\t\tvar scrollWidth, scrollHeight\n\t\tvar innerWidth, innerHeight\n\n\t\t// It's not very clear which blocks work with which browsers.\n\t\tif (this.innerHeight && this.scrollMaxY) {\n\t\t\tscrollWidth = doc.body.scrollWidth\n\t\t\tscrollHeight = this.innerHeight + this.scrollMaxY\n\t\t} else if (doc.body.scrollHeight > doc.body.offsetHeight) {\n\t\t\tscrollWidth = doc.body.scrollWidth\n\t\t\tscrollHeight = doc.body.scrollHeight\n\t\t} else {\n\t\t\tscrollWidth = doc.body.offsetWidth\n\t\t\tscrollHeight = doc.body.offsetHeight\n\t\t}\n\n\t\tif (this.innerHeight) {\n\t\t\t// Non-IE browser\n\t\t\tinnerWidth = this.innerWidth\n\t\t\tinnerHeight = this.innerHeight\n\t\t} else if (doc.documentElement && doc.documentElement.clientHeight) {\n\t\t\t// Some versions of IE (IE 6 w/ a DOCTYPE declaration)\n\t\t\tinnerWidth = doc.documentElement.clientWidth\n\t\t\tinnerHeight = doc.documentElement.clientHeight\n\t\t} else if (doc.body) {\n\t\t\t// Other versions of IE\n\t\t\tinnerWidth = doc.body.clientWidth\n\t\t\tinnerHeight = doc.body.clientHeight\n\t\t}\n\n\t\tvar maxWidth = Math.max(scrollWidth, innerWidth)\n\t\tvar maxHeight = Math.max(scrollHeight, innerHeight)\n\t\treturn [maxWidth, maxHeight, innerWidth, innerHeight]\n\t}\n\n\t/*benweet\n    // Handles pushing and popping TextareaStates for undo/redo commands.\n    // I should rename the stack variables to list.\n    function UndoManager(callback, panels) {\n\n        var undoObj = this;\n        var undoStack = []; // A stack of undo states\n        var stackPtr = 0; // The index of the current state\n        var mode = \"none\";\n        var lastState; // The last state\n        var timer; // The setTimeout handle for cancelling the timer\n        var inputStateObj;\n\n        // Set the mode for later logic steps.\n        var setMode = function (newMode, noSave) {\n            if (mode != newMode) {\n                mode = newMode;\n                if (!noSave) {\n                    saveState();\n                }\n            }\n\n            if (!uaSniffed.isIE || mode != \"moving\") {\n                timer = setTimeout(refreshState, 1);\n            }\n            else {\n                inputStateObj = null;\n            }\n        };\n\n        var refreshState = function (isInitialState) {\n            inputStateObj = new TextareaState(panels, isInitialState);\n            timer = undefined;\n        };\n\n        this.setCommandMode = function () {\n            mode = \"command\";\n            saveState();\n            timer = setTimeout(refreshState, 0);\n        };\n\n        this.canUndo = function () {\n            return stackPtr > 1;\n        };\n\n        this.canRedo = function () {\n            if (undoStack[stackPtr + 1]) {\n                return true;\n            }\n            return false;\n        };\n\n        // Removes the last state and restores it.\n        this.undo = function () {\n\n            if (undoObj.canUndo()) {\n                if (lastState) {\n                    // What about setting state -1 to null or checking for undefined?\n                    lastState.restore();\n                    lastState = null;\n                }\n                else {\n                    undoStack[stackPtr] = new TextareaState(panels);\n                    undoStack[--stackPtr].restore();\n\n                    if (callback) {\n                        callback();\n                    }\n                }\n            }\n\n            mode = \"none\";\n            panels.input.focus();\n            refreshState();\n        };\n\n        // Redo an action.\n        this.redo = function () {\n\n            if (undoObj.canRedo()) {\n\n                undoStack[++stackPtr].restore();\n\n                if (callback) {\n                    callback();\n                }\n            }\n\n            mode = \"none\";\n            panels.input.focus();\n            refreshState();\n        };\n\n        // Push the input area state to the stack.\n        var saveState = function () {\n            var currState = inputStateObj || new TextareaState(panels);\n\n            if (!currState) {\n                return false;\n            }\n            if (mode == \"moving\") {\n                if (!lastState) {\n                    lastState = currState;\n                }\n                return;\n            }\n            if (lastState) {\n                if (undoStack[stackPtr - 1].text != lastState.text) {\n                    undoStack[stackPtr++] = lastState;\n                }\n                lastState = null;\n            }\n            undoStack[stackPtr++] = currState;\n            undoStack[stackPtr + 1] = null;\n            if (callback) {\n                callback();\n            }\n        };\n\n        var handleCtrlYZ = function (event) {\n\n            var handled = false;\n\n            if ((event.ctrlKey || event.metaKey) && !event.altKey) {\n\n                // IE and Opera do not support charCode.\n                var keyCode = event.charCode || event.keyCode;\n                var keyCodeChar = String.fromCharCode(keyCode);\n\n                switch (keyCodeChar.toLowerCase()) {\n\n                    case \"y\":\n                        undoObj.redo();\n                        handled = true;\n                        break;\n\n                    case \"z\":\n                        if (!event.shiftKey) {\n                            undoObj.undo();\n                        }\n                        else {\n                            undoObj.redo();\n                        }\n                        handled = true;\n                        break;\n                }\n            }\n\n            if (handled) {\n                if (event.preventDefault) {\n                    event.preventDefault();\n                }\n                if (window.event) {\n                    window.event.returnValue = false;\n                }\n                return;\n            }\n        };\n\n        // Set the mode depending on what is going on in the input area.\n        var handleModeChange = function (event) {\n\n            if (!event.ctrlKey && !event.metaKey) {\n\n                var keyCode = event.keyCode;\n\n                if ((keyCode >= 33 && keyCode <= 40) || (keyCode >= 63232 && keyCode <= 63235)) {\n                    // 33 - 40: page up/dn and arrow keys\n                    // 63232 - 63235: page up/dn and arrow keys on safari\n                    setMode(\"moving\");\n                }\n                else if (keyCode == 8 || keyCode == 46 || keyCode == 127) {\n                    // 8: backspace\n                    // 46: delete\n                    // 127: delete\n                    setMode(\"deleting\");\n                }\n                else if (keyCode == 13) {\n                    // 13: Enter\n                    setMode(\"newlines\");\n                }\n                else if (keyCode == 27) {\n                    // 27: escape\n                    setMode(\"escape\");\n                }\n                else if ((keyCode < 16 || keyCode > 20) && keyCode != 91) {\n                    // 16-20 are shift, etc.\n                    // 91: left window key\n                    // I think this might be a little messed up since there are\n                    // a lot of nonprinting keys above 20.\n                    setMode(\"typing\");\n                }\n            }\n        };\n\n        var setEventHandlers = function () {\n            util.addEvent(panels.input, \"keypress\", function (event) {\n                // keyCode 89: y\n                // keyCode 90: z\n                if ((event.ctrlKey || event.metaKey) && !event.altKey && (event.keyCode == 89 || event.keyCode == 90)) {\n                    event.preventDefault();\n                }\n            });\n\n            var handlePaste = function () {\n                if (uaSniffed.isIE || (inputStateObj && inputStateObj.text != panels.input.value)) {\n                    if (timer == undefined) {\n                        mode = \"paste\";\n                        saveState();\n                        refreshState();\n                    }\n                }\n            };\n\n            //util.addEvent(panels.input, \"keydown\", handleCtrlYZ);\n            util.addEvent(panels.input, \"keydown\", handleModeChange);\n            util.addEvent(panels.input, \"mousedown\", function () {\n                setMode(\"moving\");\n            });\n\n            panels.input.onpaste = handlePaste;\n            panels.input.ondrop = handlePaste;\n        };\n\n        var init = function () {\n            setEventHandlers();\n            refreshState(true);\n            //Not necessary\n            //saveState();\n        };\n        \n        this.reinit = function(content, start, end, scrollTop) {\n            undoStack = [];\n            stackPtr = 0;\n            mode = \"none\";\n            lastState = undefined;\n            timer = undefined;\n            refreshState();\n            inputStateObj.text = content;\n            inputStateObj.start = start;\n            inputStateObj.end = end;\n            inputStateObj.scrollTop = scrollTop;\n            inputStateObj.setInputAreaSelection();\n            saveState();\n        };\n        this.setMode = setMode;\n\n        init();\n    }\n\n    // end of UndoManager\n    */\n\n\t// The input textarea state/contents.\n\t// This is used to implement undo/redo by the undo manager.\n\tfunction TextareaState(panels, isInitialState) {\n\t\t// Aliases\n\t\tvar stateObj = this\n\t\tvar inputArea = panels.input\n\t\tthis.init = function() {\n\t\t\t/*benweet\n            if (!util.isVisible(inputArea)) {\n                return;\n            }\n            if (!isInitialState && doc.activeElement && doc.activeElement !== inputArea) { // this happens when tabbing out of the input box\n                return;\n            }\n            */\n\n\t\t\t;(function() {\n\t\t\t\tstateObj.before = inputArea.doc.getRange(CodeMirror.Pos(0, 0), inputArea.doc.getCursor('from'))\n\t\t\t\tstateObj.selection = inputArea.doc.getSelection()\n\t\t\t\tstateObj.after = inputArea.doc.getRange(\n\t\t\t\t\tinputArea.doc.getCursor('to'),\n\t\t\t\t\tinputArea.doc.posFromIndex(Number.MAX_VALUE)\n\t\t\t\t)\n\t\t\t})()\n\t\t\tthis.text = [this.before, this.selection, this.after].join('')\n\t\t\tthis.length = this.text.length\n\t\t\tthis.setInputAreaSelectionStartEnd()\n\t\t\tthis.scrollTop = inputArea.doc.scrollTop || 0\n\t\t\t/*benweet\n            if (!this.text && inputArea.selectionStart || inputArea.selectionStart === 0) {\n                this.text = inputArea.value;\n            }\n            */\n\t\t}\n\n\t\t// Sets the selected text in the input box after we've performed an\n\t\t// operation.\n\t\tthis.setInputAreaSelection = function() {\n\t\t\tinputArea.doc.setSelection(\n\t\t\t\tinputArea.doc.posFromIndex(stateObj.start),\n\t\t\t\tinputArea.doc.posFromIndex(stateObj.end),\n\t\t\t\t{ scroll: true }\n\t\t\t)\n\t\t\tinputArea.focus()\n\n\t\t\t/*benweet\n            if (!util.isVisible(inputArea)) {\n                return;\n            }\n\n            if (inputArea.selectionStart !== undefined && !uaSniffed.isOpera) {\n\n                inputArea.focus();\n                inputArea.selectionStart = stateObj.start;\n                inputArea.selectionEnd = stateObj.end;\n                inputArea.scrollTop = stateObj.scrollTop;\n            }\n            else if (doc.selection) {\n\n                if (doc.activeElement && doc.activeElement !== inputArea) {\n                    return;\n                }\n\n                inputArea.focus();\n                var range = inputArea.createTextRange();\n                range.moveStart(\"character\", -inputArea.value.length);\n                range.moveEnd(\"character\", -inputArea.value.length);\n                range.moveEnd(\"character\", stateObj.end);\n                range.moveStart(\"character\", stateObj.start);\n                range.select();\n            }\n            */\n\t\t}\n\n\t\tthis.setInputAreaSelectionStartEnd = function() {\n\t\t\tstateObj.start = stateObj.before.length\n\t\t\tstateObj.end = stateObj.after.length\n\n\t\t\t/*benweet\n            if (!panels.ieCachedRange && (inputArea.selectionStart || inputArea.selectionStart === 0)) {\n\n                stateObj.start = inputArea.selectionStart;\n                stateObj.end = inputArea.selectionEnd;\n            }\n            else if (doc.selection) {\n\n                stateObj.text = util.fixEolChars(inputArea.value);\n\n                // IE loses the selection in the textarea when buttons are\n                // clicked.  On IE we cache the selection. Here, if something is cached,\n                // we take it.\n                var range = panels.ieCachedRange || doc.selection.createRange();\n\n                var fixedRange = util.fixEolChars(range.text);\n                var marker = \"\\x07\";\n                var markedRange = marker + fixedRange + marker;\n                range.text = markedRange;\n                var inputText = util.fixEolChars(inputArea.value);\n\n                range.moveStart(\"character\", -markedRange.length);\n                range.text = fixedRange;\n\n                stateObj.start = inputText.indexOf(marker);\n                stateObj.end = inputText.lastIndexOf(marker) - marker.length;\n\n                var len = stateObj.text.length - util.fixEolChars(inputArea.value).length;\n\n                if (len) {\n                    range.moveStart(\"character\", -fixedRange.length);\n                    while (len--) {\n                        fixedRange += \"\\n\";\n                        stateObj.end += 1;\n                    }\n                    range.text = fixedRange;\n                }\n\n                if (panels.ieCachedRange)\n                    stateObj.scrollTop = panels.ieCachedScrollTop; // this is set alongside with ieCachedRange\n\n                panels.ieCachedRange = null;\n\n                this.setInputAreaSelection();\n            }\n            */\n\t\t}\n\n\t\t// Restore this state into the input area.\n\t\tthis.restore = function() {\n\t\t\t// Here we could do editor.setValue but we want to update the less we can for undo management\n\n\t\t\t// Find the first modified char\n\t\t\tvar startIndex = 0\n\t\t\tvar startIndexMax = stateObj.before.length\n\t\t\twhile (startIndex < startIndexMax) {\n\t\t\t\tif (stateObj.before.charCodeAt(startIndex) !== stateObj.text.charCodeAt(startIndex)) break\n\t\t\t\tstartIndex++\n\t\t\t}\n\t\t\t// Find the last modified char\n\t\t\tvar endIndex = 0\n\t\t\tvar endIndexMax = stateObj.after.length\n\t\t\tvar beforeMaxOffset = stateObj.after.length - 1\n\t\t\tvar afterMaxOffset = stateObj.text.length - 1\n\t\t\twhile (endIndex < endIndexMax) {\n\t\t\t\tif (\n\t\t\t\t\tstateObj.after.charCodeAt(beforeMaxOffset - endIndex) !==\n\t\t\t\t\tstateObj.text.charCodeAt(afterMaxOffset - endIndex)\n\t\t\t\t)\n\t\t\t\t\tbreak\n\t\t\t\tendIndex++\n\t\t\t}\n\n\t\t\tinputArea.doc.replaceRange(\n\t\t\t\tstateObj.text.substring(startIndex, afterMaxOffset - endIndex + 1),\n\t\t\t\tinputArea.doc.posFromIndex(startIndex),\n\t\t\t\tinputArea.doc.posFromIndex(stateObj.length - endIndex)\n\t\t\t)\n\t\t\tthis.setInputAreaSelection()\n\n\t\t\t/*benweet\n            if (stateObj.text != undefined && stateObj.text != inputArea.value) {\n                inputArea.value = stateObj.text;\n            }\n            inputArea.scrollTop = stateObj.scrollTop;\n            */\n\t\t}\n\n\t\t// Gets a collection of HTML chunks from the inptut textarea.\n\t\tthis.getChunks = function() {\n\t\t\tvar chunk = new Chunks()\n\t\t\tchunk.before = stateObj.before\n\t\t\tchunk.startTag = ''\n\t\t\tchunk.selection = stateObj.selection\n\t\t\tchunk.endTag = ''\n\t\t\tchunk.after = stateObj.after\n\t\t\tchunk.scrollTop = stateObj.scrollTop\n\n\t\t\treturn chunk\n\t\t}\n\n\t\t// Sets the TextareaState properties given a chunk of markdown.\n\t\tthis.setChunks = function(chunk) {\n\t\t\tchunk.before = chunk.before + chunk.startTag\n\t\t\tchunk.after = chunk.endTag + chunk.after\n\n\t\t\tthis.start = chunk.before.length\n\t\t\tthis.end = chunk.before.length + chunk.selection.length\n\t\t\tthis.text = chunk.before + chunk.selection + chunk.after\n\t\t\tthis.scrollTop = chunk.scrollTop\n\t\t}\n\t\tthis.init()\n\t}\n\n\tfunction PreviewManager(converter, panels, previewRefreshCallback, previewWrapper) {\n\t\tvar managerObj = this\n\t\tvar timeout\n\t\tvar elapsedTime\n\t\tvar oldInputText\n\t\tvar maxDelay = 3000\n\t\tvar startType = 'delayed' // The other legal value is \"manual\"\n\n\t\t// Adds event listeners to elements\n\t\t/*benweet\n        var setupEvents = function (inputElem, listener) {\n\n            util.addEvent(inputElem, \"input\", listener);\n            inputElem.onpaste = listener;\n            inputElem.ondrop = listener;\n\n            util.addEvent(inputElem, \"keypress\", listener);\n            util.addEvent(inputElem, \"keydown\", listener);\n        };\n        */\n\n\t\tvar getDocScrollTop = function() {\n\t\t\tvar result = 0\n\n\t\t\tif (window.innerHeight) {\n\t\t\t\tresult = window.pageYOffset\n\t\t\t} else if (doc.documentElement && doc.documentElement.scrollTop) {\n\t\t\t\tresult = doc.documentElement.scrollTop\n\t\t\t} else if (doc.body) {\n\t\t\t\tresult = doc.body.scrollTop\n\t\t\t}\n\n\t\t\treturn result\n\t\t}\n\n\t\tvar makePreviewHtml = function() {\n\t\t\t// If there is no registered preview panel\n\t\t\t// there is nothing to do.\n\t\t\tif (!panels.preview) return\n\n\t\t\tvar text = panels.input.doc.getValue()\n\t\t\tif (text && text == oldInputText) {\n\t\t\t\treturn // Input text hasn't changed.\n\t\t\t} else {\n\t\t\t\toldInputText = text\n\t\t\t}\n\n\t\t\tvar prevTime = new Date().getTime()\n\n\t\t\ttext = converter.makeHtml(text)\n\n\t\t\t// Calculate the processing time of the HTML creation.\n\t\t\t// It's used as the delay time in the event listener.\n\t\t\tvar currTime = new Date().getTime()\n\t\t\telapsedTime = currTime - prevTime\n\n\t\t\tpushPreviewHtml(text)\n\t\t}\n\t\tif (previewWrapper !== undefined) {\n\t\t\tmakePreviewHtml = previewWrapper(makePreviewHtml)\n\t\t}\n\n\t\t// setTimeout is already used.  Used as an event listener.\n\t\tvar applyTimeout = function() {\n\t\t\tif (timeout) {\n\t\t\t\tclearTimeout(timeout)\n\t\t\t\ttimeout = undefined\n\t\t\t}\n\n\t\t\tif (startType !== 'manual') {\n\t\t\t\tvar delay = 0\n\n\t\t\t\tif (startType === 'delayed') {\n\t\t\t\t\tdelay = elapsedTime\n\t\t\t\t}\n\n\t\t\t\tif (delay > maxDelay) {\n\t\t\t\t\tdelay = maxDelay\n\t\t\t\t}\n\t\t\t\ttimeout = setTimeout(makePreviewHtml, delay)\n\t\t\t}\n\t\t}\n\n\t\tvar getScaleFactor = function(panel) {\n\t\t\tif (panel.scrollHeight <= panel.clientHeight) {\n\t\t\t\treturn 1\n\t\t\t}\n\t\t\treturn panel.scrollTop / (panel.scrollHeight - panel.clientHeight)\n\t\t}\n\n\t\tvar setPanelScrollTops = function() {\n\t\t\tif (panels.preview) {\n\t\t\t\tpanels.preview.scrollTop =\n\t\t\t\t\t(panels.preview.scrollHeight - panels.preview.clientHeight) * getScaleFactor(panels.preview)\n\t\t\t}\n\t\t}\n\n\t\tthis.refresh = function(requiresRefresh) {\n\t\t\tif (requiresRefresh) {\n\t\t\t\toldInputText = ''\n\t\t\t\tmakePreviewHtml()\n\t\t\t} else {\n\t\t\t\tapplyTimeout()\n\t\t\t}\n\t\t}\n\n\t\tthis.processingTime = function() {\n\t\t\treturn elapsedTime\n\t\t}\n\n\t\tvar isFirstTimeFilled = true\n\n\t\t// IE doesn't let you use innerHTML if the element is contained somewhere in a table\n\t\t// (which is the case for inline editing) -- in that case, detach the element, set the\n\t\t// value, and reattach. Yes, that *is* ridiculous.\n\t\tvar ieSafePreviewSet = function(text) {\n\t\t\tvar preview = panels.preview\n\t\t\tvar parent = preview.parentNode\n\t\t\tvar sibling = preview.nextSibling\n\t\t\tparent.removeChild(preview)\n\t\t\tpreview.innerHTML = text\n\t\t\tif (!sibling) parent.appendChild(preview)\n\t\t\telse parent.insertBefore(preview, sibling)\n\t\t}\n\n\t\tvar nonSuckyBrowserPreviewSet = function(text) {\n\t\t\tpanels.preview.innerHTML = text\n\t\t}\n\n\t\tvar previewSetter\n\n\t\tvar previewSet = function(text) {\n\t\t\tif (previewSetter) return previewSetter(text)\n\n\t\t\ttry {\n\t\t\t\tnonSuckyBrowserPreviewSet(text)\n\t\t\t\tpreviewSetter = nonSuckyBrowserPreviewSet\n\t\t\t} catch (e) {\n\t\t\t\tpreviewSetter = ieSafePreviewSet\n\t\t\t\tpreviewSetter(text)\n\t\t\t}\n\t\t}\n\n\t\tvar pushPreviewHtml = function(text) {\n\t\t\tvar emptyTop = position.getTop(panels.input.doc) - getDocScrollTop()\n\n\t\t\tif (panels.preview) {\n\t\t\t\tpreviewSet(text)\n\t\t\t\tpreviewRefreshCallback()\n\t\t\t}\n\n\t\t\tsetPanelScrollTops()\n\n\t\t\tif (isFirstTimeFilled) {\n\t\t\t\tisFirstTimeFilled = false\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tvar fullTop = position.getTop(panels.input.doc) - getDocScrollTop()\n\n\t\t\tif (uaSniffed.isIE) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\twindow.scrollBy(0, fullTop - emptyTop)\n\t\t\t\t}, 0)\n\t\t\t} else {\n\t\t\t\twindow.scrollBy(0, fullTop - emptyTop)\n\t\t\t}\n\t\t}\n\n\t\tvar init = function() {\n\t\t\t/*benweet\n            setupEvents(panels.input, applyTimeout);\n            */\n\t\t\tpanels.input.on('change', applyTimeout)\n\t\t\t//Not necessary\n\t\t\t//makePreviewHtml();\n\n\t\t\tif (panels.preview) {\n\t\t\t\tpanels.preview.scrollTop = 0\n\t\t\t}\n\t\t}\n\n\t\tinit()\n\t}\n\n\t// Creates the background behind the hyperlink text entry box.\n\t// And download dialog\n\t// Most of this has been moved to CSS but the div creation and\n\t// browser-specific hacks remain here.\n\tui.createBackground = function() {\n\t\tvar background = doc.createElement('div'),\n\t\t\tstyle = background.style\n\n\t\tbackground.className = 'wmd-prompt-background'\n\n\t\tstyle.position = 'absolute'\n\t\tstyle.top = '0'\n\n\t\tstyle.zIndex = '1000'\n\n\t\tif (uaSniffed.isIE) {\n\t\t\tstyle.filter = 'alpha(opacity=50)'\n\t\t} else {\n\t\t\tstyle.opacity = '0.5'\n\t\t}\n\n\t\tvar pageSize = position.getPageSize()\n\t\tstyle.height = pageSize[1] + 'px'\n\n\t\tif (uaSniffed.isIE) {\n\t\t\tstyle.left = doc.documentElement.scrollLeft\n\t\t\tstyle.width = doc.documentElement.clientWidth\n\t\t} else {\n\t\t\tstyle.left = '0'\n\t\t\tstyle.width = '100%'\n\t\t}\n\n\t\tdoc.body.appendChild(background)\n\t\treturn background\n\t}\n\n\t// This simulates a modal dialog box and asks for the URL when you\n\t// click the hyperlink or image buttons.\n\t//\n\t// text: The html for the input box.\n\t// defaultInputText: The default value that appears in the input box.\n\t// callback: The function which is executed when the prompt is dismissed, either via OK or Cancel.\n\t//      It receives a single argument; either the entered text (if OK was chosen) or null (if Cancel\n\t//      was chosen).\n\t//  fileChangeCallback: If not specified, <input type=\"file\" doesn't get rendered.\n\t//      It is called with a HTMLInputElement.files as an argument\n\t//  fileType: The accepts attribute for input elements\n\tui.prompt = function(text, defaultInputText, callback, fileChangeCallback, fileType) {\n\t\t// These variables need to be declared at this level since they are used\n\t\t// in multiple functions.\n\t\tvar dialog // The dialog box.\n\t\tvar input // The text box where you enter the hyperlink.\n\t\tvar fileInput // The file input element.\n\n\t\tif (defaultInputText === undefined) {\n\t\t\tdefaultInputText = ''\n\t\t}\n\n\t\t// Used as a keydown event handler. Esc dismisses the prompt.\n\t\t// Key code 27 is ESC.\n\t\tvar checkEscape = function(key) {\n\t\t\tvar code = key.charCode || key.keyCode\n\t\t\tif (code === 27) {\n\t\t\t\tclose(true)\n\t\t\t}\n\t\t}\n\n\t\t// Dismisses the hyperlink input box.\n\t\t// isCancel is true if we don't care about the input text.\n\t\t// isCancel is false if we are going to keep the text.\n\t\tvar close = function(isCancel) {\n\t\t\tutil.removeEvent(doc.body, 'keydown', checkEscape)\n\t\t\tvar text = input.value\n\n\t\t\tif (isCancel) {\n\t\t\t\ttext = null\n\t\t\t} else {\n\t\t\t\t// Fixes common pasting errors.\n\t\t\t\ttext = text.replace(/^http:\\/\\/(https?|ftp):\\/\\//, '$1://')\n\t\t\t\tif (!/^(?:https?|ftp):\\/\\//.test(text)) text = 'http://' + text\n\t\t\t}\n\n\t\t\tdialog.parentNode.removeChild(dialog)\n\n\t\t\tcallback(text)\n\t\t\treturn false\n\t\t}\n\n\t\t// Create the text input box form/window.\n\t\tvar createDialog = function() {\n\t\t\t// The main dialog box.\n\t\t\tdialog = doc.createElement('div')\n\t\t\tdialog.className = 'wmd-prompt-dialog'\n\t\t\tdialog.style.padding = '10px;'\n\t\t\tdialog.style.position = 'fixed'\n\t\t\tdialog.style.width = '400px'\n\t\t\tdialog.style.zIndex = '1001'\n\n\t\t\t// The dialog text.\n\t\t\tvar question = doc.createElement('div')\n\t\t\tquestion.innerHTML = text\n\t\t\tquestion.style.padding = '5px'\n\t\t\tdialog.appendChild(question)\n\n\t\t\t// The web form container for the text box and buttons.\n\t\t\tvar form = doc.createElement('form'),\n\t\t\t\tstyle = form.style\n\t\t\tform.onsubmit = function() {\n\t\t\t\treturn close(false)\n\t\t\t}\n\t\t\tstyle.padding = '0'\n\t\t\tstyle.margin = '0'\n\t\t\tstyle.cssFloat = 'left'\n\t\t\tstyle.width = '100%'\n\t\t\tstyle.textAlign = 'center'\n\t\t\tstyle.position = 'relative'\n\t\t\tdialog.appendChild(form)\n\n\t\t\t// The input text box\n\t\t\tinput = doc.createElement('input')\n\t\t\tinput.type = 'text'\n\t\t\tinput.value = defaultInputText\n\t\t\tstyle = input.style\n\t\t\tstyle.display = 'block'\n\t\t\tstyle.width = '80%'\n\t\t\tstyle.marginLeft = style.marginRight = 'auto'\n\t\t\tform.appendChild(input)\n\n\t\t\t// The file input\n\t\t\tif (fileChangeCallback) {\n\t\t\t\tfileInput = doc.createElement('input')\n\t\t\t\tfileInput.type = 'file'\n\t\t\t\tfileInput.accept = fileType\n\t\t\t\tfileInput.className = 'file-input'\n\t\t\t\tfileInput.addEventListener('change', e => fileChangeCallback(e.target.files))\n\t\t\t\tform.appendChild(fileInput)\n\t\t\t}\n\n\t\t\t// The ok button\n\t\t\tvar okButton = doc.createElement('input')\n\t\t\tokButton.type = 'button'\n\t\t\tokButton.onclick = function() {\n\t\t\t\treturn close(false)\n\t\t\t}\n\t\t\tokButton.value = 'OK'\n\t\t\tstyle = okButton.style\n\t\t\tstyle.margin = '10px'\n\t\t\tstyle.display = 'inline'\n\t\t\tstyle.width = '7em'\n\n\t\t\t// The cancel button\n\t\t\tvar cancelButton = doc.createElement('input')\n\t\t\tcancelButton.type = 'button'\n\t\t\tcancelButton.onclick = function() {\n\t\t\t\treturn close(true)\n\t\t\t}\n\t\t\tcancelButton.value = 'Cancel'\n\t\t\tstyle = cancelButton.style\n\t\t\tstyle.margin = '10px'\n\t\t\tstyle.display = 'inline'\n\t\t\tstyle.width = '7em'\n\n\t\t\tform.appendChild(okButton)\n\t\t\tform.appendChild(cancelButton)\n\n\t\t\tutil.addEvent(doc.body, 'keydown', checkEscape)\n\t\t\tdialog.style.top = '50%'\n\t\t\tdialog.style.left = '50%'\n\t\t\tdialog.style.display = 'block'\n\t\t\tif (uaSniffed.isIE_5or6) {\n\t\t\t\tdialog.style.position = 'absolute'\n\t\t\t\tdialog.style.top = doc.documentElement.scrollTop + 200 + 'px'\n\t\t\t\tdialog.style.left = '50%'\n\t\t\t}\n\t\t\tdoc.body.appendChild(dialog)\n\n\t\t\t// This has to be done AFTER adding the dialog to the form if you\n\t\t\t// want it to be centered.\n\t\t\tdialog.style.marginTop = -(position.getHeight(dialog) / 2) + 'px'\n\t\t\tdialog.style.marginLeft = -(position.getWidth(dialog) / 2) + 'px'\n\t\t}\n\n\t\t// Why is this in a zero-length timeout?\n\t\t// Is it working around a browser bug?\n\t\tsetTimeout(function() {\n\t\t\tcreateDialog()\n\n\t\t\t/*var defTextLen = defaultInputText.length;\n            if (input.selectionStart !== undefined) {\n                input.selectionStart = 0;\n                input.selectionEnd = defTextLen;\n            }\n            else if (input.createTextRange) {\n                var range = input.createTextRange();\n                range.collapse(false);\n                range.moveStart(\"character\", -defTextLen);\n                range.moveEnd(\"character\", defTextLen);\n                range.select();\n            }*/\n\n\t\t\tinput.focus()\n\t\t}, 0)\n\t}\n\n\tfunction UIManager(postfix, panels, undoManager, previewManager, commandManager, helpOptions, getString, getKey) {\n\t\tvar getStringAndKey = function(identifier) {\n\t\t\treturn getString(identifier) + ' ' + getKey(identifier)\n\t\t}\n\n\t\tvar inputBox = panels.input,\n\t\t\tbuttons = {} // buttons.undo, buttons.link, etc. The actual DOM elements.\n\n\t\tthis.setUndoRedoButtonStates = function() {\n\t\t\tsetTimeout(function() {\n\t\t\t\tsetupButton(buttons.undo, inputBox.doc.history.done.length > 0)\n\t\t\t\tsetupButton(buttons.redo, inputBox.doc.history.undone.length > 0)\n\t\t\t}, 50)\n\t\t}\n\n\t\tvar that = this\n\t\tmakeSpritedButtonRow()\n\n\t\tvar keyEvent = 'keydown'\n\t\tif (uaSniffed.isOpera) {\n\t\t\tkeyEvent = 'keypress'\n\t\t}\n\n\t\tfunction addKeyCmd(identifierList) {\n\t\t\tif (identifierList.length === 0) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tvar eKeys = {}\n\t\t\tfor (var i = identifierList.length - 1; i >= 0; i--) {\n\t\t\t\tvar identifier = identifierList[i]\n\t\t\t\teKeys[getKey(identifier)] = (function(identifier) {\n\t\t\t\t\treturn function(editor) {\n\t\t\t\t\t\tdoClick(buttons[identifier])\n\t\t\t\t\t}\n\t\t\t\t})(identifier)\n\t\t\t}\n\t\t\tinputBox.addKeyMap(eKeys)\n\t\t}\n\t\taddKeyCmd(['bold', 'italic', 'link', 'quote', 'code', 'image', 'olist', 'ulist', 'heading', 'hr', 'table'])\n\n\t\t/*benweet\n        util.addEvent(inputBox, keyEvent, function (key) {\n\n            // Check to see if we have a button key and, if so execute the callback.\n            if ((key.ctrlKey || key.metaKey) && !key.altKey) {\n\n                var keyCode = key.charCode || key.keyCode;\n                var keyCodeStr = String.fromCharCode(keyCode).toLowerCase();\n\n                switch (keyCodeStr) {\n                    case \"b\":\n                        doClick(buttons.bold);\n                        break;\n                    case \"i\":\n                        doClick(buttons.italic);\n                        break;\n                    case \"l\":\n                        doClick(buttons.link);\n                        break;\n                    case \"q\":\n                        doClick(buttons.quote);\n                        break;\n                    case \"k\":\n                        doClick(buttons.code);\n                        break;\n                    case \"g\":\n                        doClick(buttons.image);\n                        break;\n                    case \"o\":\n                        doClick(buttons.olist);\n                        break;\n                    case \"u\":\n                        doClick(buttons.ulist);\n                        break;\n                    case \"h\":\n                        doClick(buttons.heading);\n                        break;\n                    case \"r\":\n                        doClick(buttons.hr);\n                        break;\n                    case \"y\":\n                        doClick(buttons.redo);\n                        break;\n                    case \"z\":\n                        if (key.shiftKey) {\n                            doClick(buttons.redo);\n                        }\n                        else {\n                            doClick(buttons.undo);\n                        }\n                        break;\n                    case \"v\":\n                        undoManager.setMode(\"typing\");\n                        return;\n                    case \"x\":\n                        undoManager.setMode(\"deleting\");\n                        return;\n                    default:\n                        return;\n                }\n\n\n                if (key.preventDefault) {\n                    key.preventDefault();\n                }\n\n                if (window.event) {\n                    window.event.returnValue = false;\n                }\n            }\n        });\n\n        // Auto-indent on shift-enter\n        util.addEvent(inputBox, \"keyup\", function (key) {\n            if (key.shiftKey && !key.ctrlKey && !key.metaKey) {\n                var keyCode = key.charCode || key.keyCode;\n                // Character 13 is Enter\n                if (keyCode === 13) {\n                    var fakeButton = {};\n                    fakeButton.textOp = bindCommand(\"doAutoindent\");\n                    doClick(fakeButton);\n                }\n            }\n        });\n\n        // special handler because IE clears the context of the textbox on ESC\n        if (uaSniffed.isIE) {\n            util.addEvent(inputBox, \"keydown\", function (key) {\n                var code = key.keyCode;\n                if (code === 27) {\n                    return false;\n                }\n            });\n        }\n        */\n\n\t\t// Perform the button's action.\n\t\tfunction doClick(button) {\n\t\t\tinputBox.focus()\n\t\t\tvar linkOrImage = button.id == 'wmd-link-button' || button.id == 'wmd-image-button'\n\n\t\t\tif (button.textOp) {\n\t\t\t\tif (undoManager && !linkOrImage) {\n\t\t\t\t\tundoManager.setCommandMode()\n\t\t\t\t}\n\n\t\t\t\tvar state = new TextareaState(panels)\n\n\t\t\t\tif (!state) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tvar chunks = state.getChunks()\n\n\t\t\t\t// Some commands launch a \"modal\" prompt dialog.  Javascript\n\t\t\t\t// can't really make a modal dialog box and the WMD code\n\t\t\t\t// will continue to execute while the dialog is displayed.\n\t\t\t\t// This prevents the dialog pattern I'm used to and means\n\t\t\t\t// I can't do something like this:\n\t\t\t\t//\n\t\t\t\t// var link = CreateLinkDialog();\n\t\t\t\t// makeMarkdownLink(link);\n\t\t\t\t//\n\t\t\t\t// Instead of this straightforward method of handling a\n\t\t\t\t// dialog I have to pass any code which would execute\n\t\t\t\t// after the dialog is dismissed (e.g. link creation)\n\t\t\t\t// in a function parameter.\n\t\t\t\t//\n\t\t\t\t// Yes this is awkward and I think it sucks, but there's\n\t\t\t\t// no real workaround.  Only the image and link code\n\t\t\t\t// create dialogs and require the function pointers.\n\t\t\t\tvar fixupInputArea = function() {\n\t\t\t\t\tinputBox.focus()\n\n\t\t\t\t\tif (chunks) {\n\t\t\t\t\t\tstate.setChunks(chunks)\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.restore()\n\t\t\t\t\tpreviewManager.refresh()\n\t\t\t\t}\n\n\t\t\t\tvar noCleanup = button.textOp(chunks, fixupInputArea)\n\n\t\t\t\tif (!noCleanup) {\n\t\t\t\t\tfixupInputArea()\n\t\t\t\t\t/*benweet\n                    if(!linkOrImage) {\n                        inputBox.dispatchEvent(new Event('input'));\n                    }\n                    */\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (button.execute) {\n\t\t\t\tbutton.execute(undoManager)\n\t\t\t}\n\t\t}\n\n\t\tfunction setupButton(button, isEnabled) {\n\t\t\tvar normalYShift = '0px'\n\t\t\tvar disabledYShift = '-20px'\n\t\t\tvar highlightYShift = '-40px'\n\t\t\tvar image = button.getElementsByTagName('span')[0]\n\t\t\tbutton.className = button.className.replace(/ disabled/g, '')\n\t\t\tif (isEnabled) {\n\t\t\t\timage.style.backgroundPosition = button.XShift + ' ' + normalYShift\n\t\t\t\tbutton.onmouseover = function() {\n\t\t\t\t\timage.style.backgroundPosition = this.XShift + ' ' + highlightYShift\n\t\t\t\t}\n\n\t\t\t\tbutton.onmouseout = function() {\n\t\t\t\t\timage.style.backgroundPosition = this.XShift + ' ' + normalYShift\n\t\t\t\t}\n\n\t\t\t\t// IE tries to select the background image \"button\" text (it's\n\t\t\t\t// implemented in a list item) so we have to cache the selection\n\t\t\t\t// on mousedown.\n\t\t\t\tif (uaSniffed.isIE) {\n\t\t\t\t\tbutton.onmousedown = function() {\n\t\t\t\t\t\tif (doc.activeElement && doc.activeElement !== panels.input.doc) {\n\t\t\t\t\t\t\t// we're not even in the input box, so there's no selection\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpanels.ieCachedRange = document.selection.createRange()\n\t\t\t\t\t\tpanels.ieCachedScrollTop = panels.input.doc.scrollTop || 0\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!button.isHelp) {\n\t\t\t\t\tbutton.onclick = function() {\n\t\t\t\t\t\tif (this.onmouseout) {\n\t\t\t\t\t\t\tthis.onmouseout()\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdoClick(this)\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\timage.style.backgroundPosition = button.XShift + ' ' + disabledYShift\n\t\t\t\tbutton.onmouseover = button.onmouseout = button.onclick = function() {}\n\t\t\t\tbutton.className += ' disabled'\n\t\t\t}\n\t\t}\n\n\t\tfunction bindCommand(method) {\n\t\t\tif (typeof method === 'string') method = commandManager[method]\n\t\t\treturn function() {\n\t\t\t\tmethod.apply(commandManager, arguments)\n\t\t\t}\n\t\t}\n\n\t\tfunction makeSpritedButtonRow() {\n\t\t\tvar buttonBar = panels.buttonBar\n\n\t\t\tvar normalYShift = '0px'\n\t\t\tvar disabledYShift = '-20px'\n\t\t\tvar highlightYShift = '-40px'\n\n\t\t\tvar buttonRow = document.createElement('ul')\n\t\t\tbuttonRow.id = 'wmd-button-row' + postfix\n\t\t\tbuttonRow.className = 'wmd-button-row'\n\t\t\tbuttonRow = buttonBar.appendChild(buttonRow)\n\t\t\tvar xPosition = 0\n\t\t\tvar makeButton = function(id, title, XShift, textOp) {\n\t\t\t\tvar button = document.createElement('li')\n\t\t\t\tbutton.className = 'wmd-button'\n\t\t\t\tbutton.style.left = xPosition + 'px'\n\t\t\t\txPosition += 25\n\t\t\t\tvar buttonImage = document.createElement('span')\n\t\t\t\tbutton.id = id + postfix\n\t\t\t\tbutton.appendChild(buttonImage)\n\t\t\t\tbutton.title = title\n\t\t\t\tbutton.XShift = XShift\n\t\t\t\tif (textOp) button.textOp = textOp\n\t\t\t\tsetupButton(button, true)\n\t\t\t\tbuttonRow.appendChild(button)\n\t\t\t\treturn button\n\t\t\t}\n\t\t\tvar makeSpacer = function(num) {\n\t\t\t\tvar spacer = document.createElement('li')\n\t\t\t\tspacer.className = 'wmd-spacer wmd-spacer' + num\n\t\t\t\tspacer.id = 'wmd-spacer' + num + postfix\n\t\t\t\tbuttonRow.appendChild(spacer)\n\t\t\t\txPosition += 25\n\t\t\t}\n\n\t\t\tbuttons.bold = makeButton('wmd-bold-button', getStringAndKey('bold'), '0px', bindCommand('doBold'))\n\t\t\tbuttons.italic = makeButton(\n\t\t\t\t'wmd-italic-button',\n\t\t\t\tgetStringAndKey('italic'),\n\t\t\t\t'-20px',\n\t\t\t\tbindCommand('doItalic')\n\t\t\t)\n\t\t\tmakeSpacer(1)\n\t\t\tbuttons.link = makeButton(\n\t\t\t\t'wmd-link-button',\n\t\t\t\tgetStringAndKey('link'),\n\t\t\t\t'-40px',\n\t\t\t\tbindCommand(function(chunk, postProcessing) {\n\t\t\t\t\treturn this.doLinkOrImage(chunk, postProcessing, false)\n\t\t\t\t})\n\t\t\t)\n\t\t\tbuttons.quote = makeButton(\n\t\t\t\t'wmd-quote-button',\n\t\t\t\tgetStringAndKey('quote'),\n\t\t\t\t'-60px',\n\t\t\t\tbindCommand('doBlockquote')\n\t\t\t)\n\t\t\tbuttons.code = makeButton('wmd-code-button', getStringAndKey('code'), '-80px', bindCommand('doCode'))\n\t\t\tbuttons.image = makeButton(\n\t\t\t\t'wmd-image-button',\n\t\t\t\tgetStringAndKey('image'),\n\t\t\t\t'-100px',\n\t\t\t\tbindCommand(function(chunk, postProcessing) {\n\t\t\t\t\treturn this.doLinkOrImage(chunk, postProcessing, true)\n\t\t\t\t})\n\t\t\t)\n\t\t\tmakeSpacer(2)\n\t\t\tbuttons.olist = makeButton(\n\t\t\t\t'wmd-olist-button',\n\t\t\t\tgetStringAndKey('olist'),\n\t\t\t\t'-120px',\n\t\t\t\tbindCommand(function(chunk, postProcessing) {\n\t\t\t\t\tthis.doList(chunk, postProcessing, true)\n\t\t\t\t})\n\t\t\t)\n\t\t\tbuttons.ulist = makeButton(\n\t\t\t\t'wmd-ulist-button',\n\t\t\t\tgetStringAndKey('ulist'),\n\t\t\t\t'-140px',\n\t\t\t\tbindCommand(function(chunk, postProcessing) {\n\t\t\t\t\tthis.doList(chunk, postProcessing, false)\n\t\t\t\t})\n\t\t\t)\n\t\t\tbuttons.heading = makeButton(\n\t\t\t\t'wmd-heading-button',\n\t\t\t\tgetStringAndKey('heading'),\n\t\t\t\t'-160px',\n\t\t\t\tbindCommand('doHeading')\n\t\t\t)\n\t\t\tbuttons.hr = makeButton('wmd-hr-button', getStringAndKey('hr'), '-180px', bindCommand('doHorizontalRule'))\n\t\t\tbuttons.table = makeButton('wmd-hr-table', getStringAndKey('table'), '-180px', bindCommand('doTable'))\n\t\t\tmakeSpacer(3)\n\t\t\tbuttons.undo = makeButton('wmd-undo-button', getStringAndKey('undo'), '-200px', null)\n\t\t\tbuttons.undo.execute = function(manager) {\n\t\t\t\tinputBox.doc.undo()\n\t\t\t}\n\n\t\t\tbuttons.redo = makeButton('wmd-redo-button', getStringAndKey('redo'), '-220px', null)\n\t\t\tbuttons.redo.execute = function(manager) {\n\t\t\t\tinputBox.doc.redo()\n\t\t\t}\n\n\t\t\tif (helpOptions) {\n\t\t\t\tvar helpButton = document.createElement('li')\n\t\t\t\tvar helpButtonImage = document.createElement('span')\n\t\t\t\thelpButton.appendChild(helpButtonImage)\n\t\t\t\thelpButton.className = 'wmd-button wmd-help-button'\n\t\t\t\thelpButton.id = 'wmd-help-button' + postfix\n\t\t\t\thelpButton.XShift = '-240px'\n\t\t\t\thelpButton.isHelp = true\n\t\t\t\thelpButton.style.right = '0px'\n\t\t\t\thelpButton.title = getString('help')\n\t\t\t\thelpButton.onclick = helpOptions.handler\n\n\t\t\t\tsetupButton(helpButton, true)\n\t\t\t\tbuttonRow.appendChild(helpButton)\n\t\t\t\tbuttons.help = helpButton\n\t\t\t}\n\n\t\t\tthat.setUndoRedoButtonStates()\n\t\t\tinputBox.on('change', function() {\n\t\t\t\tthat.setUndoRedoButtonStates()\n\t\t\t})\n\t\t}\n\n\t\tthis.buttons = buttons\n\t\tthis.setButtonState = setupButton\n\t}\n\n\tfunction CommandManager(pluginHooks, getString) {\n\t\tthis.hooks = pluginHooks\n\t\tthis.getString = getString\n\t}\n\n\tvar commandProto = CommandManager.prototype\n\n\t// The markdown symbols - 4 spaces = code, > = blockquote, etc.\n\tcommandProto.prefixes = '(?:\\\\s{4,}|\\\\s*>|\\\\s*-\\\\s+|\\\\s*\\\\d+\\\\.|=|\\\\+|-|_|\\\\*|#|\\\\s*\\\\[[^\\n]]+\\\\]:)'\n\n\t// Remove markdown symbols from the chunk selection.\n\tcommandProto.unwrap = function(chunk) {\n\t\tvar txt = new re('([^\\\\n])\\\\n(?!(\\\\n|' + this.prefixes + '))', 'g')\n\t\tchunk.selection = chunk.selection.replace(txt, '$1 $2')\n\t}\n\n\tcommandProto.wrap = function(chunk, len) {\n\t\tthis.unwrap(chunk)\n\t\tvar regex = new re('(.{1,' + len + '})( +|$\\\\n?)', 'gm'),\n\t\t\tthat = this\n\n\t\tchunk.selection = chunk.selection.replace(regex, function(line, marked) {\n\t\t\tif (new re('^' + that.prefixes, '').test(line)) {\n\t\t\t\treturn line\n\t\t\t}\n\t\t\treturn marked + '\\n'\n\t\t})\n\n\t\tchunk.selection = chunk.selection.replace(/\\s+$/, '')\n\t}\n\n\tcommandProto.doBold = function(chunk, postProcessing) {\n\t\treturn this.doBorI(chunk, postProcessing, 2, this.getString('boldexample'))\n\t}\n\n\tcommandProto.doItalic = function(chunk, postProcessing) {\n\t\treturn this.doBorI(chunk, postProcessing, 1, this.getString('italicexample'))\n\t}\n\n\t// chunk: The selected region that will be enclosed with */**\n\t// nStars: 1 for italics, 2 for bold\n\t// insertText: If you just click the button without highlighting text, this gets inserted\n\tcommandProto.doBorI = function(chunk, postProcessing, nStars, insertText) {\n\t\t// Get rid of whitespace and fixup newlines.\n\t\tchunk.trimWhitespace()\n\t\tchunk.selection = chunk.selection.replace(/\\n{2,}/g, '\\n')\n\n\t\t// Look for stars before and after.  Is the chunk already marked up?\n\t\t// note that these regex matches cannot fail\n\t\tvar starsBefore = /(\\**$)/.exec(chunk.before)[0]\n\t\tvar starsAfter = /(^\\**)/.exec(chunk.after)[0]\n\n\t\tvar prevStars = Math.min(starsBefore.length, starsAfter.length)\n\n\t\t// Remove stars if we have to since the button acts as a toggle.\n\t\tif (prevStars >= nStars && (prevStars != 2 || nStars != 1)) {\n\t\t\tchunk.before = chunk.before.replace(re('[*]{' + nStars + '}$', ''), '')\n\t\t\tchunk.after = chunk.after.replace(re('^[*]{' + nStars + '}', ''), '')\n\t\t} else if (!chunk.selection && starsAfter) {\n\t\t\t// It's not really clear why this code is necessary.  It just moves\n\t\t\t// some arbitrary stuff around.\n\t\t\tchunk.after = chunk.after.replace(/^([*_]*)/, '')\n\t\t\tchunk.before = chunk.before.replace(/(\\s?)$/, '')\n\t\t\tvar whitespace = re.$1\n\t\t\tchunk.before = chunk.before + starsAfter + whitespace\n\t\t} else {\n\t\t\t// In most cases, if you don't have any selected text and click the button\n\t\t\t// you'll get a selected, marked up region with the default text inserted.\n\t\t\tif (!chunk.selection && !starsAfter) {\n\t\t\t\tchunk.selection = insertText\n\t\t\t}\n\n\t\t\t// Add the true markup.\n\t\t\tvar markup = nStars <= 1 ? '*' : '**' // shouldn't the test be = ?\n\t\t\tchunk.before = chunk.before + markup\n\t\t\tchunk.after = markup + chunk.after\n\t\t}\n\n\t\treturn\n\t}\n\n\tcommandProto.stripLinkDefs = function(text, defsToAdd) {\n\t\ttext = text.replace(\n\t\t\t/^[ ]{0,3}\\[(\\d+)\\]:[ \\t]*\\n?[ \\t]*<?(\\S+?)>?[ \\t]*\\n?[ \\t]*(?:(\\n*)[\"(](.+?)[\")][ \\t]*)?(?:\\n+|$)/gm,\n\t\t\tfunction(totalMatch, id, link, newlines, title) {\n\t\t\t\tdefsToAdd[id] = totalMatch.replace(/\\s*$/, '')\n\t\t\t\tif (newlines) {\n\t\t\t\t\t// Strip the title and return that separately.\n\t\t\t\t\tdefsToAdd[id] = totalMatch.replace(/[\"(](.+?)[\")]$/, '')\n\t\t\t\t\treturn newlines + title\n\t\t\t\t}\n\t\t\t\treturn ''\n\t\t\t}\n\t\t)\n\n\t\treturn text\n\t}\n\n\tcommandProto.addLinkDef = function(chunk, linkDef) {\n\t\tvar refNumber = 0 // The current reference number\n\t\tvar defsToAdd = {} //\n\t\t// Start with a clean slate by removing all previous link definitions.\n\t\tchunk.before = this.stripLinkDefs(chunk.before, defsToAdd)\n\t\tchunk.selection = this.stripLinkDefs(chunk.selection, defsToAdd)\n\t\tchunk.after = this.stripLinkDefs(chunk.after, defsToAdd)\n\n\t\tvar defs = ''\n\t\tvar regex = /(\\[)((?:\\[[^\\]]*\\]|[^\\[\\]])*)(\\][ ]?(?:\\n[ ]*)?\\[)(\\d+)(\\])/g\n\n\t\tvar addDefNumber = function(def) {\n\t\t\trefNumber++\n\t\t\tdef = def.replace(/^[ ]{0,3}\\[(\\d+)\\]:/, '  [' + refNumber + ']:')\n\t\t\tdefs += '\\n' + def\n\t\t}\n\n\t\t// note that\n\t\t// a) the recursive call to getLink cannot go infinite, because by definition\n\t\t//    of regex, inner is always a proper substring of wholeMatch, and\n\t\t// b) more than one level of nesting is neither supported by the regex\n\t\t//    nor making a lot of sense (the only use case for nesting is a linked image)\n\t\tvar getLink = function(wholeMatch, before, inner, afterInner, id, end) {\n\t\t\tinner = inner.replace(regex, getLink)\n\t\t\tif (defsToAdd[id]) {\n\t\t\t\taddDefNumber(defsToAdd[id])\n\t\t\t\treturn before + inner + afterInner + refNumber + end\n\t\t\t}\n\t\t\treturn wholeMatch\n\t\t}\n\n\t\tchunk.before = chunk.before.replace(regex, getLink)\n\n\t\tif (linkDef) {\n\t\t\taddDefNumber(linkDef)\n\t\t} else {\n\t\t\tchunk.selection = chunk.selection.replace(regex, getLink)\n\t\t}\n\n\t\tvar refOut = refNumber\n\n\t\tchunk.after = chunk.after.replace(regex, getLink)\n\n\t\tif (chunk.after) {\n\t\t\tchunk.after = chunk.after.replace(/\\n*$/, '')\n\t\t}\n\t\tif (!chunk.after) {\n\t\t\tchunk.selection = chunk.selection.replace(/\\n*$/, '')\n\t\t}\n\n\t\tchunk.after += '\\n\\n' + defs\n\n\t\treturn refOut\n\t}\n\n\t// takes the line as entered into the add link/as image dialog and makes\n\t// sure the URL and the optinal title are \"nice\".\n\tfunction properlyEncoded(linkdef) {\n\t\treturn linkdef.replace(/^\\s*(.*?)(?:\\s+\"(.+)\")?\\s*$/, function(wholematch, link, title) {\n\t\t\tlink = link.replace(/\\?.*$/, function(querypart) {\n\t\t\t\treturn querypart.replace(/\\+/g, ' ') // in the query string, a plus and a space are identical\n\t\t\t})\n\t\t\tlink = decodeURIComponent(link) // unencode first, to prevent double encoding\n\t\t\tlink = encodeURI(link)\n\t\t\t\t.replace(/'/g, '%27')\n\t\t\t\t.replace(/\\(/g, '%28')\n\t\t\t\t.replace(/\\)/g, '%29')\n\t\t\tlink = link.replace(/\\?.*$/, function(querypart) {\n\t\t\t\treturn querypart.replace(/\\+/g, '%2b') // since we replaced plus with spaces in the query part, all pluses that now appear where originally encoded\n\t\t\t})\n\t\t\tif (title) {\n\t\t\t\ttitle = title.trim ? title.trim() : title.replace(/^\\s*/, '').replace(/\\s*$/, '')\n\t\t\t\ttitle = title\n\t\t\t\t\t.replace(/\"/g, 'quot;')\n\t\t\t\t\t.replace(/\\(/g, '&#40;')\n\t\t\t\t\t.replace(/\\)/g, '&#41;')\n\t\t\t\t\t.replace(/</g, '&lt;')\n\t\t\t\t\t.replace(/>/g, '&gt;')\n\t\t\t}\n\t\t\treturn title ? link + ' \"' + title + '\"' : link\n\t\t})\n\t}\n\n\tcommandProto.doLinkOrImage = function(chunk, postProcessing, isImage) {\n\t\tchunk.trimWhitespace()\n\t\tchunk.findTags(/\\s*!?\\[/, /\\][ ]?(?:\\n[ ]*)?(\\[.*?\\])?/)\n\t\tvar background\n\n\t\tif (chunk.endTag.length > 1 && chunk.startTag.length > 0) {\n\t\t\tchunk.startTag = chunk.startTag.replace(/!?\\[/, '')\n\t\t\tchunk.endTag = ''\n\t\t\tthis.addLinkDef(chunk, null)\n\t\t} else {\n\t\t\t// We're moving start and end tag back into the selection, since (as we're in the else block) we're not\n\t\t\t// *removing* a link, but *adding* one, so whatever findTags() found is now back to being part of the\n\t\t\t// link text. linkEnteredCallback takes care of escaping any brackets.\n\t\t\tchunk.selection = chunk.startTag + chunk.selection + chunk.endTag\n\t\t\tchunk.startTag = chunk.endTag = ''\n\n\t\t\tif (/\\n\\n/.test(chunk.selection)) {\n\t\t\t\tthis.addLinkDef(chunk, null)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tvar that = this\n\t\t\t// The function to be executed when you enter a link and press OK or Cancel.\n\t\t\t// Marks up the link and adds the ref.\n\t\t\tvar linkEnteredCallback = function(link) {\n\t\t\t\tbackground.parentNode.removeChild(background)\n\n\t\t\t\tif (link !== null) {\n\t\t\t\t\t// (                          $1\n\t\t\t\t\t//     [^\\\\]                  anything that's not a backslash\n\t\t\t\t\t//     (?:\\\\\\\\)*              an even number (this includes zero) of backslashes\n\t\t\t\t\t// )\n\t\t\t\t\t// (?=                        followed by\n\t\t\t\t\t//     [[\\]]                  an opening or closing bracket\n\t\t\t\t\t// )\n\t\t\t\t\t//\n\t\t\t\t\t// In other words, a non-escaped bracket. These have to be escaped now to make sure they\n\t\t\t\t\t// don't count as the end of the link or similar.\n\t\t\t\t\t// Note that the actual bracket has to be a lookahead, because (in case of to subsequent brackets),\n\t\t\t\t\t// the bracket in one match may be the \"not a backslash\" character in the next match, so it\n\t\t\t\t\t// should not be consumed by the first match.\n\t\t\t\t\t// The \"prepend a space and finally remove it\" steps makes sure there is a \"not a backslash\" at the\n\t\t\t\t\t// start of the string, so this also works if the selection begins with a bracket. We cannot solve\n\t\t\t\t\t// this by anchoring with ^, because in the case that the selection starts with two brackets, this\n\t\t\t\t\t// would mean a zero-width match at the start. Since zero-width matches advance the string position,\n\t\t\t\t\t// the first bracket could then not act as the \"not a backslash\" for the second.\n\t\t\t\t\tchunk.selection = (' ' + chunk.selection).replace(/([^\\\\](?:\\\\\\\\)*)(?=[[\\]])/g, '$1\\\\').substr(1)\n\n\t\t\t\t\tvar linkDef = ' [999]: ' + properlyEncoded(link)\n\n\t\t\t\t\tvar num = that.addLinkDef(chunk, linkDef)\n\t\t\t\t\tchunk.startTag = isImage ? '![' : '['\n\t\t\t\t\tchunk.endTag = '][' + num + ']'\n\n\t\t\t\t\tif (!chunk.selection) {\n\t\t\t\t\t\tif (isImage) {\n\t\t\t\t\t\t\tchunk.selection = that.getString('imagedescription')\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tchunk.selection = that.getString('linkdescription')\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpostProcessing()\n\t\t\t}\n\n\t\t\tbackground = ui.createBackground()\n\n\t\t\tif (isImage) {\n\t\t\t\tif (!this.hooks.insertImageDialog(linkEnteredCallback))\n\t\t\t\t\tui.prompt(this.getString('imagedialog'), imageDefaultText, linkEnteredCallback, files => {\n\t\t\t\t\t\tif (!files || !files[0]) return\n\n\t\t\t\t\t\tconst formData = new FormData()\n\t\t\t\t\t\tformData.append('file', files[0])\n\n\t\t\t\t\t\tfetch('/img/', {\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tmode: 'cors',\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tbody: formData,\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tif (!this.hooks.insertLinkDialog(linkEnteredCallback))\n\t\t\t\t\tui.prompt(this.getString('linkdialog'), linkDefaultText, linkEnteredCallback)\n\t\t\t}\n\t\t\treturn true\n\t\t}\n\t}\n\n\t// When making a list, hitting shift-enter will put your cursor on the next line\n\t// at the current indent level.\n\tcommandProto.doAutoindent = function(chunk, postProcessing) {\n\t\tvar commandMgr = this,\n\t\t\tfakeSelection = false\n\n\t\tchunk.before = chunk.before.replace(/(\\n|^)[ ]{0,3}([*+-]|\\d+[.])[ \\t]*\\n$/, '\\n\\n')\n\t\tchunk.before = chunk.before.replace(/(\\n|^)[ ]{0,3}>[ \\t]*\\n$/, '\\n\\n')\n\t\tchunk.before = chunk.before.replace(/(\\n|^)[ \\t]+\\n$/, '\\n\\n')\n\n\t\t// There's no selection, end the cursor wasn't at the end of the line:\n\t\t// The user wants to split the current list item / code line / blockquote line\n\t\t// (for the latter it doesn't really matter) in two. Temporarily select the\n\t\t// (rest of the) line to achieve this.\n\t\tif (!chunk.selection && !/^[ \\t]*(?:\\n|$)/.test(chunk.after)) {\n\t\t\tchunk.after = chunk.after.replace(/^[^\\n]*/, function(wholeMatch) {\n\t\t\t\tchunk.selection = wholeMatch\n\t\t\t\treturn ''\n\t\t\t})\n\t\t\tfakeSelection = true\n\t\t}\n\n\t\tif (/(\\n|^)[ ]{0,3}([*+-]|\\d+[.])[ \\t]+.*\\n$/.test(chunk.before)) {\n\t\t\tif (commandMgr.doList) {\n\t\t\t\tcommandMgr.doList(chunk)\n\t\t\t}\n\t\t}\n\t\tif (/(\\n|^)[ ]{0,3}>[ \\t]+.*\\n$/.test(chunk.before)) {\n\t\t\tif (commandMgr.doBlockquote) {\n\t\t\t\tcommandMgr.doBlockquote(chunk)\n\t\t\t}\n\t\t}\n\t\tif (/(\\n|^)(\\t|[ ]{4,}).*\\n$/.test(chunk.before)) {\n\t\t\tif (commandMgr.doCode) {\n\t\t\t\tcommandMgr.doCode(chunk)\n\t\t\t}\n\t\t}\n\n\t\tif (fakeSelection) {\n\t\t\tchunk.after = chunk.selection + chunk.after\n\t\t\tchunk.selection = ''\n\t\t}\n\t}\n\n\tcommandProto.doBlockquote = function(chunk, postProcessing) {\n\t\tchunk.selection = chunk.selection.replace(/^(\\n*)([^\\r]+?)(\\n*)$/, function(\n\t\t\ttotalMatch,\n\t\t\tnewlinesBefore,\n\t\t\ttext,\n\t\t\tnewlinesAfter\n\t\t) {\n\t\t\tchunk.before += newlinesBefore\n\t\t\tchunk.after = newlinesAfter + chunk.after\n\t\t\treturn text\n\t\t})\n\n\t\tchunk.before = chunk.before.replace(/(>[ \\t]*)$/, function(totalMatch, blankLine) {\n\t\t\tchunk.selection = blankLine + chunk.selection\n\t\t\treturn ''\n\t\t})\n\n\t\tchunk.selection = chunk.selection.replace(/^(\\s|>)+$/, '')\n\t\tchunk.selection = chunk.selection || this.getString('quoteexample')\n\n\t\t// The original code uses a regular expression to find out how much of the\n\t\t// text *directly before* the selection already was a blockquote:\n\n\t\t/*\n        if (chunk.before) {\n        chunk.before = chunk.before.replace(/\\n?$/, \"\\n\");\n        }\n        chunk.before = chunk.before.replace(/(((\\n|^)(\\n[ \\t]*)*>(.+\\n)*.*)+(\\n[ \\t]*)*$)/,\n        function (totalMatch) {\n        chunk.startTag = totalMatch;\n        return \"\";\n        });\n        */\n\n\t\t// This comes down to:\n\t\t// Go backwards as many lines a possible, such that each line\n\t\t//  a) starts with \">\", or\n\t\t//  b) is almost empty, except for whitespace, or\n\t\t//  c) is preceeded by an unbroken chain of non-empty lines\n\t\t//     leading up to a line that starts with \">\" and at least one more character\n\t\t// and in addition\n\t\t//  d) at least one line fulfills a)\n\t\t//\n\t\t// Since this is essentially a backwards-moving regex, it's susceptible to\n\t\t// catstrophic backtracking and can cause the browser to hang;\n\t\t// see e.g. http://meta.stackoverflow.com/questions/9807.\n\t\t//\n\t\t// Hence we replaced this by a simple state machine that just goes through the\n\t\t// lines and checks for a), b), and c).\n\n\t\tvar match = '',\n\t\t\tleftOver = '',\n\t\t\tline\n\t\tif (chunk.before) {\n\t\t\tvar lines = chunk.before.replace(/\\n$/, '').split('\\n')\n\t\t\tvar inChain = false\n\t\t\tfor (var i = 0; i < lines.length; i++) {\n\t\t\t\tvar good = false\n\t\t\t\tline = lines[i]\n\t\t\t\tinChain = inChain && line.length > 0 // c) any non-empty line continues the chain\n\t\t\t\tif (/^>/.test(line)) {\n\t\t\t\t\t// a)\n\t\t\t\t\tgood = true\n\t\t\t\t\tif (!inChain && line.length > 1)\n\t\t\t\t\t\t// c) any line that starts with \">\" and has at least one more character starts the chain\n\t\t\t\t\t\tinChain = true\n\t\t\t\t} else if (/^[ \\t]*$/.test(line)) {\n\t\t\t\t\t// b)\n\t\t\t\t\tgood = true\n\t\t\t\t} else {\n\t\t\t\t\tgood = inChain // c) the line is not empty and does not start with \">\", so it matches if and only if we're in the chain\n\t\t\t\t}\n\t\t\t\tif (good) {\n\t\t\t\t\tmatch += line + '\\n'\n\t\t\t\t} else {\n\t\t\t\t\tleftOver += match + line\n\t\t\t\t\tmatch = '\\n'\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!/(^|\\n)>/.test(match)) {\n\t\t\t\t// d)\n\t\t\t\tleftOver += match\n\t\t\t\tmatch = ''\n\t\t\t}\n\t\t}\n\n\t\tchunk.startTag = match\n\t\tchunk.before = leftOver\n\n\t\t// end of change\n\n\t\t/*benweet Don't really know the purpose of it but it is destructive\n        \n        if (chunk.after) {\n            chunk.after = chunk.after.replace(/^\\n?/, \"\\n\");\n        }\n\n        chunk.after = chunk.after.replace(/^(((\\n|^)(\\n[ \\t]*)*>(.+\\n)*.*)+(\\n[ \\t]*)*)/,\n            function (totalMatch) {\n                chunk.endTag = totalMatch;\n                return \"\";\n            }\n        );\n        */\n\n\t\tvar replaceBlanksInTags = function(useBracket) {\n\t\t\tvar replacement = useBracket ? '> ' : ''\n\n\t\t\tif (chunk.startTag) {\n\t\t\t\tchunk.startTag = chunk.startTag.replace(/\\n((>|\\s)*)\\n$/, function(totalMatch, markdown) {\n\t\t\t\t\treturn '\\n' + markdown.replace(/^[ ]{0,3}>?[ \\t]*$/gm, replacement) + '\\n'\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (chunk.endTag) {\n\t\t\t\tchunk.endTag = chunk.endTag.replace(/^\\n((>|\\s)*)\\n/, function(totalMatch, markdown) {\n\t\t\t\t\treturn '\\n' + markdown.replace(/^[ ]{0,3}>?[ \\t]*$/gm, replacement) + '\\n'\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tif (/^(?![ ]{0,3}>)/m.test(chunk.selection)) {\n\t\t\tthis.wrap(chunk, SETTINGS.lineLength - 2)\n\t\t\tchunk.selection = chunk.selection.replace(/^/gm, '> ')\n\t\t\treplaceBlanksInTags(true)\n\t\t\tchunk.skipLines()\n\t\t} else {\n\t\t\tchunk.selection = chunk.selection.replace(/^[ ]{0,3}> ?/gm, '')\n\t\t\tthis.unwrap(chunk)\n\t\t\treplaceBlanksInTags(false)\n\n\t\t\tif (!/^(\\n|^)[ ]{0,3}>/.test(chunk.selection) && chunk.startTag) {\n\t\t\t\tchunk.startTag = chunk.startTag.replace(/\\n{0,2}$/, '\\n\\n')\n\t\t\t}\n\n\t\t\tif (!/(\\n|^)[ ]{0,3}>.*$/.test(chunk.selection) && chunk.endTag) {\n\t\t\t\tchunk.endTag = chunk.endTag.replace(/^\\n{0,2}/, '\\n\\n')\n\t\t\t}\n\t\t}\n\n\t\tchunk.selection = this.hooks.postBlockquoteCreation(chunk.selection)\n\n\t\tif (!/\\n/.test(chunk.selection)) {\n\t\t\tchunk.selection = chunk.selection.replace(/^(> *)/, function(wholeMatch, blanks) {\n\t\t\t\tchunk.startTag += blanks\n\t\t\t\treturn ''\n\t\t\t})\n\t\t}\n\t}\n\n\tcommandProto.doCode = function(chunk, postProcessing) {\n\t\tvar hasTextBefore = /\\S[ ]*$/.test(chunk.before)\n\t\tvar hasTextAfter = /^[ ]*\\S/.test(chunk.after)\n\n\t\t// Use 'four space' markdown if the selection is on its own\n\t\t// line or is multiline.\n\t\tif ((!hasTextAfter && !hasTextBefore) || /\\n/.test(chunk.selection)) {\n\t\t\tchunk.before = chunk.before.replace(/[ ]{4}$/, function(totalMatch) {\n\t\t\t\tchunk.selection = totalMatch + chunk.selection\n\t\t\t\treturn ''\n\t\t\t})\n\n\t\t\tvar nLinesBack = 1\n\t\t\tvar nLinesForward = 1\n\n\t\t\tif (/(\\n|^)(\\t|[ ]{4,}).*\\n$/.test(chunk.before)) {\n\t\t\t\tnLinesBack = 0\n\t\t\t}\n\t\t\tif (/^\\n(\\t|[ ]{4,})/.test(chunk.after)) {\n\t\t\t\tnLinesForward = 0\n\t\t\t}\n\n\t\t\tchunk.skipLines(nLinesBack, nLinesForward)\n\n\t\t\tif (!chunk.selection) {\n\t\t\t\tchunk.startTag = '    '\n\t\t\t\tchunk.selection = this.getString('codeexample')\n\t\t\t} else {\n\t\t\t\tif (/^[ ]{0,3}\\S/m.test(chunk.selection)) {\n\t\t\t\t\tif (/\\n/.test(chunk.selection)) chunk.selection = chunk.selection.replace(/^/gm, '    ')\n\t\t\t\t\t// if it's not multiline, do not select the four added spaces; this is more consistent with the doList behavior\n\t\t\t\t\telse chunk.before += '    '\n\t\t\t\t} else {\n\t\t\t\t\tchunk.selection = chunk.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\\t)/gm, '')\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// Use backticks (`) to delimit the code block.\n\n\t\t\tchunk.trimWhitespace()\n\t\t\tchunk.findTags(/`/, /`/)\n\n\t\t\tif (!chunk.startTag && !chunk.endTag) {\n\t\t\t\tchunk.startTag = chunk.endTag = '`'\n\t\t\t\tif (!chunk.selection) {\n\t\t\t\t\tchunk.selection = this.getString('codeexample')\n\t\t\t\t}\n\t\t\t} else if (chunk.endTag && !chunk.startTag) {\n\t\t\t\tchunk.before += chunk.endTag\n\t\t\t\tchunk.endTag = ''\n\t\t\t} else {\n\t\t\t\tchunk.startTag = chunk.endTag = ''\n\t\t\t}\n\t\t}\n\t}\n\n\tcommandProto.doList = function(chunk, postProcessing, isNumberedList) {\n\t\t// These are identical except at the very beginning and end.\n\t\t// Should probably use the regex extension function to make this clearer.\n\t\tvar previousItemsRegex = /(\\n|^)(([ ]{0,3}([*+-]|\\d+[.])[ \\t]+.*)(\\n.+|\\n{2,}([*+-].*|\\d+[.])[ \\t]+.*|\\n{2,}[ \\t]+\\S.*)*)\\n*$/\n\t\tvar nextItemsRegex = /^\\n*(([ ]{0,3}([*+-]|\\d+[.])[ \\t]+.*)(\\n.+|\\n{2,}([*+-].*|\\d+[.])[ \\t]+.*|\\n{2,}[ \\t]+\\S.*)*)\\n*/\n\n\t\t// The default bullet is a dash but others are possible.\n\t\t// This has nothing to do with the particular HTML bullet,\n\t\t// it's just a markdown bullet.\n\t\tvar bullet = '-'\n\n\t\t// The number in a numbered list.\n\t\tvar num = 1\n\n\t\t// Get the item prefix - e.g. \" 1. \" for a numbered list, \" - \" for a bulleted list.\n\t\tvar getItemPrefix = function() {\n\t\t\tvar prefix\n\t\t\tif (isNumberedList) {\n\t\t\t\tprefix = ' ' + num + '. '\n\t\t\t\tnum++\n\t\t\t} else {\n\t\t\t\tprefix = ' ' + bullet + ' '\n\t\t\t}\n\t\t\treturn prefix\n\t\t}\n\n\t\t// Fixes the prefixes of the other list items.\n\t\tvar getPrefixedItem = function(itemText) {\n\t\t\t// The numbering flag is unset when called by autoindent.\n\t\t\tif (isNumberedList === undefined) {\n\t\t\t\tisNumberedList = /^\\s*\\d/.test(itemText)\n\t\t\t}\n\n\t\t\t// Renumber/bullet the list element.\n\t\t\titemText = itemText.replace(/^[ ]{0,3}([*+-]|\\d+[.])\\s/gm, function(_) {\n\t\t\t\treturn getItemPrefix()\n\t\t\t})\n\n\t\t\treturn itemText\n\t\t}\n\n\t\tchunk.findTags(/(\\n|^)*[ ]{0,3}([*+-]|\\d+[.])\\s+/, null)\n\n\t\tif (chunk.before && !/\\n$/.test(chunk.before) && !/^\\n/.test(chunk.startTag)) {\n\t\t\tchunk.before += chunk.startTag\n\t\t\tchunk.startTag = ''\n\t\t}\n\n\t\tif (chunk.startTag) {\n\t\t\tvar hasDigits = /\\d+[.]/.test(chunk.startTag)\n\t\t\tchunk.startTag = ''\n\t\t\tchunk.selection = chunk.selection.replace(/\\n[ ]{4}/g, '\\n')\n\t\t\tthis.unwrap(chunk)\n\t\t\tchunk.skipLines()\n\n\t\t\tif (hasDigits) {\n\t\t\t\t// Have to renumber the bullet points if this is a numbered list.\n\t\t\t\tchunk.after = chunk.after.replace(nextItemsRegex, getPrefixedItem)\n\t\t\t}\n\t\t\tif (isNumberedList == hasDigits) {\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\n\t\tvar nLinesUp = 1\n\n\t\tchunk.before = chunk.before.replace(previousItemsRegex, function(itemText) {\n\t\t\tif (/^\\s*([*+-])/.test(itemText)) {\n\t\t\t\tbullet = re.$1\n\t\t\t}\n\t\t\tnLinesUp = /[^\\n]\\n\\n[^\\n]/.test(itemText) ? 1 : 0\n\t\t\treturn getPrefixedItem(itemText)\n\t\t})\n\n\t\tif (!chunk.selection) {\n\t\t\tchunk.selection = this.getString('litem')\n\t\t}\n\n\t\tvar prefix = getItemPrefix()\n\n\t\tvar nLinesDown = 1\n\n\t\tchunk.after = chunk.after.replace(nextItemsRegex, function(itemText) {\n\t\t\tnLinesDown = /[^\\n]\\n\\n[^\\n]/.test(itemText) ? 1 : 0\n\t\t\treturn getPrefixedItem(itemText)\n\t\t})\n\n\t\tchunk.trimWhitespace(true)\n\t\tchunk.skipLines(nLinesUp, nLinesDown, true)\n\t\tchunk.startTag = prefix\n\t\tvar spaces = prefix.replace(/./g, ' ')\n\t\tthis.wrap(chunk, SETTINGS.lineLength - spaces.length)\n\t\tchunk.selection = chunk.selection.replace(/\\n/g, '\\n' + spaces)\n\t}\n\n\tcommandProto.doHeading = function(chunk, postProcessing) {\n\t\t// Remove leading/trailing whitespace and reduce internal spaces to single spaces.\n\t\tchunk.selection = chunk.selection.replace(/\\s+/g, ' ')\n\t\tchunk.selection = chunk.selection.replace(/(^\\s+|\\s+$)/g, '')\n\n\t\t// If we clicked the button with no selected text, we just\n\t\t// make a level 2 hash header around some default text.\n\t\tif (!chunk.selection) {\n\t\t\tchunk.startTag = '## '\n\t\t\tchunk.selection = this.getString('headingexample')\n\t\t\tchunk.endTag = ' ##'\n\t\t\treturn\n\t\t}\n\n\t\tvar headerLevel = 0 // The existing header level of the selected text.\n\n\t\t// Remove any existing hash heading markdown and save the header level.\n\t\tchunk.findTags(/#+[ ]*/, /[ ]*#+/)\n\t\tif (/#+/.test(chunk.startTag)) {\n\t\t\theaderLevel = re.lastMatch.length\n\t\t}\n\t\tchunk.startTag = chunk.endTag = ''\n\n\t\t// Try to get the current header level by looking for - and = in the line\n\t\t// below the selection.\n\t\tchunk.findTags(null, /\\s?(-+|=+)/)\n\t\tif (/=+/.test(chunk.endTag)) {\n\t\t\theaderLevel = 1\n\t\t}\n\t\tif (/-+/.test(chunk.endTag)) {\n\t\t\theaderLevel = 2\n\t\t}\n\n\t\t// Skip to the next line so we can create the header markdown.\n\t\tchunk.startTag = chunk.endTag = ''\n\t\tchunk.skipLines(1, 1)\n\n\t\t// We make a level 2 header if there is no current header.\n\t\t// If there is a header level, we substract one from the header level.\n\t\t// If it's already a level 1 header, it's removed.\n\t\tvar headerLevelToCreate = headerLevel == 0 ? 2 : headerLevel - 1\n\n\t\tif (headerLevelToCreate > 0) {\n\t\t\t// The button only creates level 1 and 2 underline headers.\n\t\t\t// Why not have it iterate over hash header levels?  Wouldn't that be easier and cleaner?\n\t\t\tvar headerChar = headerLevelToCreate >= 2 ? '-' : '='\n\t\t\tvar len = chunk.selection.length\n\t\t\tif (len > SETTINGS.lineLength) {\n\t\t\t\tlen = SETTINGS.lineLength\n\t\t\t}\n\t\t\tchunk.endTag = '\\n'\n\t\t\twhile (len--) {\n\t\t\t\tchunk.endTag += headerChar\n\t\t\t}\n\t\t}\n\t}\n\n\tcommandProto.doHorizontalRule = function(chunk, postProcessing) {\n\t\tchunk.startTag = '----------\\n'\n\t\tchunk.selection = ''\n\t\tchunk.skipLines(2, 1, true)\n\t}\n\n\tcommandProto.doTable = function(chunk, postProcessing) {\n\t\tchunk.startTag = `|  |  |  |\n|--|--|--|\n|  |  |  |`\n\t\tchunk.selection = ''\n\t}\n})()\n\nexport default Markdown\n","import CodeMirror from 'codemirror'\nimport 'codemirror/mode/markdown/markdown'\nimport 'codemirror/addon/mode/overlay'\n\nvar urlRE = /^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\\.beep|\\.lwz|\\.xpc|\\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\\.beeps?|xmpp|xri|ymsgr|z39\\.50[rs]?):(?:\\/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]|\\([^\\s()<>]*\\))+(?:\\([^\\s()<>]*\\)|[^\\s`*!()\\[\\]{};:'\".,<>?]))/i\n\nCodeMirror.defineMode(\n\t'gfm',\n\tfunction(config, modeConfig) {\n\t\tvar codeDepth = 0\n\t\tfunction blankLine(state) {\n\t\t\tstate.code = false\n\t\t\treturn null\n\t\t}\n\t\tvar gfmOverlay = {\n\t\t\tstartState: function() {\n\t\t\t\treturn {\n\t\t\t\t\tcode: false,\n\t\t\t\t\tcodeBlock: false,\n\t\t\t\t\tateSpace: false,\n\t\t\t\t}\n\t\t\t},\n\t\t\tcopyState: function(s) {\n\t\t\t\treturn {\n\t\t\t\t\tcode: s.code,\n\t\t\t\t\tcodeBlock: s.codeBlock,\n\t\t\t\t\tateSpace: s.ateSpace,\n\t\t\t\t}\n\t\t\t},\n\t\t\ttoken: function(stream, state) {\n\t\t\t\tstate.combineTokens = null\n\n\t\t\t\t// Hack to prevent formatting override inside code blocks (block and inline)\n\t\t\t\tif (state.codeBlock) {\n\t\t\t\t\tif (stream.match(/^````+/) || stream.match(/^\\|.*/)) {\n\t\t\t\t\t\tstate.codeBlock = false\n\t\t\t\t\t\treturn null\n\t\t\t\t\t}\n\t\t\t\t\tstream.skipToEnd()\n\t\t\t\t\treturn null\n\t\t\t\t}\n\t\t\t\tif (stream.sol()) {\n\t\t\t\t\tstate.code = false\n\t\t\t\t}\n                if (stream.sol() && (stream.match(/^````+/) || stream.match(/^\\|.*/))) {\n\t\t\t\t\tstream.skipToEnd()\n\t\t\t\t\tstate.codeBlock = true\n\t\t\t\t\treturn null\n\t\t\t\t}\n\t\t\t\t// If this block is changed, it may need to be updated in Markdown mode\n\t\t\t\tif (stream.peek() === '`') {\n\t\t\t\t\tstream.next()\n\t\t\t\t\tvar before = stream.pos\n\t\t\t\t\tstream.eatWhile('`')\n\t\t\t\t\tvar difference = 1 + stream.pos - before\n\t\t\t\t\tif (!state.code) {\n\t\t\t\t\t\tcodeDepth = difference\n\t\t\t\t\t\tstate.code = true\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (difference === codeDepth) {\n\t\t\t\t\t\t\t// Must be exact\n\t\t\t\t\t\t\tstate.code = false\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn null\n\t\t\t\t} else if (state.code) {\n\t\t\t\t\tstream.next()\n\t\t\t\t\treturn null\n\t\t\t\t}\n\t\t\t\t// Check if space. If so, links can be formatted later on\n\t\t\t\tif (stream.eatSpace()) {\n\t\t\t\t\tstate.ateSpace = true\n\t\t\t\t\treturn null\n\t\t\t\t}\n\t\t\t\tif (stream.sol() || state.ateSpace) {\n\t\t\t\t\tstate.ateSpace = false\n\t\t\t\t\tif (modeConfig.gitHubSpice !== false) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tstream.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+@)?(?=.{0,6}\\d)(?:[a-f0-9]{7,40}\\b)/)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t// User/Project@SHA\n\t\t\t\t\t\t\t// User@SHA\n\t\t\t\t\t\t\t// SHA\n\t\t\t\t\t\t\tstate.combineTokens = true\n\t\t\t\t\t\t\treturn 'link'\n\t\t\t\t\t\t} else if (stream.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+)?#[0-9]+\\b/)) {\n\t\t\t\t\t\t\t// User/Project#Num\n\t\t\t\t\t\t\t// User#Num\n\t\t\t\t\t\t\t// #Num\n\t\t\t\t\t\t\tstate.combineTokens = true\n\t\t\t\t\t\t\treturn 'link'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tstream.match(urlRE) &&\n\t\t\t\t\tstream.string.slice(stream.start - 2, stream.start) != '](' &&\n\t\t\t\t\t(stream.start == 0 || /\\W/.test(stream.string.charAt(stream.start - 1)))\n\t\t\t\t) {\n\t\t\t\t\t// URLs\n\t\t\t\t\t// Taken from http://daringfireball.net/2010/07/improved_regex_for_matching_urls\n\t\t\t\t\t// And then (issue #1160) simplified to make it not crash the Chrome Regexp engine\n\t\t\t\t\t// And then limited url schemes to the CommonMark list, so foo:bar isn't matched as a URL\n\t\t\t\t\tstate.combineTokens = true\n\t\t\t\t\treturn 'link'\n\t\t\t\t}\n\t\t\t\tstream.next()\n\t\t\t\treturn null\n\t\t\t},\n\t\t\tblankLine: blankLine,\n\t\t}\n\n\t\tvar markdownConfig = {\n\t\t\ttaskLists: true,\n\t\t\tstrikethrough: true,\n\t\t\temoji: true,\n\t\t}\n\t\tfor (var attr in modeConfig) {\n\t\t\tmarkdownConfig[attr] = modeConfig[attr]\n\t\t}\n\t\tmarkdownConfig.name = 'markdown'\n\t\treturn CodeMirror.overlayMode(CodeMirror.getMode(config, markdownConfig), gfmOverlay)\n\t},\n\t'markdown'\n)\n\nCodeMirror.defineMIME('text/x-gfm', 'gfm')\n","import React, { useLayoutEffect, useRef } from 'react'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport styled from 'styled-components'\nimport otText from 'ot-text'\nimport ShareDB from 'sharedb/lib/client'\nimport io from 'socket.io-client'\n\n\nimport { setCmInstance } from '../../actions/editor'\n\nimport { default as PagedownConverter } from '../../vendor/Markdown.Converter'\nimport { default as PagedownEditor } from '../../vendor/Markdown.Editor'\n\nimport CodeMirror from 'codemirror'\n//import 'codemirror/mode/gfm/gfm'\nimport '../../vendor/modifiedGfm'\nimport 'codemirror/mode/javascript/javascript'\nimport 'codemirror/mode/css/css'\nimport 'codemirror/mode/clike/clike'\nimport '../../static/css/CodeMirrorStyle.css'\n\nconst FakeButtonsElement = styled.div`\n\tdisplay: none;\n`\n\nconst UserList = styled.ul`\n\tlist-style: none;\n\tmargin: 0;\n\t& li {\n\t\tmargin: 2px;\n\t\tcolor: white;\n\t\tfloat: right;\n\t\ttext-align: center;\n\t\tline-height: 25px;\n\t\timg {\n\t\t\twidth: 25px;\n\t\t\theight: 25px;\n\t\t\tborder-radius: 50%;\n\t\t}\n\t}\n`\n\nconst Editor = ({ user, setCmInstance, match, history }) => {\n\tconst editorRef = useRef()\n\tconst userListRef = useRef()\n\n\tconst currentFile =\n\t\tmatch.params.nameHash === '404'\n\t\t\t? { nameHash: 404, name: '404' }\n\t\t\t: [...user.ownFiles, ...user.secondFiles].find(file => file.nameHash === match.params.nameHash) || {}\n\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (user.ownFiles.length && match.params.nameHash && !currentFile.nameHash) history.push('/404')\n\t\t},\n\t\t[user, match.params.nameHash, currentFile]\n\t)\n\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tconst pagedownConverter = new PagedownConverter.Converter()\n\t\t\tconst pagedownEditor = new PagedownEditor.Editor(pagedownConverter)\n\t\t\tconst codeMirror = CodeMirror.fromTextArea(editorRef.current, {\n\t\t\t\tvalue: '',\n\t\t\t\tmode: {\n\t\t\t\t\tname: 'markdown',\n\t\t\t\t\thighlightFormatting: true,\n\t\t\t\t\tmaxBlockquoteDepth: 3,\n\t\t\t\t\tfencedCodeBlockHighlighting: true,\n\t\t\t\t},\n\t\t\t\tshared: true,\n\t\t\t\tlineWrapping: true,\n\t\t\t})\n\t\t\tpagedownEditor.run(codeMirror)\n\t\t\tconst doClick = name =>\n\t\t\t\tpagedownEditor.uiManager.buttons[name] && pagedownEditor.uiManager.buttons[name].onclick()\n\t\t\tsetCmInstance({ codeMirror, doClick })\n\n\t\t\tif (match.params.nameHash === '404')\n\t\t\t\tcodeMirror.setValue(`Don't panic\n=========\n### Page not found\n\nLooks like you have opened a wrong url or the file no longer exists\n\nIf not, we're probably already working on resolving the issue`)\n\n\t\t\tif (!currentFile.nameHash || match.params.nameHash === '404') return codeMirror.toTextArea\n\n\t\t\tlet stopWatch = false\n\n\t\t\tShareDB.types.register(otText.type)\n\n\t\t\tconst sharews = new WebSocket(`ws://localhost:4000`)\n\t\t\tconst shareconn = new ShareDB.Connection(sharews)\n\t\t\tconst sharedoc = shareconn.get('docs', currentFile.nameHash)\n\t\t\t/*\n            sharedoc.fetch(function(err) {\n                if (err) throw err\n                console.log('asdf', sharedoc.type)\n                if (sharedoc.type === null) {\n                    sharedoc.create('', 'text')\n                }\n            })\n            */\n\t\t\tcodeMirror.on('change', (ed, chg) => {\n\t\t\t\tif (stopWatch) return\n\n\t\t\t\tconst stindex = ed.indexFromPos(chg.from)\n\t\t\t\tconst delta = chg.removed.join('\\n').length\n\t\t\t\tconst addedText = chg.text.join('\\n')\n\n\t\t\t\ttry {\n\t\t\t\t\tif (delta) sharedoc.submitOp([stindex, { d: delta }])\n\t\t\t\t\tif (addedText) sharedoc.submitOp([stindex, addedText])\n\t\t\t\t} catch (err) {\n\t\t\t\t\thistory.push('/404')\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tcodeMirror.on('cursorActivity', () => {\n\t\t\t\tconst stPos = codeMirror.getCursor('start')\n\t\t\t\tconst edPos = codeMirror.getCursor('end')\n\t\t\t\tconst hdPos = codeMirror.getCursor('head')\n\n\t\t\t\tconst stindex = codeMirror.indexFromPos(stPos)\n\t\t\t\tconst edindex = codeMirror.indexFromPos(edPos)\n\t\t\t\tconst hdindex = codeMirror.indexFromPos(hdPos)\n\t\t\t\tconst prefixed = hdindex === stindex && stindex !== edindex\n\n\t\t\t\tsocket.emit('anchor-update', { stindex, edindex, prefixed })\n\t\t\t})\n\n\t\t\tsharedoc.subscribe(() => {\n\t\t\t\tstopWatch = true\n\n\t\t\t\tcodeMirror.setValue(sharedoc.data || '')\n\t\t\t\tcodeMirror.setCursor(0, 0)\n\t\t\t\tcodeMirror.focus()\n\t\t\t\tstopWatch = false\n\t\t\t})\n\n\t\t\tsharedoc.on('op', (op, mine) => {\n\t\t\t\tif (mine) return\n\t\t\t\tconst index = op.length === 2 ? op[0] : 0\n\t\t\t\tconst data = op.length === 2 ? op[1] : op[0]\n\n\t\t\t\tif (typeof data === 'string') {\n\t\t\t\t\tconst pos = codeMirror.posFromIndex(index)\n\n\t\t\t\t\tstopWatch = true\n\t\t\t\t\tcodeMirror.replaceRange(data, pos, pos)\n\t\t\t\t\tstopWatch = false\n\t\t\t\t} else {\n\t\t\t\t\tconst delCt = data.d\n\t\t\t\t\tconst stPos = codeMirror.posFromIndex(index)\n\t\t\t\t\tconst edPos = codeMirror.posFromIndex(index + delCt)\n\t\t\t\t\t// const range = { start: stPos, end: edPos }\n\n\t\t\t\t\tstopWatch = true\n\t\t\t\t\tcodeMirror.replaceRange('', stPos, edPos)\n\t\t\t\t\tstopWatch = false\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tconst addName = (id, photoURL) => {\n\t\t\t\tconst userslist = userListRef.current\n\t\t\t\tconst usericon = document.createElement('li')\n\t\t\t\tusericon.classList.add(`u-${id}`)\n\t\t\t\tusericon.innerHTML = `<img src=\"${photoURL}\" alt=\"\" />`\n\t\t\t\tuserslist.appendChild(usericon)\n\n\t\t\t\tconst color = idToColor(id)\n\t\t\t\tconst styleTag = document.createElement('style')\n\t\t\t\tstyleTag.id = `style-${id}`\n\t\t\t\tstyleTag.innerHTML = `\n                .CodeMirror-line .u-${id}                   { background-color: ${hexToRgbaStyle(color, 0.35)}; }\n                .CodeMirror-line .u-${id}.cursor            { opacity: 1; }\n                .CodeMirror-line .u-${id}.cursor.left       { border-left: 2px solid ${color}; }\n                .CodeMirror-line .u-${id}.cursor.right      { border-right: 2px solid ${color}; }\n                .CodeMirror-line .u-${id}.empty             { background-color: transparent; }\n\n            `\n\t\t\t\tdocument.querySelector('head').appendChild(styleTag)\n\t\t\t}\n\n\t\t\tconst anchorMap = {}\n\t\t\tconst setAnchor = (id, anchor) => {\n\t\t\t\tif (id in anchorMap) {\n\t\t\t\t\tanchorMap[id].forEach(m => m.clear())\n\t\t\t\t\tdelete anchorMap[id]\n\t\t\t\t}\n\n\t\t\t\t// Whether or not the cursor is actually at the beginning\n\t\t\t\t// or end of the selection\n\t\t\t\tlet emptyClass = ''\n\t\t\t\tlet stindex = anchor.stindex\n\t\t\t\tconst edindex = anchor.edindex\n\n\t\t\t\t// Add selection\n\t\t\t\tlet stPos, edPos\n\t\t\t\tanchorMap[id] = []\n\n\t\t\t\tif (stindex !== edindex) {\n\t\t\t\t\tstPos = codeMirror.posFromIndex(stindex)\n\t\t\t\t\tedPos = codeMirror.posFromIndex(edindex)\n\n\t\t\t\t\tanchorMap[id].push(codeMirror.markText(stPos, edPos, { className: `u-${id}` }))\n\t\t\t\t}\n\n\t\t\t\tif (stindex === edindex) {\n\t\t\t\t\tstindex = Math.max(0, stindex - 1)\n\t\t\t\t\temptyClass = 'empty'\n\t\t\t\t}\n\n\t\t\t\t// Add cursor\n\t\t\t\tconst index = anchor.prefixed ? stindex : edindex\n\t\t\t\tstPos = codeMirror.posFromIndex(index + (anchor.prefixed ? 0 : -1))\n\t\t\t\tedPos = codeMirror.posFromIndex(index + (anchor.prefixed ? 1 : 0))\n\n\t\t\t\tanchorMap[id].push(\n\t\t\t\t\tcodeMirror.markText(stPos, edPos, {\n\t\t\t\t\t\tclassName: `u-${id} ${emptyClass} cursor ${anchor.prefixed ? 'left' : 'right'}`,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tconst removeId = id => {\n\t\t\t\tuserListRef.current.querySelector(`li.u-${id}`).remove()\n\t\t\t\tdocument.querySelector(`#style-${id}`).remove()\n\t\t\t\tif (id in anchorMap) {\n\t\t\t\t\tanchorMap[id].forEach(m => m.clear())\n\t\t\t\t\tdelete anchorMap[id]\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst idToColor = id => {\n\t\t\t\tlet total = 0\n\t\t\t\tfor (let c of id) total += c.charCodeAt(0)\n\n\t\t\t\tlet hex = total.toString(16)\n\t\t\t\twhile (hex.length < 3) hex += hex[hex.length - 1]\n\t\t\t\thex = hex.substr(0, 3)\n\n\t\t\t\tlet color = '#'\n\t\t\t\tfor (let c of hex) color += `${c}0`\n\n\t\t\t\treturn color\n\t\t\t}\n\n\t\t\tconst hexToRgbaStyle = (hex, opacity) => {\n\t\t\t\thex = hex.replace('#', '')\n\t\t\t\tlet r, g, b\n\t\t\t\tif (hex.length === 3) {\n\t\t\t\t\tr = hex[0] + hex[0]\n\t\t\t\t\tg = hex[1] + hex[1]\n\t\t\t\t\tb = hex[2] + hex[2]\n\t\t\t\t} else {\n\t\t\t\t\tr = hex.substr(0, 2)\n\t\t\t\t\tg = hex.substr(2, 2)\n\t\t\t\t\tb = hex.substr(4, 2)\n\t\t\t\t}\n\n\t\t\t\tr = parseInt(r, 16)\n\t\t\t\tg = parseInt(g, 16)\n\t\t\t\tb = parseInt(b, 16)\n\n\t\t\t\treturn `rgba(${r},${g},${b},${opacity})`\n\t\t\t}\n\n\t\t\tconst clearAll = () => {\n\t\t\t\tfor (let key in anchorMap) removeId(key)\n\t\t\t}\n\n\t\t\tconst socket = io('http://localhost:5000')\n\t\t\tsocket.on('connect', () => {\n\t\t\t\tsocket.emit('joinRoom', currentFile.nameHash)\n\n\t\t\t\tsocket.on('disconnect', () => clearAll())\n\n\t\t\t\tsocket.once('initialize', e => {\n\t\t\t\t\tfor (let id in e.anchors) socket.id !== id && setAnchor(id, e.anchors[id])\n\t\t\t\t\tfor (let id in e.names) {\n\t\t\t\t\t\tsocket.id !== id && addName(id, e.names[id])\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tsocket.on('anchor-update', e => {\n\t\t\t\t\tif (socket.id === e.id) return\n\n\t\t\t\t\tsetAnchor(e.id, e.anchor)\n\t\t\t\t})\n\t\t\t\tsocket.on('id-join', e => {\n\t\t\t\t\tif (socket.id === e.id) return\n\n\t\t\t\t\taddName(e.id, e.name)\n\t\t\t\t\tsetAnchor(e.id, e.anchor)\n\t\t\t\t})\n\t\t\t\tsocket.on('id-left', e => {\n\t\t\t\t\tif (socket.id === e.id) return\n\n\t\t\t\t\tremoveId(e.id)\n\t\t\t\t})\n\t\t\t})\n\t\t\treturn () => {\n\t\t\t\tsharedoc.destroy()\n\t\t\t\tsocket.disconnect()\n\t\t\t\tcodeMirror.toTextArea()\n\t\t\t}\n\t\t},\n\t\t[currentFile.nameHash]\n\t)\n\n\treturn (\n\t\t<>\n\t\t\t<UserList ref={userListRef} />\n\t\t\t<textarea ref={editorRef} />\n\t\t\t<FakeButtonsElement id=\"wmd-button-bar\" />\n\t\t</>\n\t)\n}\n\nconst mapStateToProps = ({ editor: { codeMirror }, user }) => ({ codeMirror, user })\n\nconst mapDispatchToProps = { setCmInstance }\n\nexport default withRouter(\n\tconnect(\n\t\tmapStateToProps,\n\t\tmapDispatchToProps\n\t)(Editor)\n)\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z\"\n});\n\nvar SvgVisibilityOn = function SvgVisibilityOn(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgVisibilityOn, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/visibility-on.9440d095.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z\"\n});\n\nvar SvgVisibilityOff = function SvgVisibilityOff(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgVisibilityOff, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/visibility-off.4a19fae5.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport Editor from '../Editor/Editor'\nimport ReactMarkdown from 'react-markdown'\n\nimport { toggleRenderMarkdown } from '../../actions/renderMarkdown'\n\nimport { ReactComponent as VisibilityOn } from '../../icons/visibility-on.svg'\nimport { ReactComponent as VisibilityOff } from '../../icons/visibility-off.svg'\n\nconst Wrapper = styled.div`\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n`\n\nconst StyledPaper = styled.div`\n\tmargin-top: 40px;\n\twidth: calc(var(--container-width) - 60px);\n\tpadding: 30px;\n\tbackground-color: white;\n\tbox-shadow: 10px 20px 20px rgba(0, 0, 0, 0.25);\n\t@media (max-width: 1160px) {\n\t\ttransform: translateX(${({ mobileSidebarOpen }) => (mobileSidebarOpen ? 100 : 0)}%);\n\t\ttransition: transform 0.5s;\n\t}\n`\n\nconst VisibilityWrapper = styled.div`\n\tdisplay: ${props => (props.visible ? 'block' : 'none')};\n`\n\nconst MarkdownRenderWrapper = styled.div`\n\tmin-height: calc(100vh - 188px);\n\tpadding: 14px;\n\toverflow-wrap: break-word;\n`\n\nconst RenderButton = styled.div`\n\tposition: fixed;\n\twidth: 0;\n\theight: 0;\n\ttop: 60px;\n\tright: 0;\n\tborder: 40px solid rgba(0, 0, 0, 0.1);\n\tborder-bottom-color: transparent;\n\tborder-left-color: transparent;\n\tcursor: pointer;\n\tz-index: 2;\n\t&::after {\n\t\tcontent: '';\n\t\tclear: both;\n\t}\n\tsvg {\n\t\tposition: absolute;\n\t\tmargin-left: 5px;\n\t\tmargin-top: -30px;\n\t\tcolor: var(--c-darkgrey-bg);\n\t}\n`\n\nconst Paper = ({ renderMarkdown, toggleRenderMarkdown, mobileSidebarOpen, codeMirror }) => (\n\t<Wrapper>\n\t\t<RenderButton onClick={toggleRenderMarkdown}>\n\t\t\t{renderMarkdown ? <VisibilityOff /> : <VisibilityOn />}\n\t\t</RenderButton>\n\t\t<StyledPaper mobileSidebarOpen={mobileSidebarOpen}>\n\t\t\t<VisibilityWrapper visible={!renderMarkdown}>\n\t\t\t\t<Editor />\n\t\t\t</VisibilityWrapper>\n\t\t\t<VisibilityWrapper visible={renderMarkdown}>\n\t\t\t\t<MarkdownRenderWrapper>\n\t\t\t\t\t<ReactMarkdown source={codeMirror.doc && codeMirror.doc.getValue()} />\n\t\t\t\t</MarkdownRenderWrapper>\n\t\t\t</VisibilityWrapper>\n\t\t</StyledPaper>\n\t</Wrapper>\n)\n\nconst mapStateToProps = ({ renderMarkdown, editor: { codeMirror } }) => ({ renderMarkdown, codeMirror })\n\nconst mapDispatchToProps = { toggleRenderMarkdown }\n\nexport default withRouter(\n\tconnect(\n\t\tmapStateToProps,\n\t\tmapDispatchToProps\n\t)(Paper)\n)\n","import React, { createContext, useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { createGlobalStyle } from 'styled-components'\n\nimport Toolbar from '../Toolbar/Toolbar'\nimport Sidebar from '../Sidebar/Sidebar'\nimport Paper from '../Paper/Paper'\nimport { mobileMediaQuery } from '../../config/constants'\n\nimport { requestUserData } from '../../actions/user'\n\nconst GlobalStyle = createGlobalStyle`\n\t* {\n        margin: 0;\n        padding: 0;\n\t}\n    body {\n        font-family: Roboto;\n\t\tbackground-color: var(--c-lightgrey-bg);\n\t\tpadding-top: 60px;\n        @media (max-width: 1160px) {\n            padding-bottom: 100px;\n        }\n    }\n\n    body, html{\n        overflow-x: hidden;\n    }\n\n    :root {\n        font-size: 18px;\n\n        --container-width: 1200px;\n        --max-width: 1700px;\n\t\n        --c-lightgrey-bg: #eee;\n\t\t--c-darkgrey-bg: #3E3E3E;\n\t\t--c-white-hl: rgba(255, 255, 255, 0.65);\n\t\t--c-blue-hl: #00B2FF;\n        --c-red-hl: rgba(255, 0, 0, 0.46);\n        --c-lightgrey-text: #eee;\n\t\t--c-grey-text: #B9B9B9;\n        --c-darkgrey-text: #555;\n\n\t\t@media (max-width: 1920px) {\n\t\t\t--container-width: 60%;\n\t\t\t--max-width: calc(60% + 500px);\n\t\t}\n\t\t@media (max-width: 1680px) {\n\t\t\t--container-width: 70%;\n\t\t\t--max-width: 100%;\n\t\t}\n        @media (max-width: 1160px) {\n            --container-width: calc(100% - 40px);\n            --max-width: 100%;\n        }\n    }\n`\n\nexport const IsMobileContext = createContext()\n\nconst App = ({ requestUserData }) => {\n\tconst mobileState = useState(matchMedia(mobileMediaQuery).matches)\n\tconst [mobileSidebarOpen, toggleMobileSidebar] = useState(false)\n\n\tuseEffect(() => {\n\t\trequestUserData()\n\t}, [])\n\n\treturn (\n\t\t<IsMobileContext.Provider value={mobileState}>\n\t\t\t<Toolbar toggleMobileSidebar={toggleMobileSidebar} />\n\t\t\t<Sidebar mobileSidebarOpen={mobileSidebarOpen} />\n\t\t\t<Paper mobileSidebarOpen={mobileSidebarOpen} />\n\t\t\t<GlobalStyle />\n\t\t</IsMobileContext.Provider>\n\t)\n}\n\nconst mapDispatchToProps = { requestUserData }\n\nexport default connect(\n\tnull,\n\tmapDispatchToProps\n)(App)\n","import React from 'react'\nimport { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport App from '../App/App'\n\nconst RootRouter = ({ user }) => (\n\t<Router>\n\t\t<Switch>\n\t\t\t<Route path=\"/:nameHash\" component={App} />\n\t\t\t{user.ownFiles.length ? <Redirect to={`/${user.ownFiles[0].nameHash}`} /> : <Route component={App} />}\n\t\t</Switch>\n\t</Router>\n)\n\nconst mapStateToProps = ({ user }) => ({ user })\n\nexport default connect(mapStateToProps)(RootRouter)\n","import React from 'react'\nimport { render } from 'react-dom'\nimport { createStore, applyMiddleware, compose } from 'redux'\nimport { Provider } from 'react-redux'\nimport thunkMiddleware from 'redux-thunk'\nimport registerServiceWorker from './registerServiceWorker'\nimport rootReducer from './reducers'\n\nimport RootRouter from './components/RootRouter/RootRouter'\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunkMiddleware)))\n\nrender(\n\t<Provider store={store}>\n\t\t<RootRouter />\n\t</Provider>,\n\tdocument.getElementById('root')\n)\n\nregisterServiceWorker()\n"],"sourceRoot":""}